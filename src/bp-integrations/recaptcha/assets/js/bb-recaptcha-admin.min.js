!function(c){var e={init:function(){this.setupGlobals(),this.addListeners()},setupGlobals:function(){this.selected_version=c('input[name="bb_recaptcha[recaptcha_version]"]:checked').val(),this.v2_option=c('.recaptcha_v2:visible input[name="bb_recaptcha[v2_option]"]:checked').val(),this.site_key="",this.secret_key="",this.captcha_response="",c(".bb-recaptcha-settings form table.bb-inactive-field").length&&(c(".bb-recaptcha-settings form #bb_recaptcha_settings table").removeClass("bb-inactive-field"),c(".bb-recaptcha-settings form #bb_recaptcha_design table").removeClass("bb-inactive-field")),c(".bb-recaptcha-settings .section-bb_recaptcha_versions .bb-recaptcha-errors").length&&(c(".bb-recaptcha-settings form #bb_recaptcha_settings table").addClass("bb-inactive-field"),c(".bb-recaptcha-settings form #bb_recaptcha_design table").addClass("bb-inactive-field"))},addListeners:function(){c(".buddyboss_page_bp-integrations .section-bb_recaptcha_versions").on("keyup","#bb-recaptcha-site-key, #bb-recaptcha-secret-key",this.enableVerifyButton.bind(this)),c(".buddyboss_page_bp-integrations .section-bb_recaptcha_versions").on("click",".recaptcha-verification",this.recaptchaVerifications.bind(this)),c(".buddyboss_page_bp-integrations .section-bb_recaptcha_versions").on("click","#recaptcha_submit",this.recaptchaSubmit.bind(this)),c(".buddyboss_page_bp-integrations .section-bb_recaptcha_versions").on("click","#recaptcha_verified",this.recaptchaVerified.bind(this)),c(".buddyboss_page_bp-integrations .section-bb_recaptcha_versions").on("click","#recaptcha_cancel",this.recaptchaVerificationPopupClose.bind(this)),c(".buddyboss_page_bp-integrations .section-bb_recaptcha_versions").on("change",'input[name="bb_recaptcha[recaptcha_version]"]',this.recaptchaVersion.bind(this)),c(".buddyboss_page_bp-integrations .section-bb_recaptcha_versions").on("change",'input[name="bb_recaptcha[v2_option]"]',this.recaptchaType.bind(this)),c(".buddyboss_page_bp-integrations .section-bb_recaptcha_design").on("change",'input[name="bb_recaptcha[theme]"]',this.recaptchaTheme.bind(this)),c(".buddyboss_page_bp-integrations .section-bb_recaptcha_settings").on("change","#recaptcha_bb_login",this.allowByPass.bind(this)),c(".buddyboss_page_bp-integrations .section-bb_recaptcha_settings").on("change","#bb_recaptcha_allow_bypass",this.enableBypassInputAndToggle.bind(this)),c(".buddyboss_page_bp-integrations .section-bb_recaptcha_settings").on("keyup",'input[name="bb_recaptcha[bypass_text]"]',this.updateByPassUrl.bind(this)),c(".buddyboss_page_bp-integrations .section-bb_recaptcha_settings").on("click",".bb_login_require .bb-copy-button",this.copyByPassUrl.bind(this))},enableVerifyButton:function(e){e.preventDefault();var t=c("#bb-recaptcha-site-key").val(),a=c("#bb-recaptcha-site-key").attr("data-old-value"),i=c("#bb-recaptcha-secret-key").val(),e=c("#bb-recaptcha-secret-key").attr("data-old-value");""!==t&&""!==i?(c(".verify-row").removeClass("bp-hide"),c(".recaptcha-verification").removeAttr("disabled"),c(".bb-recaptcha-settings form .submit input").attr("disabled","disabled"),""===c('input[name="bb_recaptcha[recaptcha_version]"]:checked').val()||t===a&&i===e?(c(".verify-row").addClass("bp-hide"),c(".recaptcha-verification").attr("disabled","disabled"),c(".bb-recaptcha-settings form .submit input").removeAttr("disabled")):(c(".verify-row").removeClass("bp-hide"),c(".recaptcha-verification").removeAttr("disabled"),c(".bb-recaptcha-settings form .submit input").attr("disabled","disabled"))):(c(".verify-row").removeClass("bp-hide"),c(".recaptcha-verification").attr("disabled","disabled"),c(".bb-recaptcha-settings form .submit input").removeAttr("disabled"))},recaptchaVersion:function(e){var t;e.preventDefault(),"recaptcha_v3"===e.currentTarget.value?(c(".recaptcha_v3").removeClass("bp-hide"),c(".recaptcha_v2").addClass("bp-hide"),c("#bp-hello-content-recaptcha_v2").addClass("bp-hide"),c("#bp-hello-content-recaptcha_v3").removeClass("bp-hide")):(c(".recaptcha_v2").removeClass("bp-hide"),c(".recaptcha_v3").addClass("bp-hide"),void 0!==(t=c('.recaptcha_v2 input[name="bb_recaptcha[v2_option]"]:checked').val())&&"v2_invisible_badge"===t?(c("#bp-hello-content-recaptcha_v2").addClass("bp-hide"),c("#bp-hello-content-recaptcha_v3").removeClass("bp-hide")):(c("#bp-hello-content-recaptcha_v2").removeClass("bp-hide"),c("#bp-hello-content-recaptcha_v3").addClass("bp-hide"))),this.selected_version!==e.currentTarget.value||"recaptcha_v2"===e.currentTarget.value&&this.v2_option!==c('.recaptcha_v2:visible input[name="bb_recaptcha[v2_option]"]:checked').val()?(c(".verify-row").removeClass("bp-hide"),c(".recaptcha-verification").removeAttr("disabled"),c(".bb-recaptcha-settings form .submit input").attr("disabled","disabled")):(c(".verify-row").addClass("bp-hide"),c(".recaptcha-verification").attr("disabled","disabled"),c(".bb-recaptcha-settings form .submit input").removeAttr("disabled"))},recaptchaType:function(e){e.preventDefault(),this.v2_option!==e.currentTarget.value?(c(".verify-row").removeClass("bp-hide"),c(".recaptcha-verification").removeAttr("disabled"),c(".bb-recaptcha-settings form .submit input").attr("disabled","disabled")):(c(".verify-row").addClass("bp-hide"),c(".recaptcha-verification").attr("disabled","disabled"),c(".bb-recaptcha-settings form .submit input").removeAttr("disabled")),c(".recaptcha-v2-fields p.description").addClass("bp-hide"),c("."+e.currentTarget.value+"_description").removeClass("bp-hide"),"v2_checkbox"===e.currentTarget.value?(c(".recaptcha_v2_checkbox").removeClass("bp-hide"),c(".recaptcha_v2_invisible").addClass("bp-hide"),c("#bp-hello-content-recaptcha_v2").removeClass("bp-hide"),c("#bp-hello-content-recaptcha_v3").addClass("bp-hide")):(c(".recaptcha_v2_invisible").removeClass("bp-hide"),c(".recaptcha_v2_checkbox").addClass("bp-hide"),c("#bp-hello-content-recaptcha_v2").addClass("bp-hide"),c("#bp-hello-content-recaptcha_v3").removeClass("bp-hide"))},recaptchaTheme:function(e){e.preventDefault(),"dark"===e.currentTarget.value?c('input[name="bb_recaptcha[size]"] + label').removeClass("opt-size-light").addClass("opt-size-dark"):c('input[name="bb_recaptcha[size]"] + label').removeClass("opt-size-dark").addClass("opt-size-light")},recaptchaVerifications:function(e){e.preventDefault();var t=this;c(document).find("#bp-hello-backdrop").length||(i=c(document).find(".bp-hello-recaptcha"),c('<div id="bp-hello-backdrop" style="display: none;"></div>').insertBefore(i));var a,e=document.getElementById("bp-hello-backdrop"),i=document.getElementById("bp-hello-container");null!==e&&(document.body.classList.add("bp-disable-scroll"),e.style.display="",i.style.display="",t.selected_version=c('input[name="bb_recaptcha[recaptcha_version]"]:checked').val(),t.site_key=c("#bb-recaptcha-site-key").val(),t.secret_key=c("#bb-recaptcha-secret-key").val(),window.bb_recaptcha_script=document.createElement("script"),c('input[name="bb_recaptcha[v2_option]"]').length&&(t.v2_option=c('input[name="bb_recaptcha[v2_option]"]:checked').val()),a=this.fetchSelector(),"recaptcha_v3"===t.selected_version&&(window.bb_recaptcha_script.src="https://www.google.com/recaptcha/api.js?onload=bb_recaptcha_v3_verify&render="+t.site_key),"recaptcha_v2"===t.selected_version&&t.v2_option&&("v2_checkbox"===t.v2_option&&(window.bb_recaptcha_script.src="https://www.google.com/recaptcha/api.js?onload=bb_recaptcha_v2_verify&render=explicit"),"v2_invisible_badge"===t.v2_option&&(window.bb_recaptcha_script.src="https://www.google.com/recaptcha/api.js?onload=bb_recaptcha_v2_verify_invisible&render=explicit",c("body").append('<div id="v2_invisible_footer"></div>'))),window.bb_recaptcha_script.onerror=function(){console.log("error")},window.bb_recaptcha_v3_verify=function(){"object"==typeof grecaptcha&&grecaptcha.ready(function(){grecaptcha.execute(t.site_key,{action:"bb_recaptcha_admin_verify"}).then(function(e){t.captcha_response=e,c("#"+a+" .verifying_token").hide(),c("#"+a+" .verified_token").show()})})},window.bb_recaptcha_v2_verify=function(){window.bb_recaptcha_box=grecaptcha.render("verifying_token",{sitekey:t.site_key,theme:"light",callback:function(){t.captcha_response=grecaptcha.getResponse(window.bb_recaptcha_box)}})},window.bb_recaptcha_v2_verify_invisible=function(){window.bb_recaptcha_invisible=grecaptcha.render("v2_invisible_footer",{sitekey:t.site_key,tabindex:9999,size:"invisible",callback:function(e){t.captcha_response=e,c("#"+a+" .verifying_token").hide(),c("#"+a+" .verified_token").show()}}),grecaptcha.execute()},c("#recaptcha_submit").removeAttr("disabled"),document.head.appendChild(window.bb_recaptcha_script))},recaptchaSubmit:function(t){t.preventDefault();var e=this;c(t.currentTarget).attr("disabled","disabled");var a={action:"bb_recaptcha_verification_admin_settings",nonce:bbRecaptchaAdmin.nonce,selected_version:e.selected_version,site_key:e.site_key,secret_key:e.secret_key,captcha_response:e.captcha_response};e.v2_option&&(a.v2_option=e.v2_option);var i=this.fetchSelector();c.ajax({type:"POST",url:bbRecaptchaAdmin.ajax_url,data:a,success:function(e){c(t.currentTarget).removeAttr("disabled"),e.success&&void 0!==e.data?(c("#"+i).html(e.data),c(".bb-popup-buttons").html('<button id="recaptcha_verified" class="button">OK</button>'),document.head.removeChild(window.bb_recaptcha_script),window.bb_recaptcha_script=null,window.bb_recaptcha_v3_verify=null,window.bb_recaptcha_box=null,window.bb_recaptcha_v2_verify=null,window.bb_recaptcha_invisible=null,window.bb_recaptcha_v2_verify_invisible=null):(c("#"+i).html(e.data),c(".bb-popup-buttons").html('<button id="recaptcha_cancel" class="button">Cancel</button>'))}})},recaptchaVerified:function(e){e.preventDefault(),window.location.reload()},recaptchaVerificationPopupClose:function(e){e.preventDefault(),window.location.reload()},fetchSelector:function(){var e=this;return"recaptcha_v3"===e.selected_version||"recaptcha_v2"===e.selected_version&&e.v2_option&&"v2_invisible_badge"===e.v2_option?"bp-hello-content-recaptcha_v3":"bp-hello-content-recaptcha_v2"},allowByPass:function(e){e.currentTarget.checked?c(".bb_login_require").removeClass("bp-hide"):c(".bb_login_require").addClass("bp-hide")},enableBypassInputAndToggle:function(e){e.currentTarget.checked?(c('.bb_login_require input[name="bb_recaptcha[bypass_text]"]').removeAttr("disabled"),c(".bb_login_require .copy-toggle").removeClass("bp-hide")):(c('.bb_login_require input[name="bb_recaptcha[bypass_text]"]').attr("disabled","disabled"),c(".bb_login_require .copy-toggle").addClass("bp-hide"))},updateByPassUrl:function(e){e.preventDefault();var t="xxUNIQUE_STRINGXS";(t=e.currentTarget.value?e.currentTarget.value:t).length<6?(c(".bb_login_require .copy-toggle").addClass("bb-url-not-allowed"),c(".bb_login_require .bb-copy-button").addClass("bp-hide")):(c(".bb_login_require .copy-toggle").removeClass("bb-url-not-allowed"),c(".bb_login_require .bb-copy-button").removeClass("bp-hide"));t=c(".copy-toggle-text").data("domain")+t;c(".copy-toggle-text").attr("href",t),c(".copy-toggle-text").html(t)},copyByPassUrl:function(e){e.preventDefault();var t=c(".copy-toggle-text").attr("href"),e=c("<input>");c("body").append(e),e.val(t).select(),document.execCommand("copy"),e.remove()}};c(function(){e.init()})}(jQuery);