function clear(e){if(e=document.getElementById(e)){var t=e.getElementsByTagName("INPUT"),i=e.getElementsByTagName("OPTION"),a=0;if(t)for(a=0;a<t.length;a++)t[a].checked="";if(i)for(a=0;a<i.length;a++)i[a].selected=!1}}!function(o){var _;o(".visibility-toggle-link").on("click",function(e){e.preventDefault(),o(this).attr("aria-expanded","true").parent().hide().siblings(".field-visibility-settings").show()}),o(".field-visibility-settings-close").on("click",function(e){e.preventDefault(),o(".visibility-toggle-link").attr("aria-expanded","false");var e=o(this).parent(),t=e.find("input:checked").parent().text();e.hide().siblings(".field-visibility-settings-toggle").children(".current-visibility-level").text(t).end().show()}),0<o(".bb_admin_repeater_group").length&&(o(".bb_admin_repeater_group").each(function(){var t,i=o(this),a=i.attr("id").split("-").pop(),r=i.find(".repeater_group_outer").length;0<r&&(t=[],i.find(".repeater_group_outer").each(function(){var e=o(this),a=(t.push(e.data("set_no")),1<r&&e.find(".repeater_group_inner").hide(),"");e.find(".editfield").each(function(){var e=o(this).find("input[type=text], input[type=number], input[type=email], input[type=phone], input:checked, textarea, select"),t=e.val(),i=e.attr("name"),i=-1<(i?i.split("_"):"").indexOf("visibility");if(""!==o.trim(t)&&!i)return e.is("select")?a=o.trim(e.find("option:selected").text()):a=o.trim(t),!1}),""===a?e.find(".repeater_set_title").addClass("repeater_set_title_empty").html(BB_Member_Admin.empty_field):e.find(".repeater_set_title").html(a)}),i.append('<input type="hidden" name="repeater_set_sequence['+a+']" value="'+t.join(",")+'">'),i.find(".repeater_sets_sortable").sortable({items:".repeater_group_outer",update:function(){var e=[];o(this).find(".repeater_group_outer").each(function(){e.push(o(this).data("set_no"))}),i.find('[name="repeater_set_sequence['+a+']"]').val(e.join(","))}}))}),o(".bb_admin_repeater_group").on("click",".repeater_group_outer .repeater_set_edit",function(e){e.preventDefault(),o(this).closest(".repeater_group_outer").find(".repeater_group_inner").slideToggle(),o(this).parents(".repeater_group_outer").toggleClass("active")}),_=[],o(".bb_admin_repeater_group").on("click",".repeater_group_outer .repeater_set_delete",function(e){var t=o(this),i=o(this).parents(".bb_admin_repeater_group").attr("id"),a=o("#"+i).find("#group").val();if((e.preventDefault(),!t.hasClass("disabled"))&&confirm(BB_Member_Admin.confirm_delete_set)){t.closest(".repeater_group_outer").find(".editfield").each(function(){var e=o(this),t=e.find("input,textarea,select").attr("name");void 0!==(t=void 0!==t?t:e.find("textarea.wp-editor-area").attr("name"))&&(t=(t=(t=t.replace("field_","")).replace("_day","")).replace("[]",""),_.push(t))}),t.closest(".repeater_group_outer").remove();for(var r=[],n=(o("#"+i+" .repeater_group_outer").each(function(){r.push(o(this).data("set_no"))}),o("#"+i+' [name="repeater_set_sequence['+a+']"]').val(r.join(",")),o("#"+i+' [name="field_ids['+a+']"]').val().split(",")),s=[],d=0;d<n.length;d++){for(var l=!1,p=0;p<_.length;p++)if(n[d]===_[p]){l=!0;break}l||s.push(n[d])}s=s.join(","),o("#"+i+' [name="field_ids['+a+']"]').val(s),o("#"+i+' [name="deleted_field_ids['+a+']"]').length||o("#"+i).append('<input type="hidden" name="deleted_field_ids['+a+']" >'),o("#"+i+' [name="deleted_field_ids['+a+']"]').val(_.join(",")),o("#"+i+" .repeater_group_outer").length}}),o(".bb_admin_repeater_group #btn_add_repeater_set").click(function(e){e.preventDefault();var t=o(this),i=t.data("group"),a=o("#profile-edit-form-"+i);t.hasClass("disabled")||(t.addClass("disabled"),t.attr("disabled","disabled"),t.css("pointer-events","none"),o.ajax({url:ajaxurl,method:"POST",data:{action:"bb_admin_xprofile_add_repeater_set",_wpnonce:t.data("nonce"),group:i,user_id:o("#user_id").val(),set_no:a.find('input[name="repeater_set_sequence['+i+']"]').val(),existing_field_ids:a.find('input[name="field_ids['+i+']"]').val()},success:function(e){e.success&&e.data&&(a.find(".repeater_group_outer").last().after(e.data.html),a.find('[name="field_ids['+i+']"]').val(e.data.field_ids.join(",")),a.find('[name="repeater_set_sequence['+i+']"]').val(e.data.set_no.join(",")),a.find(".repeater_sets_sortable").sortable("destroy").sortable(),a.find(".repeater_group_outer").last().addClass("active"),a.find(".repeater_group_outer .repeater_group_inner:last").show(),t.removeClass("disabled"),t.removeAttr("disabled","disabled"),t.css("pointer-events","initial"))}}))}),o(".field-visibility-settings").addClass("bp-hide"),o(".visibility-toggle-link").attr("aria-expanded","false"),o(".bb_admin_repeater_group").on("click",".repeater_group_outer .visibility-toggle-link",function(e){e.preventDefault(),o(this).attr("aria-expanded","true"),o(this).parent().addClass("field-visibility-settings-hide bp-hide").siblings(".field-visibility-settings").removeClass("bp-hide").addClass("field-visibility-settings-open")}),o(".bb_admin_repeater_group").on("click",".repeater_group_outer .field-visibility-settings-close",function(e){e.preventDefault();var e=o(this).parent(),t=(0<o(".iradio_minimal").length?e.find("input:checked").parent().next(".field-visibility-text"):e.find("input:checked").parent()).text();e.removeClass("field-visibility-settings-open").addClass("bp-hide").siblings(".field-visibility-settings-toggle").find(".current-visibility-level").text(t).closest(".field-visibility-settings-toggle").addClass("bp-show").removeClass("field-visibility-settings-hide bp-hide"),o(".visibility-toggle-link").attr("aria-expanded","false")})),window.clear=function(e){e&&(e=e.replace("[","\\[").replace("]","\\]"),o("#"+e+" option").length?o.each(o("#"+e+" option"),function(e,t){o(t).prop("selected",!1)}):o("#"+e+" [type=radio]").length&&o.each(o("#"+e+" [type=radio]"),function(e,t){o(t).prop("checked",!1)}))}}(jQuery);