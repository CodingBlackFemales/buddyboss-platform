window.bp=window.bp||{},function(){var e,t,o,n="https://developbb.com/";function a(t){var e={_embed:!0,per_page:o.per_page,page:o.page,orderby:"category_name",order:"asc"};o.searchQuery&&(e.search=o.searchQuery),o.collectionId&&"all"!==o.collectionId&&(e.integrations_collection=o.collectionId),o.categoryId&&"all"!==o.categoryId&&(e.integrations_category=o.categoryId),jQuery.ajax({method:"GET",url:n+"wp-json/wp/v2/integrations",data:e,success:function(e){o.data=t?o.data.concat(e):e,r(o)},error:function(e){console.log("Error fetching integrations"),e&&400===e.status&&jQuery(".bb-integrations_loadmore").remove()}})}function r(e){var t=jQuery("#tmpl-bb-integrations").html(),t=_.template(t)(e);e.previewParent&&e.previewParent.html(t)}r(o={previewParent:jQuery(".bb-integrations-section-listing"),data:[],collections:null,categories:null,searchQuery:"",collectionId:"",categoryId:"all",page:1,per_page:20}),e=jQuery.ajax({method:"GET",url:n+"wp-json/wp/v2/integrations_collection?per_page=99"}),t=jQuery.ajax({method:"GET",url:n+"wp-json/wp/v2/integrations_category?per_page=99"}),jQuery.when(e,t).done(function(e,t){o.collections=e[0],o.categories=t[0],a(!1)}).fail(function(){console.log("Error fetching collections or categories")}),jQuery(document).on("change",'input[name="integrations_collection"]',function(){"all"===jQuery(this).siblings("span").text().toLowerCase()?o.collectionId="all":o.collectionId=jQuery(this).val(),o.page=1,a(!1)}),jQuery(document).on("keyup",'input[name="search_integrations"]',function(){o.searchQuery=jQuery(this).val(),o.page=1,a(!1)}),jQuery(document).on("change",'select[name="categories_integrations"]',function(){o.categoryId=jQuery(this).val(),o.page=1,a(!1)}),jQuery(document).on("click",".bb-integrations_loadmore",function(e){e.preventDefault(),jQuery(this).addClass("loading"),o.page+=1,a(!0)})}(jQuery);