window.bp=window.bp||{},function(u){"undefined"!=typeof BP_Nouveau&&(bp.Nouveau=bp.Nouveau||{},bp.Nouveau.Moderation={start:function(){this.setupGlobals(),this.addListeners(),this.unblockUser()},setupGlobals:function(){this.current_page=1},addListeners:function(){u(document).on("click",'.bp-nouveau [data-bp-list="moderation"] .pager .md-more-container.load-more',this.injectModerations.bind(this))},injectModerations:function(e){var t,a,r,o,n=bp.Nouveau.getStorage("bp-moderation"),s=n.scope||null,i=n.filter||null,d=u(e.currentTarget);d.hasClass("load-more")&&(t=+Number(this.current_page)+1,a=this,r="",e.preventDefault(),d.find("a").first().addClass("loading"),u("#buddypress .dir-search input[type=search]").length&&(r=u("#buddypress .dir-search input[type=search]").val()),o={object:"moderation",scope:s,filter:i,search_terms:r,page:t,method:"append",target:"#buddypress [data-bp-list] table#moderation-list tbody"},bp.Nouveau.objectRequest(o).done(function(e){!0===e.success&&(d.parent(".pager").remove(),a.current_page=t,jQuery(window).scroll())}))},unblockUser:function(){u(document).on("click",".moderation-item-actions .bp-unblock-user",function(a){if(!confirm(BP_Nouveau.moderation.unblock_user_msg))return!1;u(a.currentTarget).append(' <i class="bb-icon bb-icon-loader animate-spin"></i>');var r=u(this),e={action:"bp_moderation_unblock_user",id:r.attr("data-id"),type:r.attr("data-type"),nonce:r.attr("data-nonce")};u.post(ajaxurl,e,function(e){var t;!0===e.success?r.parent().closest(".moderation-item-wrp").fadeOut("normal",function(){r.parent().closest(".moderation-item-wrp").remove()}):(u(a.currentTarget).find(".bb-icon-loader").remove(),t="",e.data.message.errors.bp_moderation_missing_data?t=e.data.message.errors.bp_moderation_missing_data:e.data.message.errors.bp_moderation_not_exit?t=e.data.message.errors.bp_moderation_not_exit:e.data.message.errors.bp_rest_invalid_id?t=e.data.message.errors.bp_rest_invalid_id:e.data.message.errors.bp_moderation_block_error&&(t=e.data.message.errors.bp_moderation_block_error),alert(t))})})}},bp.Nouveau.Moderation.start())}((bp,jQuery));