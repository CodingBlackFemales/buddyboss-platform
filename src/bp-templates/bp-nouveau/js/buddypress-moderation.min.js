window.bp=window.bp||{},function(d){"undefined"!=typeof BP_Nouveau&&(bp.Nouveau=bp.Nouveau||{},bp.Nouveau.Moderation={start:function(){this.setupGlobals(),this.addListeners(),this.unblockUser()},setupGlobals:function(){this.current_page=1},addListeners:function(){d(document).on("click",'.bp-nouveau [data-bp-list="moderation"] .pager .md-more-container.load-more',this.injectModerations.bind(this))},injectModerations:function(e){var t,o,a,n,r=bp.Nouveau.getStorage("bp-moderation"),i=r.scope||null,s=r.filter||null,u=d(e.currentTarget);u.hasClass("load-more")&&(t=+Number(this.current_page)+1,o=this,a="",e.preventDefault(),u.find("a").first().addClass("loading"),d("#buddypress .dir-search input[type=search]").length&&(a=d("#buddypress .dir-search input[type=search]").val()),n={object:"moderation",scope:i,filter:s,search_terms:a,page:t,method:"append",target:"#buddypress [data-bp-list] table#moderation-list tbody"},bp.Nouveau.objectRequest(n).done(function(e){!0===e.success&&(u.parent(".pager").remove(),o.current_page=t,jQuery(window).scroll())}))},unblockUser:function(){d(document).on("click",".moderation-item-actions .bp-unblock-user",function(o){if(!confirm(BP_Nouveau.moderation.unblock_user_msg))return!1;d(o.currentTarget).append(' <i class="bb-icon bb-icon-loader animate-spin"></i>');var a=d(this),e={action:"bp_moderation_unblock_user",id:a.attr("data-id"),type:a.attr("data-type"),nonce:a.attr("data-nonce")};d.post(ajaxurl,e,function(e){var t=d.parseJSON(e);!0===t.success?a.parent().closest(".moderation-item-wrp").fadeOut("normal",function(){a.parent().closest(".moderation-item-wrp").remove()}):(d(o.currentTarget).find(".bb-icon-loader").remove(),alert(t.message))})})}},bp.Nouveau.Moderation.start())}((bp,jQuery));