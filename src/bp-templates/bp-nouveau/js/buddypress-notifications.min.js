window.bp=window.bp||{},function(o){"undefined"!=typeof BP_Nouveau&&(bp.Nouveau=bp.Nouveau||{},bp.Nouveau.Notifications={start:function(){this.setupGlobals(),this.addListeners()},setupGlobals:function(){bp.Nouveau.setStorage("bp-notifications","extras","DESC")},addListeners:function(){o('#buddypress [data-bp-list="notifications"]').on("bp_ajax_request",this.prepareDocument),o('#buddypress [data-bp-list="notifications"]').on("click","[data-bp-notifications-order]",bp.Nouveau,this.sortNotifications),o('#buddypress [data-bp-list="notifications"]').on("change","#notification-select",this.enableBulkSubmit),o('#buddypress [data-bp-list="notifications"]').on("click","#select-all-notifications",this.selectAll),o('#buddypress [data-bp-list="notifications"]').on("click",".notification-check",this.checkSelectAllOrNot),o(window).on("unload",this.resetFilter)},prepareDocument:function(){"ASC"===bp.Nouveau.getStorage("bp-notifications").extras?(o('[data-bp-notifications-order="DESC"]').show(),o('[data-bp-notifications-order="ASC"]').hide()):(o('[data-bp-notifications-order="ASC"]').show(),o('[data-bp-notifications-order="DESC"]').hide()),o("#notification-bulk-manage").prop("disabled","disabled")},sortNotifications:function(t){var i=t.data.getStorage("bp-notifications"),e=i.scope||null,a=i.filter||null,i=(i.extra,"");t.preventDefault(),t=o(t.currentTarget).data("bp-notifications-order"),bp.Nouveau.setStorage("bp-notifications","extras",t),o('#buddypress [data-bp-search="notifications"] input[type=search]').length&&(i=o('#buddypress [data-bp-search="notifications"] input[type=search]').val()),bp.Nouveau.objectRequest({object:"notifications",scope:e,filter:a,search_terms:i,extras:t,page:1})},enableBulkSubmit:function(t){o("#notification-bulk-manage").prop("disabled",o(t.currentTarget).val().length<=0),!0===o('#buddypress [data-bp-list="notifications"]').find("#select-all-notifications").prop("checked")&&("unread"===o(t.currentTarget).val()||""===o(t.currentTarget).val()?o.each(o(".notification-check"),function(t,i){""===o(i).attr("data-readonly")?o(i).prop("checked",!0):o(i).prop("checked",!1)}):o.each(o(".notification-check"),function(t,i){o(i).prop("checked",!0)}))},selectAll:function(e){var t=o("#notification-select").val();"unread"===t||""===t?o.each(o(".notification-check"),function(t,i){""===o(i).attr("data-readonly")&&o(i).prop("checked",o(e.currentTarget).prop("checked"))}):o.each(o(".notification-check"),function(t,i){o(i).prop("checked",o(e.currentTarget).prop("checked"))})},checkSelectAllOrNot:function(t){var e=0;!0===o(this).attr("data-readonly")&&(o(this).blur(),t.preventDefault()),o.each(o(".notification-check"),function(t,i){0==o(i).prop("checked")&&(e=parseInt(e)+1)}),0==e?o('#buddypress [data-bp-list="notifications"]').find("#select-all-notifications").prop("checked",!0):o('#buddypress [data-bp-list="notifications"]').find("#select-all-notifications").prop("checked",!1)},resetFilter:function(){bp.Nouveau.setStorage("bp-notifications","filter",0)}},bp.Nouveau.Notifications.start())}((bp,jQuery));