window.wp=window.wp||{},window.bp=window.bp||{},function(g){"undefined"!=typeof BP_Nouveau&&(bp.Nouveau={start:function(){this.setupGlobals(),this.prepareDocument(),this.initObjects(),this.setHeartBeat(),this.addListeners(),this.switchGridList(),this.sendInvitesRevokeAccess(),this.sentInvitesFormValidate(),this.registerPopUp(),this.loginPopUp(),this.reportPopUp(),this.reportActions(),this.reportedPopup(),this.togglePassword(),this.enableSubmitOnLegalAgreement(),bp.Nouveau.lazyLoad(".lazy"),g(window).on("scroll resize",function(){bp.Nouveau.lazyLoad(".lazy")})},setupGlobals:function(){this.ajax_request=null,this.objects=g.map(BP_Nouveau.objects,function(e){return e}),this.objectNavParent=BP_Nouveau.object_nav_parent,this.heartbeat=wp.heartbeat||!1,this.querystring=this.getLinkParams()},prepareDocument:function(){var i;g("body").hasClass("no-js")&&g("body").removeClass("no-js").addClass("js"),BP_Nouveau.warnings&&"undefined"!=typeof console&&console.warn&&g.each(BP_Nouveau.warnings,function(e,t){console.warn(t)}),g(".buddypress_object_nav .widget-title").length&&(i=g(".buddypress_object_nav .widget-title").html(),g("body").find('*:contains("'+i+'")').each(function(e,t){g(t).hasClass("widget-title")||i!==g(t).html()||g(t).is("a")||g(t).remove()}))},getStorage:function(e,t){var i=(i=sessionStorage.getItem(e))?JSON.parse(i):{};return void 0!==t?i[t]||!1:i},setStorage:function(e,t,i){var a=this.getStorage(e);return void 0===i&&void 0!==a[t]?delete a[t]:a[t]=i,sessionStorage.setItem(e,JSON.stringify(a)),null!==sessionStorage.getItem(e)},getLinkParams:function(e,t){var i=e?-1!==e.indexOf("?")?"?"+e.split("?")[1]:"":document.location.search;if(!i)return null;var a=i.replace(/(^\?)/,"").split("&").map(function(e){return this[(e=e.split("="))[0]]=e[1],this}.bind({}))[0];return t?a[t]:a},urlDecode:function(e,t){var i=t||{amp:"&",lt:"<",gt:">",quot:'"',"#039":"'"};return decodeURIComponent(e.replace(/\+/g," ")).replace(/&([^;]+);/g,function(e,t){return i[t]||""})},ajax:function(e,t,i){this.ajax_request&&void 0===i&&this.ajax_request.abort();var a=g.extend({},bp.Nouveau.getStorage("bp-"+t),{nonce:BP_Nouveau.nonces[t]},e);return void 0!==BP_Nouveau.customizer_settings&&(a.customized=BP_Nouveau.customizer_settings),void 0!==BP_Nouveau.modbypass&&(a.modbypass=BP_Nouveau.modbypass),this.ajax_request=g.post(BP_Nouveau.ajaxurl,a,"json"),this.ajax_request},inject:function(e,t,i){g(e).length&&t&&("append"===(i=i||"reset")?g(e).append(t).find("li.activity-item").each(this.hideSingleUrl):"prepend"===i?g(e).prepend(t).find("li.activity-item").each(this.hideSingleUrl):g(e).html(t).find("li.activity-item").each(this.hideSingleUrl),"undefined"==typeof bp_mentions&&void 0===bp.mentions||(g(".bp-suggestions").bp_mentions(bp.mentions.users),g("#whats-new").on("inserted.atwho",function(){var e;window.getSelection&&document.createRange?(e=window.getSelection&&window.getSelection())&&0<e.rangeCount&&(window.activityCaretPosition=e.getRangeAt(0)):window.activityCaretPosition=document.selection.createRange()})))},hideSingleUrl:function(){var e=g(this).find(".activity-inner > p").removeAttr("br").removeAttr("a").text(),t="",i="",a="",o=0;if(0<=e.indexOf("http://")?(a=e.indexOf("http://"),o=1):0<=e.indexOf("https://")?(a=e.indexOf("https://"),o=1):0<=e.indexOf("www.")&&(a=e.indexOf("www"),o=1),1===o){for(var n=a;n<e.length&&(" "!==e[n]&&"\n"!==e[n]);n++)t+=e[n];""!==t&&(i=g.trim(e.replace(t,""))),0===g.trim(i).length&&0!==g(this).find("iframe").length&&""!==t&&g(this).find(".activity-inner > p:first").hide()}},objectRequest:function(a){var e,o=this;if((a=g.extend({object:"",scope:null,filter:null,target:"#buddypress [data-bp-list]",search_terms:"",page:1,extras:null,caller:null,template:null,method:"reset"},a)).object&&a.target)return"activity"==a.object&&"#buddypress [data-bp-list] ul.bp-list"==a.target&&(a.target="#buddypress [data-bp-list] ul.bp-list:not(#bb-media-model-container ul.bp-list)"),["members","activity","media","document"].includes(a.object)&&!g(this.objectNavParent+' [data-bp-scope="'+a.scope+'"]').length&&(a.scope="all"),a.search_terms&&(a.search_terms=a.search_terms.replace(/</g,"&lt;").replace(/>/g,"&gt;")),null!==a.scope&&this.setStorage("bp-"+a.object,"scope",a.scope),null!==a.filter&&this.setStorage("bp-"+a.object,"filter",a.filter),null!==a.extras&&this.setStorage("bp-"+a.object,"extras",a.extras),g(this.objectNavParent+" [data-bp-object]").each(function(){g(this).removeClass("selected loading")}),g(this.objectNavParent+' [data-bp-scope="'+a.scope+'"]').length?g(this.objectNavParent+' [data-bp-scope="'+a.scope+'"], #object-nav li.current').addClass("selected loading"):g(this.objectNavParent+" [data-bp-scope]:eq(0), #object-nav li.current").addClass("selected loading"),g('#buddypress [data-bp-filter="'+a.object+'"] option[value="'+a.filter+'"]').prop("selected",!0),"friends"===a.object||"group_members"===a.object?(a.template=a.object,a.object="members"):"group_requests"===a.object?(a.object="groups",a.template="group_requests"):"group_subgroups"===a.object?(a.object="groups",a.template="group_subgroups"):"notifications"===a.object&&(a.object="members",a.template="member_notifications"),e=g.extend({action:a.object+"_filter"},a),this.ajax(e,a.object).done(function(e){if(!1!==e.success&&!_.isUndefined(e.data)){if(!g("body.group-members.members.buddypress").length||_.isUndefined(e.data)||_.isUndefined(e.data.count)||g("body.group-members.members.buddypress ul li#members-groups-li").find("span").text(e.data.count),g(o.objectNavParent+' [data-bp-scope="'+a.scope+'"]').removeClass("loading"),g(o.objectNavParent+' [data-bp-scope="'+a.scope+'"]').find("span").text(""),_.isUndefined(e.data)||_.isUndefined(e.data.count)||g(o.objectNavParent+' [data-bp-scope="'+a.scope+'"]').find("span").text(e.data.count),!_.isUndefined(e.data)&&!_.isUndefined(e.data.scopes))for(var t in e.data.scopes)g(o.objectNavParent+' [data-bp-scope="'+t+'"]').find("span").text(e.data.scopes[t]);var i;"reset"!==a.method?(o.inject(a.target,e.data.contents,a.method),g(a.target).trigger("bp_ajax_"+a.method,g.extend(a,{response:e.data}))):"pag-bottom"===a.caller?(i=null,i=g("#subnav").length?g("#subnav").parent():g(a.target),g("html,body").animate({scrollTop:i.offset().top},"slow",function(){g(a.target).fadeOut(100,function(){o.inject(this,e.data.contents,a.method),g(this).fadeIn(100),g(a.target).trigger("bp_ajax_request",g.extend(a,{response:e.data})),bp.Nouveau.lazyLoad&&setTimeout(function(){bp.Nouveau.lazyLoad(".lazy")},1e3)})})):g(a.target).fadeOut(100,function(){o.inject(this,e.data.contents,a.method),g(this).fadeIn(100),g(a.target).trigger("bp_ajax_request",g.extend(a,{response:e.data})),bp.Nouveau.lazyLoad&&setTimeout(function(){bp.Nouveau.lazyLoad(".lazy")},1e3)}),setTimeout(function(){o.reportPopUp(),o.reportedPopup()},1e3)}})},initObjects:function(){var a=this,o={},n={},r="all",s="",d=null,l=null;g.each(this.objects,function(e,t){var i;g('#buddypress [data-bp-list="'+t+'"][data-ajax="false"]').length||(o=a.getStorage("bp-"+t),void 0!==(i=window.location.hash.substr(1))&&"following"==i?r=i:void 0!==o.scope&&(r=o.scope),void 0!==o.extras&&"notifications"!==t&&(d=o.extras),g('#buddypress [data-bp-filter="'+t+'"]').length&&(void 0!==o.filter?(l=o.filter,g('#buddypress [data-bp-filter="'+t+'"] option[value="'+l+'"]').prop("selected",!0)):"-1"!==g('#buddypress [data-bp-filter="'+t+'"]').val()&&"0"!==g('#buddypress [data-bp-filter="'+t+'"]').val()&&(l=g('#buddypress [data-bp-filter="'+t+'"]').val())),g(this.objectNavParent+' [data-bp-object="'+t+'"]').length&&(g(this.objectNavParent+' [data-bp-object="'+t+'"]').each(function(){g(this).removeClass("selected")}),g(this.objectNavParent+' [data-bp-scope="'+t+'"], #object-nav li.current').addClass("selected")),null!==a.querystring&&(void 0!==a.querystring[t+"_search"]?s=a.querystring[t+"_search"]:void 0!==a.querystring.s&&(s=a.querystring.s),s&&g('#buddypress [data-bp-search="'+t+'"] input[type=search]').val(s)),g('#buddypress [data-bp-list="'+t+'"]').length&&(n={object:t,scope:r,filter:l,search_terms:s,extras:d},g('#buddypress [data-bp-member-type-filter="'+t+'"]').length?n.member_type_id=g('#buddypress [data-bp-member-type-filter="'+t+'"]').val():g('#buddypress [data-bp-group-type-filter="'+t+'"]').length&&(n.group_type=g('#buddypress [data-bp-group-type-filter="'+t+'"]').val()),a.objectRequest(n)))})},setHeartBeat:function(){void 0!==BP_Nouveau.pulse&&this.heartbeat&&(this.heartbeat.interval(Number(BP_Nouveau.pulse)),g.fn.extend({"heartbeat-send":function(){return this.bind("heartbeat-send")}}),g.fn.extend({"heartbeat-tick":function(){return this.bind("heartbeat-tick")}}))},addListeners:function(){g("[data-bp-disable-input]").on("change",this.toggleDisabledInput),g(this.objectNavParent+" .bp-navs").on("click","a",this,this.scopeQuery),g(document).on("change","#buddypress [data-bp-filter]",this,this.filterQuery),g(document).on("change","#buddypress [data-bp-group-type-filter]",this,this.typeGroupFilterQuery),g(document).on("change","#buddypress [data-bp-member-type-filter]",this,this.typeMemberFilterQuery),g("#buddypress [data-bp-search]").on("submit","form",this,this.searchQuery),g("#buddypress [data-bp-search] form").on("search","input[type=search]",this.resetSearch),g("#buddypress [data-bp-list], #buddypress #item-header, #buddypress.bp-shortcode-wrap .dir-list").on("click","[data-bp-btn-action]",this,this.buttonAction),g("#buddypress [data-bp-list], #buddypress #item-header, #buddypress.bp-shortcode-wrap .dir-list").on("blur","[data-bp-btn-action]",this,this.buttonRevert),g(document).on("click","#buddypress table.invite-settings .field-actions .field-actions-remove, #buddypress table.invite-settings .field-actions-add",this,this.addRemoveInvite),g(document).on("keyup",this,this.keyUp),g("[data-bp-close]").on("click",this,this.closeNotice),g("#buddypress [data-bp-list]").on("click","[data-bp-pagination] a",this,this.paginateAction),g(document).on("click",this.closePickersOnClick),document.addEventListener("keydown",this.closePickersOnEsc),g(document).on("click","#item-header a.position-change-cover-image, .header-cover-reposition-wrap a.cover-image-save, .header-cover-reposition-wrap a.cover-image-cancel",this.coverPhotoCropper),g(document).on("click","#cover-photo-alert .bb-model-close-button",this.coverPhotoCropperAlert),g(document).on("click",this.toggleMoreOption.bind(this)),g(document).on("heartbeat-send",this.bbHeartbeatSend.bind(this)),g(document).on("heartbeat-tick",this.bbHeartbeatTick.bind(this)),bp.Nouveau.notificationRemovedAction(),bp.Nouveau.removeAllNotification(),bp.Nouveau.setTitle(),g(document).on("click",".more-following .count-more",this.bbWidgetMoreFollowing)},bbHeartbeatSend:function(e,t){t.onScreenNotifications=!0,g("#buddypress").trigger("bb_heartbeat_send",t)},bbHeartbeatTick:function(e,t){bp.Nouveau.bbInjectOnScreenNotifications(e,t)},bbInjectOnScreenNotifications:function(e,t){var i,o,a,n,r,s,d;"1"==g(".bb-onscreen-notification").data("enable")&&(void 0===t.on_screen_notifications&&""===t.on_screen_notifications||(i=g(".bb-onscreen-notification"),a=(o=i.find(".notification-list")).data("removed-items"),n=o.data("animated-items"),r=[],s=g(g.parseHTML("<ul>"+t.on_screen_notifications+"</ul>")),g.each(a,function(e,t){var i=s.find("[data-notification-id="+t+"]");i.length&&i.closest(".read-item").remove()}),(d=s.find(".read-item")).each(function(e,t){var i=g(t).find(".actions .action-close").data("notification-id");"-1"==g.inArray(i,n)?(g(t).addClass("pull-animation"),n.push(i),r.push(i)):g(t).removeClass("pull-animation")}),r.length&&d.each(function(e,t){var i,a=g(t).find(".actions .action-close").data("notification-id");"-1"==g.inArray(a,r)&&(g(t).removeClass("recent-item"),(i=o.data("border-items")).push(a),o.attr("data-border-items",JSON.stringify(i)))}),o.attr("data-animated-items",JSON.stringify(n)),d.length&&(i.removeClass("close-all-items"),d.eq(2).nextAll().addClass("bb-more-item"),3<d.length?o.addClass("bb-more-than-3"):o.removeClass("bb-more-than-3"),i.show(),o.empty().html(d),bp.Nouveau.visibilityOnScreenClearButton(),bp.Nouveau.notificationBorder(),bp.Nouveau.notificationAutoHide(),bp.Nouveau.browserTabFlashNotification(),bp.Nouveau.browserTabCountNotification())))},notificationBorder:function(){var e=g(".bb-onscreen-notification").find(".notification-list"),a=e.data("border-items");e.find(".read-item").each(function(e,t){var i=g(t).find(".actions .action-close").data("notification-id");"-1"==g.inArray(i,a)&&g(t).addClass("recent-item")}),e.attr("data-border-items",JSON.stringify(a))},browserTabCountNotification:function(){var e=g(".bb-onscreen-notification"),t=e.find(".notification-list").find(".read-item"),i=g("html").find("title"),a=e.data("title-tag");0<t.length?i.text("("+t.length+") "+a):i.text(a)},browserTabFlashNotification:function(){1==g(".bb-onscreen-notification").data("broser-tab")&&(window.bbFlashNotification&&clearInterval(window.bbFlashNotification),document.hidden&&(window.bbFlashNotification=setInterval(bp.Nouveau.flashTitle,2e3)))},flashTitle:function(){var e,t=g(".bb-onscreen-notification"),i=t.find(".notification-list"),a=i.find(".read-item"),o=a.first().find(".notification-content .bb-full-link a").text(),n=g("html").find("title"),r=t.attr("data-title-tag"),s=t.attr("data-flash-status"),d=i.data("flash-items");if(document.hidden||(a.each(function(e,t){var i=g(t).find(".actions .action-close").attr("data-notification-id");"-1"==g.inArray(i,d)&&d.push(i)}),i.attr("data-flash-items",JSON.stringify(d))),!document.hidden&&window.bbFlashNotification||a.length<=0)return clearInterval(window.bbFlashNotification),t.attr("data-flash-status","default_title"),void n.text(r);"default_title"===s?(n.text("("+a.length+") "+r),e=a.first().find(".actions .action-close").attr("data-notification-id"),"-1"==g.inArray(e,d)&&t.attr("data-flash-status","notification")):"notification"===s&&(n.text(o),t.attr("data-flash-status","default_title"))},notificationAutoHide:function(){var a,e=g(".bb-onscreen-notification"),o=e.find(".notification-list"),n=o.data("auto-removed-items"),t=e.data("visibility");"never"!==t&&((a=parseInt(t))<=0||(o.find(".read-item").each(function(e,t){var i=g(t).find(".actions .action-close").data("notification-id");"-1"==g.inArray(i,n)&&(n.push(i),setTimeout(function(){o.find(".actions .action-close[data-notification-id="+i+"]").length&&o.find(".actions .action-close[data-notification-id="+i+"]").trigger("click")},1e3*a))}),o.attr("data-auto-removed-items",JSON.stringify(n))))},notificationRemovedAction:function(){g(".bb-onscreen-notification .notification-list").on("click",".action-close",function(e){e.preventDefault(),bp.Nouveau.removeOnScreenNotification(this)})},removeOnScreenNotification:function(e){var t=g(e).closest(".notification-list"),i=g(e).closest(".read-item"),a=g(e).data("notification-id"),o=t.data("removed-items");i.addClass("close-item"),setTimeout(function(){o.push(a),t.attr("data-removed-items",JSON.stringify(o)),i.remove(),bp.Nouveau.browserTabCountNotification(),bp.Nouveau.visibilityOnScreenClearButton();var e=t.find(".read-item");e.length?(e.length<4&&t.removeClass("bb-more-than-3"),e.slice(0,3).removeClass("bb-more-item")):t.closest(".bb-onscreen-notification").hide()},500)},removeAllNotification:function(){g(".bb-onscreen-notification .bb-remove-all-notification").on("click",".action-close",function(e){e.preventDefault();var t=g(this).closest(".bb-onscreen-notification").find(".notification-list"),i=t.find(".read-item"),a=t.data("removed-items");i.each(function(e,t){var i=g(t).find(".actions .action-close").data("notification-id");i&&a.push(i)}),t.attr("data-removed-items",JSON.stringify(a)),i.remove(),bp.Nouveau.browserTabCountNotification(),bp.Nouveau.visibilityOnScreenClearButton(),t.closest(".bb-onscreen-notification").addClass("close-all-items"),g(".bb-onscreen-notification").fadeOut(200),t.removeClass("bb-more-than-3")})},setTitle:function(){var e=g("html").find("title").text();g(".bb-onscreen-notification").attr("data-title-tag",e)},visibilityOnScreenClearButton:function(){var e=g(".bb-onscreen-notification");1<e.find(".notification-list").find(".read-item").length?(e.removeClass("single-notification"),e.addClass("active-button"),e.find(".bb-remove-all-notification .action-close").fadeIn(600)):(e.addClass("single-notification"),e.removeClass("active-button"),e.find(".bb-remove-all-notification .action-close").fadeOut(200))},switchGridList:function(){var t=this,i=!1,a=g(".grid-filters").data("object");"group_members"===a&&(i=!0),"friends"===a?a="members":"group_requests"===a?a="groups":"notifications"===a&&(a="members");var e=t.getStorage("bp-"+a),o={};void 0!==e.extras&&void 0!==(o=e.extras).layout&&(g(".grid-filters .layout-view").removeClass("active"),"list"===o.layout?g(".grid-filters .layout-list-view").addClass("active"):g(".grid-filters .layout-grid-view").addClass("active")),g(document).on("click",".grid-filters .layout-view",function(e){e.preventDefault(),g(this).hasClass("layout-list-view")?(g(".layout-grid-view").removeClass("active"),g(this).addClass("active"),g(".bp-list").removeClass("grid"),o.layout="list"):(g(".layout-list-view").removeClass("active"),g(this).addClass("active"),g(".bp-list").addClass("grid"),o.layout="grid"),i?t.setStorage("bp-group_members","extras",o):t.setStorage("bp-"+a,"extras",o)})},sentInvitesFormValidate:function(){g("body.send-invites #send-invite-form #member-invites-table").length&&g("body.send-invites #send-invite-form").submit(function(){var e="",t="",i="",a=[],o=[],n="",r="",s="",d="",l=/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/,c=g("body.send-invites #send-invite-form #error-message-empty-name-field").val(),p=g("body.send-invites #send-invite-form #error-message-invalid-email-address-field").val(),u=g("body.send-invites #send-invite-form #error-message-required-field").val(),b=g("body.send-invites #send-invite-form #error-message-empty-subject-field").length,m=g("body.send-invites #send-invite-form #error-message-empty-body-field").length;if(1===b&&(n=g("body.send-invites #send-invite-form #bp-member-invites-custom-subject").val(),r=g("body.send-invites #send-invite-form #error-message-empty-subject-field").val()),1===m&&(s=tinyMCE.get("bp-member-invites-custom-content").getContent(),d=g("body.send-invites #send-invite-form #error-message-empty-body-field").val()),1===b&&1===m){var f=g("body.send-invites #send-invite-form #error-message-empty-subject-body-field").val();if(""===n&&""===s){if(!confirm(f))return!1}else if(""!==n&&""===s){if(!confirm(d))return!1}else if(""===n&&""!==s&&!confirm(r))return!1}else if(0===b&&1===m){if(""===s&&!confirm(d))return!1}else if(1===b&&0===m&&""===n&&!confirm(r))return!1;if(g("body.send-invites #send-invite-form #member-invites-table > tbody  > tr").each(function(){g(this).find('input[type="text"]').removeAttr("style"),g(this).find('input[type="email"]').removeAttr("style")}),g("body.send-invites #send-invite-form #member-invites-table > tbody  > tr").each(function(){e=g.trim(g(this).find('input[type="text"]').val()),t=g(this).find("input").attr("id"),i=g.trim(g(this).find('input[type="email"]').val()),""===e&&""===i?0:""!==e&&""===i?(t=g(this).find('input[type="email"]').attr("id"),a.push(t)):""===e&&""!==i?(t=g(this).find('input[type="text"]').attr("id"),a.push(t)):l.test(i)?o.push(1):(t=g(this).find('input[type="email"]').attr("id"),a.push(t))}),g(".span_error").remove(),0!==a.length)return a.forEach(function(e){g("#"+e).attr("style","border:1px solid #ef3e46"),-1!==e.indexOf("email_")?g("#"+e).after('<span class="span_error" style="color:#ef3e46">'+p+"</span>"):g("#"+e).after('<span class="span_error" style="color:#ef3e46">'+c+"</span>")}),g("html, body").animate({scrollTop:g("#item-body").offset().top},2e3),alert(u),!1;if(g("#email_0_email_error").length&&g("#email_0_email_error").remove(),0===o.length){var h=g("#invitee_0_title").val(),v=g("#email_0_email").val();return""===h&&""===v?(g("#invitee_0_title").attr("style","border:1px solid #ef3e46"),g("#invitee_0_title").focus(),g("#email_0_email").attr("style","border:1px solid #ef3e46"),!1):(""!==h&&""===v?(g("#email_0_email").attr("style","border:1px solid #ef3e46"),g("#email_0_email").focus()):(l.test(v)||(g("#email_0_email").attr("style","border:1px solid #ef3e46"),g("#email_0_email").focus(),g("#email_0_email_error").remove(),g("#email_0_email").after('<span id="email_0_email_error" style="color:#ef3e46">'+p+"</span>")),alert(u)),!1)}})},sendInvitesRevokeAccess:function(){g("body.sent-invites #member-invites-table").length&&g("body.sent-invites #member-invites-table tr td span a.revoked-access").click(function(e){e.preventDefault();var t=g(this).attr("data-name"),i=g(this).attr("id"),a=g(this).attr("data-revoke-access");if(!confirm(t))return!1;g.ajax({url:a,type:"post",data:{item_id:i},success:function(){window.location.reload(!0)}})})},toggleDisabledInput:function(){var e=g(this).attr("data-bp-disable-input");g(e).prop("disabled",!0)&&!g(this).hasClass("enabled")?(g(this).addClass("enabled").removeClass("disabled"),g(e).prop("disabled",!1)):g(e).prop("disabled",!1)&&g(this).hasClass("enabled")&&(g(this).removeClass("enabled").addClass("disabled"),g(e).attr("disabled","disabled"))},keyUp:function(e){var t=e.data;27===e.keyCode&&t.buttonRevertAll()},scopeQuery:function(e){var t,i,a,o=e.data,n=g(e.currentTarget).parent(),r="",s=null,d={};if(n.hasClass("no-ajax")||g(e.currentTarget).hasClass("no-ajax")||!n.attr("data-bp-scope"))return e;if(t=n.data("bp-scope"),i=n.data("bp-object"),!t||!i)return e;e.preventDefault();var l=o.getStorage("bp-"+i);void 0!==l.extras&&"notifications"!==i&&(s=l.extras),a=g("#buddypress").find('[data-bp-filter="'+i+'"]').first().val(),g('#buddypress [data-bp-search="'+i+'"] input[type=search]').length&&(r=g('#buddypress [data-bp-search="'+i+'"] input[type=search]').val()),n.hasClass("dynamic")&&n.find("a span").html(""),d={object:i,scope:t,filter:a,search_terms:r,page:1,extras:s},g('#buddypress [data-bp-member-type-filter="'+i+'"]').length?d.member_type_id=g('#buddypress [data-bp-member-type-filter="'+i+'"]').val():g('#buddypress [data-bp-group-type-filter="'+i+'"]').length&&(d.group_type=g('#buddypress [data-bp-group-type-filter="'+i+'"]').val()),o.objectRequest(d)},filterQuery:function(e){var t=e.data,i=g(e.target).data("bp-filter"),a="all",o=g(e.target).val(),n="",r=!1;if(!i)return e;g(t.objectNavParent+" [data-bp-object].selected").length&&(a=g(t.objectNavParent+" [data-bp-object].selected").data("bp-scope")),g('#buddypress [data-bp-search="'+i+'"] input[type=search]').length&&(n=g('#buddypress [data-bp-search="'+i+'"] input[type=search]').val()),"friends"===i&&(i="members");var s=t.getStorage("bp-"+i);void 0!==s.extras&&"notifications"!==i&&(r=s.extras),"members"===i?t.objectRequest({object:i,scope:a,filter:o,search_terms:n,page:1,extras:r,template:null,member_type_id:g('#buddypress [data-bp-member-type-filter="'+i+'"]').val()}):"groups"===i?t.objectRequest({object:i,scope:a,filter:o,search_terms:n,page:1,extras:r,template:null,group_type:g('#buddypress [data-bp-group-type-filter="'+i+'"]').val()}):t.objectRequest({object:i,scope:a,filter:o,search_terms:n,page:1,extras:r,template:null})},typeGroupFilterQuery:function(e){var t,i=e.data,a=g(e.target).data("bp-group-type-filter"),o="all",n=null,r=null,s="";if(!a)return e;void 0!==(t=i.getStorage("bp-"+a)).extras&&"notifications"!==a&&(r=t.extras),g('#buddypress [data-bp-filter="'+a+'"]').length&&(void 0!==t.filter?(n=t.filter,g('#buddypress [data-bp-filter="'+a+'"] option[value="'+n+'"]').prop("selected",!0)):"-1"!==g('#buddypress [data-bp-filter="'+a+'"]').val()&&"0"!==g('#buddypress [data-bp-filter="'+a+'"]').val()&&(n=g('#buddypress [data-bp-filter="'+a+'"]').val())),g(i.objectNavParent+" [data-bp-object].selected").length&&(o=g(i.objectNavParent+" [data-bp-object].selected").data("bp-scope")),g('#buddypress [data-bp-search="'+a+'"] input[type=search]').length&&(s=g('#buddypress [data-bp-search="'+a+'"] input[type=search]').val()),i.objectRequest({object:a,scope:o,filter:n,search_terms:s,page:1,template:null,extras:r,group_type:g('#buddypress [data-bp-group-type-filter="'+a+'"]').val()})},typeMemberFilterQuery:function(e){var t,i=e.data,a=g(e.target).data("bp-member-type-filter"),o="all",n=null,r=null,s="";if(!a)return e;"friends"===a&&(a="members"),void 0!==(t=i.getStorage("bp-"+a)).extras&&"notifications"!==a&&(r=t.extras),g('#buddypress [data-bp-filter="'+a+'"]').length&&(void 0!==t.filter?(n=t.filter,g('#buddypress [data-bp-filter="'+a+'"] option[value="'+n+'"]').prop("selected",!0)):"-1"!==g('#buddypress [data-bp-filter="'+a+'"]').val()&&"0"!==g('#buddypress [data-bp-filter="'+a+'"]').val()&&(n=g('#buddypress [data-bp-filter="'+a+'"]').val())),g(i.objectNavParent+" [data-bp-object].selected").length&&(o=g(i.objectNavParent+" [data-bp-object].selected").data("bp-scope")),g('#buddypress [data-bp-search="'+a+'"] input[type=search]').length&&(s=g('#buddypress [data-bp-search="'+a+'"] input[type=search]').val()),i.objectRequest({object:a,scope:o,filter:n,search_terms:s,page:1,template:null,extras:r,member_type_id:g('#buddypress [data-bp-member-type-filter="'+a+'"]').val()})},searchQuery:function(e){var t,i,a,o=e.data,n="all",r=!1;if(g(e.delegateTarget).hasClass("no-ajax")||void 0===g(e.delegateTarget).data("bp-search"))return e;e.preventDefault(),t=g(e.delegateTarget).data("bp-search"),i=g("#buddypress").find('[data-bp-filter="'+t+'"]').first().val(),a=g(e.delegateTarget).find("input[type=search]").first().val(),g(o.objectNavParent+" [data-bp-object]").length&&(n=g(o.objectNavParent+' [data-bp-object="'+t+'"].selected').data("bp-scope"));var s=o.getStorage("bp-"+t);void 0!==s.extras&&"notifications"!==t&&(r=s.extras),o.objectRequest({object:t,scope:n,filter:i,search_terms:a,page:1,extras:r,template:null})},showSearchSubmit:function(e){g(e.delegateTarget).find("[type=submit]").addClass("bp-show"),g("[type=submit]").hasClass("bp-hide")&&g("[type=submit]").removeClass("bp-hide")},resetSearch:function(e){g(e.target).val()?g(e.delegateTarget).find("[type=submit]").show():g(e.delegateTarget).submit()},buttonAction:function(e){var o=e.data,n=g(e.currentTarget),r=n.data("bp-btn-action"),t=n.data("bp-nonce"),s=n.closest("[data-bp-item-id]"),i=s.data("bp-item-id"),d=n.closest(".list-wrap"),l=s.data("bp-item-component"),a="";if(!r||!i||!l)return e;if(e.preventDefault(),n.hasClass("bp-toggle-action-button"))return g(document.body).hasClass("buddyboss-theme")&&void 0!==n.data("balloon")?n.attr("data-balloon",n.data("title")):n.text(n.data("title")),n.removeClass("bp-toggle-action-button"),n.addClass("bp-toggle-action-button-clicked"),!1;if(void 0!==n.data("only-admin"))return void 0!==BP_Nouveau.only_admin_notice&&window.alert(BP_Nouveau.only_admin_notice),!1;if(void 0!==BP_Nouveau[r+"_confirm"]&&!1===window.confirm(BP_Nouveau[r+"_confirm"])||n.hasClass("pending"))return!1;a=t?o.getLinkParams(t,"_wpnonce"):o.getLinkParams(n.prop("href"),"_wpnonce");var c={is_friend:"remove_friend",not_friends:"add_friend",pending:"withdraw_friendship",accept_friendship:"accept_friendship",reject_friendship:"reject_friendship"};"members"===l&&void 0!==c[r]&&(r=c[r],l="friends");var p={not_following:"follow",following:"unfollow"};"members"===l&&void 0!==p[r]&&(r=p[r],l="follow"),n.addClass("pending loading"),o.ajax({action:l+"_"+r,item_id:i,_wpnonce:a},l,!0).done(function(e){if(!1===e.success)d.prepend(e.data.feedback),n.removeClass("pending loading"),s.find(".bp-feedback").length?(s.find(".bp-feedback").show(),s.find(".bp-feedback").fadeOut(6e3)):"groups"===l&&"join_group"===r&&(s.append(e.data.feedback),s.find(".bp-feedback").fadeOut(6e3));else{if("groups"===l&&void 0!==e.data.is_group&&e.data.is_group)return void 0!==e.data.group_url&&e.data.group_url?window.location=e.data.group_url:window.location.reload();var t,i,a;if(g("#friends-personal-li").length&&(t=g("#friends-personal-li a span"),i=g("#friends-personal-li a"),(void 0!==e.data.is_user&&e.data.is_user&&void 0!==e.data.friend_count||void 0!==e.data.friend_count)&&(0<e.data.friend_count?t.length?g(t).html(e.data.friend_count):g(i).append('<span class="count">'+e.data.friend_count+"</span>"):g(t).hide())),void 0!==e.data.is_user&&e.data.is_user)return n.parent().html(e.data.feedback),void s.fadeOut(1500);if(void 0!==e.data.is_user&&!e.data.is_user&&void 0!==e.data.group_url&&e.data.group_url)return window.location=e.data.group_url;g(o.objectNavParent+' [data-bp-scope="personal"]').length&&(a=Number(g(o.objectNavParent+' [data-bp-scope="personal"] span').html())||0,-1!==g.inArray(r,["leave_group","remove_friend"])?--a:-1!==g.inArray(r,["join_group"])&&(a+=1),a<0&&(a=0),g(o.objectNavParent+' [data-bp-scope="personal"] span').html(a)),n.parent().replaceWith(e.data.contents)}})},buttonRevert:function(e){var t=g(e.currentTarget);t.hasClass("bp-toggle-action-button-clicked")&&!t.hasClass("loading")&&(g(document.body).hasClass("buddyboss-theme")&&void 0!==t.data("balloon")?t.attr("data-balloon",t.data("title-displayed")):t.text(t.data("title-displayed")),t.removeClass("bp-toggle-action-button-clicked"),t.addClass("bp-toggle-action-button"))},buttonRevertAll:function(){g.each(g("#buddypress [data-bp-btn-action]"),function(){g(this).hasClass("bp-toggle-action-button-clicked")&&!g(this).hasClass("loading")&&(g(document.body).hasClass("buddyboss-theme")&&void 0!==g(this).data("balloon")?g(this).attr("data-balloon",g(this).data("title-displayed")):g(this).text(g(this).data("title-displayed")),g(this).removeClass("bp-toggle-action-button-clicked"),g(this).addClass("bp-toggle-action-button"),g(this).trigger("blur"))})},addRemoveInvite:function(e){var t=e.currentTarget,i=g(t).closest("tbody");if(g(t).hasClass("field-actions-remove")){if(!(1<g(this).closest("tr").siblings().length))return;g(this).closest("tr").remove(),i.find(".field-actions-add.disabled").removeClass("disabled")}else if(g(t).hasClass("field-actions-add")){if(g(t).hasClass("disabled"))return;var a=g(this).closest("tr").prev("tr").html();g("<tr>"+a+"</tr>").insertBefore(g(this).closest("tr")),20<i.find("tr").length&&g(t).addClass("disabled")}var o=i.find("tr:not(:last-child)");g.each(o,function(e){g(this).find(".field-name > input").attr("name","invitee["+e+"][]"),g(this).find(".field-name > input").attr("id","invitee_"+e+"_title"),g(this).find(".field-email > input").attr("name","email["+e+"][]"),g(this).find(".field-email > input").attr("id","email_"+e+"_email"),g(this).find(".field-member-type > select").attr("name","member-type["+e+"][]"),g(this).find(".field-member-type > select").attr("id","member_type_"+e+"_member_type")})},closeNotice:function(e){var t=g(e.currentTarget);e.preventDefault(),"clear"===t.data("bp-close")&&(void 0!==g.cookie("bp-message")&&g.removeCookie("bp-message"),void 0!==g.cookie("bp-message-type")&&g.removeCookie("bp-message-type")),t.closest(".bp-feedback").hasClass("bp-sitewide-notice")&&bp.Nouveau.ajax({action:"messages_dismiss_sitewide_notice"},"messages"),t.closest(".bp-feedback").remove()},paginateAction:function(e){var t,i,a=e.data,o=g(e.currentTarget),n=null,r=null,s=null,d=null,l=o.closest("[data-bp-pagination]").data("bp-pagination")||null;if(null===l)return e;e.preventDefault(),null!==(t=g(e.delegateTarget).data("bp-list")||null)&&(void 0!==(i=a.getStorage("bp-"+t)).scope&&(n=i.scope),void 0!==i.filter&&(r=i.filter),void 0!==i.extras&&(d=i.extras)),null!==t&&(void 0!==(i=a.getStorage("bp-"+t)).scope&&(n=i.scope),void 0!==i.filter&&(r=i.filter),void 0!==i.extras&&(d=i.extras)),g('#buddypress [data-bp-search="'+t+'"] input[type=search]').length&&(s=g('#buddypress [data-bp-search="'+t+'"] input[type=search]').val());var c={object:t,scope:n,filter:r,search_terms:s,extras:d,caller:o.closest("[data-bp-pagination]").hasClass("bottom")?"pag-bottom":"",page:a.getLinkParams(o.prop("href"),l)||1};g("#buddypress [data-bp-group-type-filter]").length&&(c.group_type=g("#buddypress [data-bp-group-type-filter]").val()),g("#buddypress [data-bp-member-type-filter]").length&&(c.member_type_id=g("#buddypress [data-bp-member-type-filter]").val()),a.objectRequest(c)},enableSubmitOnLegalAgreement:function(){g("body #buddypress #register-page #signup-form #legal_agreement").length&&(g("body #buddypress #register-page #signup-form .submit #signup_submit").prop("disabled",!0),g(document).on("change","body #buddypress #register-page #signup-form #legal_agreement",function(){g(this).prop("checked")?g("body #buddypress #register-page #signup-form .submit #signup_submit").prop("disabled",!1):g("body #buddypress #register-page #signup-form .submit #signup_submit").prop("disabled",!0)}))},registerPopUp:function(){g(".popup-modal-register").length&&g(".popup-modal-register").magnificPopup({type:"inline",preloader:!1,fixedBgPos:!0,fixedContentPos:!0}),g(".popup-modal-dismiss").length&&g(".popup-modal-dismiss").click(function(e){e.preventDefault(),g.magnificPopup.close()})},loginPopUp:function(){g(".popup-modal-login").length&&g(".popup-modal-login").magnificPopup({type:"inline",preloader:!1,fixedBgPos:!0,fixedContentPos:!0}),g(".popup-modal-dismiss").length&&g(".popup-modal-dismiss").click(function(e){e.preventDefault(),g.magnificPopup.close()})},reportPopUp:function(){var o;0<g(".report-content, .block-member").length&&(o=this,g(".report-content, .block-member").magnificPopup({type:"inline",midClick:!0,callbacks:{open:function(){var e=this.currItem.el.data("bp-content-id"),t=this.currItem.el.data("bp-content-type"),i=this.currItem.el.data("bp-nonce"),a=this.currItem.el.attr("reported_type");void 0!==a&&g("#content-report").find(".bp-reported-type").text(a),void 0!==e&&void 0!==t&&void 0!==i&&(g(document).find(".bp-report-form-err").empty(),o.setFormValues({contentId:e,contentType:t,nonce:i}))}}}))},reportActions:function(){var a=this;g(document).on("click",".bb-cancel-report-content",function(e){e.preventDefault(),g("form#bb-report-content").trigger("reset"),g(this).closest(".moderation-popup").find(".bp-other-report-cat").closest(".form-item").addClass("bp-hide"),g(this).closest(".moderation-popup").find(".mfp-close").trigger("click")}),g(document).on("click","input[type=radio][name=report_category]",function(){"other"===this.value?(g(this).closest(".moderation-popup").find(".bp-other-report-cat").closest(".form-item").removeClass("bp-hide"),g(this).closest(".moderation-popup").find(".bp-other-report-cat").prop("required",!0)):(g(this).closest(".moderation-popup").find(".bp-other-report-cat").closest(".form-item").addClass("bp-hide"),g(this).closest(".moderation-popup").find(".bp-other-report-cat").prop("required",!1))}),g("#bb-report-content").submit(function(t){g("#bb-report-content").find(".report-submit").addClass("loading"),g(".bp-report-form-err").empty();var i={action:"bp_moderation_content_report"};g.each(g(this).serializeArray(),function(e,t){i[t.name]=t.value}),g.post(BP_Nouveau.ajaxurl,i,function(e){e.success?(a.resetReportPopup(),a.changeReportButtonStatus(e.data),g("#bb-report-content").find(".report-submit").removeClass("loading"),g(".mfp-close").trigger("click")):(g("#bb-report-content").find(".report-submit").removeClass("loading"),a.handleReportError(e.data.message.errors,t.currentTarget))})}),g("#bb-block-member").submit(function(t){g("#bb-block-member").find(".report-submit").addClass("loading"),g(".bp-report-form-err").empty();var i={action:"bp_moderation_block_member"};g.each(g(this).serializeArray(),function(e,t){i[t.name]=t.value}),g.post(BP_Nouveau.ajaxurl,i,function(e){e.success?(a.resetReportPopup(),a.changeReportButtonStatus(e.data),g("#bb-block-member").find(".report-submit").removeClass("loading"),g(".mfp-close").trigger("click"),e.data.redirect&&(location.href=e.data.redirect)):(g("#bb-block-member").find(".report-submit").removeClass("loading"),a.handleReportError(e.data.message.errors,t.currentTarget))})})},resetReportPopup:function(){g("form#bb-report-content").trigger("reset");var e=g(".mfp-content");e.find(".bp-content-id").val(""),e.find(".bp-content-type").val(""),e.find(".bp-nonce").val(""),e.find(".bp-report-form-err").empty()},changeReportButtonStatus:function(e){var t=this;g("[data-bp-content-id="+e.button.button_attr.item_id+"][data-bp-content-type="+e.button.button_attr.item_type+"]").each(function(){g(this).removeAttr("data-bp-content-id"),g(this).removeAttr("data-bp-content-type"),g(this).removeAttr("data-bp-nonce"),g(this).html(e.button.link_text),g(this).attr("class",e.button.button_attr.class),g(this).attr("reported_type",e.button.button_attr.reported_type),g(this).attr("href",e.button.button_attr.href),setTimeout(function(){t.reportedPopup()},1)})},reportedPopup:function(){0<g(".reported-content").length&&g(".reported-content").magnificPopup({type:"inline",midClick:!0,callbacks:{open:function(){var e=this.currItem.el.attr("reported_type");void 0!==e&&g("#reported-content").find(".bp-reported-type").text(e)}}})},handleReportError:function(e,t){var i="";e.bp_moderation_missing_data?i=e.bp_moderation_missing_data:e.bp_moderation_already_reported?i=e.bp_moderation_already_reported:e.bp_moderation_missing_error?i=e.bp_moderation_missing_error:e.bp_moderation_invalid_access?i=e.bp_moderation_invalid_access:e.bp_moderation_invalid_item_id&&(i=e.bp_moderation_invalid_item_id),jQuery(t).closest(".bb-report-type-wrp").find(".bp-report-form-err").html(i)},setFormValues:function(e){var t=g(".mfp-content");t.find(".bp-content-id").val(e.contentId),t.find(".bp-content-type").val(e.contentType),t.find(".bp-nonce").val(e.nonce)},togglePassword:function(){g(document).on("click",".bb-toggle-password",function(e){e.preventDefault();var t=g(this),i=t.next("input");t.toggleClass("bb-show-pass"),t.hasClass("bb-show-pass")?i.attr("type","text"):i.attr("type","password")})},closePickersOnClick:function(e){var t=g(e.target);_.isUndefined(BP_Nouveau.media)||_.isUndefined(BP_Nouveau.media.emoji)||t.closest(".post-emoji").length||t.is(".emojioneemoji,.emojibtn")||g(".emojionearea-button.active").removeClass("active")},closePickersOnEsc:function(e){"Escape"!==e.key&&27!==e.keyCode||_.isUndefined(BP_Nouveau.media)||_.isUndefined(BP_Nouveau.media.emoji)||g(".emojionearea-button.active").removeClass("active")},lazyLoad:function(e){var t=g(e);if(t.length)for(var i=0;i<t.length;i++){var a=!1;try{g(t[i]).is(":in-viewport")&&(a=!0)}catch(e){console.error(e.message),!a&&t[i].getBoundingClientRect().top<=(window.innerHeight||document.documentElement.clientHeight)+window.scrollY&&(a=!0)}a&&t[i].getAttribute("data-src")&&(t[i].src=t[i].getAttribute("data-src"),t[i].removeAttribute("data-src"),g(t[i]).on("load",function(){g(this).removeClass("lazy")}),g(document).trigger("bp_nouveau_lazy_load",{element:t[i]}))}},coverPhotoCropper:function(e){var t,i,a,o,n,r,s;if(g(e.currentTarget).hasClass("position-change-cover-image")){var d=g(e.currentTarget).closest("#cover-image-container").find(".header-cover-img").height(),l=(d-g(e.currentTarget).closest("#header-cover-image").height())/2,c=g(e.currentTarget);if(d<=c.closest("#header-cover-image").height())return g("body").append('<div id="cover-photo-alert" style="display: block;" class="open-popup"><transition name="modal"><div class="modal-mask bb-white bbm-model-wrap"><div class="modal-wrapper"><div id="boss-media-create-album-popup" class="modal-container has-folderlocationUI"><header class="bb-model-header"><h4>'+BP_Nouveau.media.cover_photo_size_error_header+'</h4><a class="bb-model-close-button" id="bp-media-create-folder-close" href="#"><span class="dashicons dashicons-no-alt"></span></a></header><div class="bb-field-wrap"><p>'+BP_Nouveau.media.cover_photo_size_error_description+"</p></div></div></div></div></transition></div>"),void e.preventDefault();i=g(e.currentTarget).closest("#header-cover-image").height(),a=g(e.currentTarget).closest("#header-cover-image").width(),o=Number(g(e.currentTarget).closest("#cover-image-container").find(".header-cover-img").css("top").replace("px","")),n=g(e.currentTarget).closest("#header-cover-image").width()/g(e.currentTarget).closest("#header-cover-image").find(".header-cover-reposition-wrap img")[0].width,c.closest("#cover-image-container").find(".header-cover-reposition-wrap").show(),(t=g(".header-cover-reposition-wrap img")).guillotine({width:a,height:i,eventOnChange:"guillotinechange",init:{scale:n,y:o&&g(e.currentTarget).closest("#header-cover-image").hasClass("has-position")?-o:l,w:a,h:i}}),t.on("guillotinechange",function(e,t){c.closest("#cover-image-container").find(".header-cover-img").attr("data-top",-t.y)})}else{g(e.currentTarget).hasClass("cover-image-save")?(r=g(e.currentTarget),s=g(e.currentTarget).closest("#cover-image-container").find(".header-cover-img"),r.addClass("loading"),g.post(BP_Nouveau.ajaxurl,{action:"save_cover_position",position:s.attr("data-top")}).done(function(e){e.success&&e.data&&""!==e.data.content?(r.removeClass("loading"),r.closest("#cover-image-container").find(".header-cover-reposition-wrap").hide(),r.closest("#header-cover-image:not(.has-position)").addClass("has-position"),s.css({top:e.data.content+"px"})):(r.removeClass("loading"),r.closest("#cover-image-container").find(".header-cover-reposition-wrap").hide())}).fail(function(){r.removeClass("loading"),r.closest("#cover-image-container").find(".header-cover-reposition-wrap").hide()})):g(e.currentTarget).hasClass("cover-image-cancel")&&((t=g(".header-cover-reposition-wrap img")).guillotine({width:0,height:0,init:{scale:1,y:0,w:0,h:0}}),t.guillotine("remove"),g(e.currentTarget).closest("#cover-image-container").find(".header-cover-reposition-wrap").hide(),g(e.currentTarget).closest("#cover-image-container").find(".header-cover-img").attr("data-top",""))}e.preventDefault()},coverPhotoCropperAlert:function(e){e.preventDefault(),g("#cover-photo-alert").remove()},toggleMoreOption:function(e){g(e.target).hasClass("bb_more_options_action")||g(e.target).parent().hasClass("bb_more_options_action")?(e.preventDefault(),g(e.target).closest(".bb_more_options").find(".bb_more_options_list").hasClass("is_visible")?g(".bb_more_options").find(".bb_more_options_list").removeClass("is_visible"):(g(".bb_more_options").find(".bb_more_options_list").removeClass("is_visible"),g(e.target).closest(".bb_more_options").find(".bb_more_options_list").addClass("is_visible"))):g(".bb_more_options").find(".bb_more_options_list").removeClass("is_visible")},getVideoThumb:function(r,s){var e,t=new FileReader;t.onload=function(){var e=new Blob([t.result],{type:r.type}),o=URL.createObjectURL(e),n=document.createElement("video"),i=null;n.src=o;var a=setInterval(function(){var e,t;0<n.readyState&&(i=n.duration.toFixed(2),e=function(){t()&&(n.removeEventListener("timeupdate",e),n.pause())},n.addEventListener("loadeddata",function(){t()&&n.removeEventListener("timeupdate",e)}),t=function(){var e=document.createElement("canvas");e.width=n.videoWidth,e.height=n.videoHeight,e.getContext("2d").drawImage(n,0,0,e.width,e.height);var t,i=e.toDataURL(),a=1e5<i.length;return a&&((t=document.createElement("img")).src=i,r.previewElement?(g(r.previewElement).find(s).find("img").length?g(r.previewElement).find(s).find("img").attr("src",i):g(r.previewElement).find(s).append(t),g(r.previewElement).closest(".dz-preview").addClass("dz-has-thumbnail")):g(s).find("img").length?g(s).find("img").attr("src",i):g(s).append(t),URL.revokeObjectURL(o)),a},n.addEventListener("timeupdate",e),n.preload="metadata",n.src=o,n.muted=!0,n.playsInline=!0,null!=i&&(n.currentTime=Math.floor(Math.random()*Math.floor(i))),n.play(),clearInterval(a))},500)},r.dataURL?((e=new XMLHttpRequest).open("GET",r.dataURL,!0),e.responseType="blob",e.onload=function(){var e;200==this.status&&(e=this.response,t.readAsArrayBuffer(e))},e.send()):t.readAsArrayBuffer(r)},bbWidgetMoreFollowing:function(e){var t=g(e.currentTarget).attr("href").split("#");if(1<t.length){var i=t.pop();if(i&&0<g('[data-bp-scope="'+i+'"]').length)return g('[data-bp-scope="'+i+'"] a').trigger("click"),!1}},mediumEditorButtonsWarp:function(e){var t;e.hasClass("wrappingInitialised")||(e.addClass("wrappingInitialised"),t=0,e.find(".medium-editor-toolbar-actions > li").each(function(){t+=g(this).outerWidth()}),t>e.width()-10?(e.data("childerWith",t),t>e.width()&&(0===e.find(".medium-editor-toolbar-actions .medium-editor-action-more").length&&e.find(".medium-editor-toolbar-actions").append('<li class="medium-editor-action-more"><button class="medium-editor-action medium-editor-action-more-button"><b></b></button><ul></ul></li>'),e.find(".medium-editor-action-more").show(),t+=e.find(".medium-editor-toolbar-actions .medium-editor-action-more").outerWidth(),g(e.find(".medium-editor-action").get().reverse()).each(function(){g(this).hasClass("medium-editor-action-more-button")||t>e.width()&&(t-=g(this).outerWidth(),e.find(".medium-editor-action-more > ul").prepend(g(this).parent()))}))):e.find(".medium-editor-toolbar-actions .medium-editor-action-more").length&&(g(e.find(".medium-editor-action-more ul > li")).each(function(){t+35<e.width()&&(t+=g(this).outerWidth(),g(this).insertBefore(e.find(".medium-editor-action-more")))}),0===e.find(".medium-editor-action-more ul > li").length&&e.find(".medium-editor-action-more").hide()),g(e).find(".medium-editor-action-more-button").on("click",function(e){e.preventDefault(),g(this).parent(".medium-editor-action-more").toggleClass("active")}),g(e).find(".medium-editor-action-more ul .medium-editor-action").on("click",function(e){e.preventDefault(),g(this).closest(".medium-editor-action-more").toggleClass("active")}),g(window).one("resize",function(){e.removeClass("wrappingInitialised"),g(e).find(".medium-editor-action-more-button").unbind("click"),g(e).find(".medium-editor-action-more ul .medium-editor-action").unbind("click")}))}},bp.Nouveau.start())}((bp,jQuery));
