window.wp=window.wp||{},window.bp=window.bp||{},function(e,t){"undefined"!=typeof BP_Nouveau&&(bp.Nouveau={start:function(){this.setupGlobals(),this.prepareDocument(),this.initObjects(),this.setHeartBeat(),this.addListeners(),this.switchGridList(),this.sendInvitesRevokeAccess(),this.sentInvitesFormValidate(),this.registerPopUp(),this.loginPopUp(),this.reportPopUp(),this.reportActions(),this.reportedPopup(),this.togglePassword(),this.enableSubmitOnLegalAgreement(),this.profileNotificationSetting(),this.xProfileBlock(),"undefined"!=typeof BB_Nouveau_Presence&&this.userPresenceStatus();var e=this;t(document).on("bb_trigger_toast_message",function(t,i,a,n,o,s,r){e.bbToastMessage(i,a,n,o,s,r)}),bp.Nouveau.lazyLoad(".lazy"),t(window).on("scroll resize",function(){bp.Nouveau.lazyLoad(".lazy")})},bbToastMessage:function(e,i,a,n,o,s){function r(){if(t(".bb-toast-messages-enable").length)return".bb-toast-messages-enable .toast-messages-list";if(t(".bb-onscreen-notification-enable ul.notification-list").length){var e=t(".bb-onscreen-notification").hasClass("bb-position-left")?"left":"right",i=t('<div class="bb-toast-messages-enable bb-toast-messages-enable-mobile-support"><div class="bb-toast-messages bb-position-'+e+' single-toast-messages"><ul class="toast-messages-list bb-toast-messages-list"></u></div></div>');t(".bb-onscreen-notification").show(),t(i).insertBefore(".bb-onscreen-notification-enable ul.notification-list")}else{var a=t('<div class="bb-toast-messages-enable bb-toast-messages-enable-mobile-support"><div class="bb-toast-messages bb-position-right single-toast-messages"><ul class="toast-messages-list bb-toast-messages-list"></u></div></div>');t("body").append(a)}return".bb-toast-messages-enable .toast-messages-list"}function d(){t(c).removeClass("pull-animation").addClass("close-item").delay(500).remove()}if(i&&""!=i.trim()){var l="unique-"+Math.floor(1e6*Math.random()),c="."+l,p="",u="",b="";s=s&&"number"==typeof s?1e3*s:5e3;a&&(u=a,b="success"===u?"check":"warning"===u?"exclamation-triangle":"info"),null!==n&&(p="has-url");var m="";m+='<div class="toast-messages-icon"><i class="bb-icon bb-icon-'+b+'"></i></div>',m+='<div class="toast-messages-content">',e&&(m+='<span class="toast-messages-title">'+e+"</span>"),i&&(m+='<span class="toast-messages-content">'+i+"</span>"),m+="</div>",m+='<div class="actions"><a class="action-close primary" data-bp-tooltip-pos="left" data-bp-tooltip="'+BP_Nouveau.close+'"><i class="bb-icon bb-icon-times" aria-hidden="true"></i></a></div>',m+=n?'<a class="toast-messages-url" href="'+n+'"></a>':"",t(r()).append('<li class="item-list read-item pull-animation bp-message-'+u+" "+l+" "+p+'"> '+m+" </li>"),o&&setInterval(function(){d()},s),t(c+" .actions .action-close").on("click",function(){d()})}},setupGlobals:function(){this.ajax_request=null,this.objects=t.map(BP_Nouveau.objects,function(e){return e}),this.objectNavParent=BP_Nouveau.object_nav_parent,this.heartbeat=wp.heartbeat||!1,this.querystring=this.getLinkParams()},prepareDocument:function(){if(t("body").hasClass("no-js")&&t("body").removeClass("no-js").addClass("js"),BP_Nouveau.warnings&&"undefined"!=typeof console&&console.warn&&t.each(BP_Nouveau.warnings,function(e,t){console.warn(t)}),t(".buddypress_object_nav .widget-title").length){var e=t(".buddypress_object_nav .widget-title").html();t("body").find('*:contains("'+e+'")').each(function(i,a){t(a).hasClass("widget-title")||e!==t(a).html()||t(a).is("a")||t(a).remove()})}},getStorage:function(e,t){var i=sessionStorage.getItem(e);return i=i?JSON.parse(i):{},void 0!==t?i[t]||!1:i},setStorage:function(e,t,i){var a=this.getStorage(e);return void 0===i&&void 0!==a[t]?delete a[t]:a[t]=i,sessionStorage.setItem(e,JSON.stringify(a)),null!==sessionStorage.getItem(e)},getLinkParams:function(e,t){var i;if(i=e?-1!==e.indexOf("?")?"?"+e.split("?")[1]:"":document.location.search,!i)return null;var a=i.replace(/(^\?)/,"").split("&").map(function(e){return e=e.split("="),this[e[0]]=e[1],this}.bind({}))[0];return t?a[t]:a},urlDecode:function(e,t){var i=t||{amp:"&",lt:"<",gt:">",quot:'"',"#039":"'"};return decodeURIComponent(e.replace(/\+/g," ")).replace(/&([^;]+);/g,function(e,t){return i[t]||""})},ajax:function(e,i,a){this.ajax_request&&void 0===a&&this.ajax_request.abort();var n=t.extend({},bp.Nouveau.getStorage("bp-"+i),{nonce:BP_Nouveau.nonces[i]},e);return void 0!==BP_Nouveau.customizer_settings&&(n.customized=BP_Nouveau.customizer_settings),void 0!==BP_Nouveau.modbypass&&(n.modbypass=BP_Nouveau.modbypass),this.ajax_request=t.post(BP_Nouveau.ajaxurl,n,"json"),this.ajax_request},inject:function(e,i,a){t(e).length&&i&&(a=a||"reset","append"===a?t(e).append(i).find("li.activity-item").each(this.hideSingleUrl):"prepend"===a?t(e).prepend(i).find("li.activity-item").each(this.hideSingleUrl):"after"===a?t(e).after(i).find("li.activity-item").each(this.hideSingleUrl):t(e).html(i).find("li.activity-item").each(this.hideSingleUrl),"undefined"==typeof bp_mentions&&void 0===bp.mentions||(t(".bp-suggestions").bp_mentions(bp.mentions.users),t("#whats-new").on("inserted.atwho",function(){if(window.getSelection&&document.createRange){var e=window.getSelection&&window.getSelection();e&&e.rangeCount>0&&(window.activityCaretPosition=e.getRangeAt(0))}else window.activityCaretPosition=document.selection.createRange()})))},hideSingleUrl:function(){var e=t(this).find(".activity-inner > p").removeAttr("br").removeAttr("a").text(),i="",a="",n="",o=0;if(0<=e.indexOf("http://")?(n=e.indexOf("http://"),o=1):0<=e.indexOf("https://")?(n=e.indexOf("https://"),o=1):0<=e.indexOf("www.")&&(n=e.indexOf("www"),o=1),1===o){for(var s=n;s<e.length&&(" "!==e[s]&&"\n"!==e[s]);s++)i+=e[s];""!==i&&(a=t.trim(e.replace(i,""))),0===t.trim(a).length&&0!==t(this).find("iframe").length&&""!==i&&t(this).find(".activity-inner > p:first").hide()}},objectRequest:function(e){var i={},a=this;if(e=t.extend({object:"",scope:null,filter:null,target:"#buddypress [data-bp-list]",search_terms:"",page:1,extras:null,caller:null,template:null,method:"reset"},e),e.object&&e.target){if("activity"==e.object&&"#buddypress [data-bp-list] ul.bp-list"==e.target&&(e.target="#buddypress [data-bp-list] ul.bp-list:not(#bb-media-model-container ul.bp-list)"),["members","activity","media","document"].includes(e.object)&&!t(this.objectNavParent+' [data-bp-scope="'+e.scope+'"]').length&&(e.scope="all"),e.search_terms&&(e.search_terms=e.search_terms.replace(/</g,"&lt;").replace(/>/g,"&gt;")),null!==e.scope&&this.setStorage("bp-"+e.object,"scope",e.scope),null!==e.filter&&this.setStorage("bp-"+e.object,"filter",e.filter),null!==e.extras&&this.setStorage("bp-"+e.object,"extras",e.extras),t(this.objectNavParent+" [data-bp-object]").each(function(){t(this).removeClass("selected loading")}),t(this.objectNavParent+' [data-bp-scope="'+e.scope+'"]').length?t(this.objectNavParent+' [data-bp-scope="'+e.scope+'"], #object-nav li.current').addClass("selected loading"):t(this.objectNavParent+" [data-bp-scope]:eq(0), #object-nav li.current").addClass("selected loading"),0===t(this.objectNavParent+' [data-bp-scope="'+e.scope+'"]').length){var n=["group_members"===e.object&&t("body").hasClass("group-members"),"activity"===e.object&&t("body.groups").hasClass("activity"),"document"===e.object&&t("body").hasClass("documents"),"document"===e.object&&(t("body").hasClass("document")||t("body").hasClass("documents"))],o=[t(".groups .group-search.members-search"),t(".groups .group-search.activity-search"),t(".documents .bp-document-listing .bb-title"),t("#bp-media-single-folder .bb-title")];n.forEach(function(e,t){e&&o[t].addClass("loading")})}return t('#buddypress [data-bp-filter="'+e.object+'"] option[value="'+e.filter+'"]').prop("selected",!0),"friends"===e.object||"group_members"===e.object?(e.template=e.object,e.object="members"):"group_requests"===e.object?(e.object="groups",e.template="group_requests"):"group_subgroups"===e.object?(e.object="groups",e.template="group_subgroups"):"notifications"===e.object&&(e.object="members",e.template="member_notifications"),i=t.extend({action:e.object+"_filter"},e),this.ajax(i,e.object).done(function(i){if(!1!==i.success&&!_.isUndefined(i.data)){if(!t("body.group-members.members.buddypress").length||_.isUndefined(i.data)||_.isUndefined(i.data.count)||t("body.group-members.members.buddypress ul li#members-groups-li").find("span").text(i.data.count),t(a.objectNavParent+' [data-bp-scope="'+e.scope+'"]').removeClass("loading"),t(a.objectNavParent+' [data-bp-scope="'+e.scope+'"]').find("span").text(""),0===t(a.objectNavParent+' [data-bp-scope="'+e.scope+'"]').length&&o.forEach(function(e){e.removeClass("loading")}),_.isUndefined(i.data)||_.isUndefined(i.data.count)||t(a.objectNavParent+' [data-bp-scope="'+e.scope+'"]').find("span").text(i.data.count),!_.isUndefined(i.data)&&!_.isUndefined(i.data.scopes))for(var n in i.data.scopes)t(a.objectNavParent+' [data-bp-scope="'+n+'"]').find("span").text(i.data.scopes[n]);if("reset"!==e.method)a.inject(e.target,i.data.contents,e.method),t(e.target).trigger("bp_ajax_"+e.method,t.extend(e,{response:i.data}));else if("pag-bottom"===e.caller){var s=null;s=t("#subnav").length?t("#subnav").parent():t(e.target),t("html,body").animate({scrollTop:s.offset().top},"slow",function(){t(e.target).fadeOut(100,function(){a.inject(this,i.data.contents,e.method),t(this).fadeIn(100),t(e.target).trigger("bp_ajax_request",t.extend(e,{response:i.data})),bp.Nouveau.lazyLoad&&setTimeout(function(){bp.Nouveau.lazyLoad(".lazy")},1e3)})})}else t(e.target).fadeOut(100,function(){a.inject(this,i.data.contents,e.method),t(this).fadeIn(100),t(e.target).trigger("bp_ajax_request",t.extend(e,{response:i.data})),bp.Nouveau.lazyLoad&&setTimeout(function(){bp.Nouveau.lazyLoad(".lazy")},1e3)});setTimeout(function(){a.reportPopUp(),a.reportedPopup()},1e3)}})}},initObjects:function(){var e=this,i={},a={},n="all",o="",s=null,r=null;t.each(this.objects,function(d,l){if(!t('#buddypress [data-bp-list="'+l+'"][data-ajax="false"]').length){i=e.getStorage("bp-"+l);var c=window.location.hash.substr(1);void 0!==c&&"following"==c?n=c:void 0!==i.scope&&(n=i.scope),void 0!==i.extras&&"notifications"!==l&&(s=i.extras),t('#buddypress [data-bp-filter="'+l+'"]').length&&(void 0!==i.filter?(r=i.filter,t('#buddypress [data-bp-filter="'+l+'"] option[value="'+r+'"]').prop("selected",!0)):"-1"!==t('#buddypress [data-bp-filter="'+l+'"]').val()&&"0"!==t('#buddypress [data-bp-filter="'+l+'"]').val()&&(r=t('#buddypress [data-bp-filter="'+l+'"]').val())),t(this.objectNavParent+' [data-bp-object="'+l+'"]').length&&(t(this.objectNavParent+' [data-bp-object="'+l+'"]').each(function(){t(this).removeClass("selected")}),t(this.objectNavParent+' [data-bp-scope="'+l+'"], #object-nav li.current').addClass("selected")),null!==e.querystring&&(void 0!==e.querystring[l+"_search"]?o=decodeURI(e.querystring[l+"_search"]):void 0!==e.querystring.s&&(o=decodeURI(e.querystring.s)),o&&t('#buddypress [data-bp-search="'+l+'"] input[type=search]').val(o)),t('#buddypress [data-bp-list="'+l+'"]').length&&(a={object:l,scope:n,filter:r,search_terms:o,extras:s},t('#buddypress [data-bp-member-type-filter="'+l+'"]').length?a.member_type_id=t('#buddypress [data-bp-member-type-filter="'+l+'"]').val():t('#buddypress [data-bp-group-type-filter="'+l+'"]').length&&(a.group_type=t('#buddypress [data-bp-group-type-filter="'+l+'"]').val()),e.objectRequest(a))}})},setHeartBeat:function(){void 0!==BP_Nouveau.pulse&&this.heartbeat&&(this.heartbeat.interval(Number(BP_Nouveau.pulse)),t.fn.extend({"heartbeat-send":function(){return this.bind("heartbeat-send")}}),t.fn.extend({"heartbeat-tick":function(){return this.bind("heartbeat-tick")}}))},addListeners:function(){t("[data-bp-disable-input]").on("change",this.toggleDisabledInput),t(this.objectNavParent+" .bp-navs").on("click","a",this,this.scopeQuery),t(document).on("change","#buddypress [data-bp-filter]",this,this.filterQuery),t(document).on("change","#buddypress [data-bp-group-type-filter]",this,this.typeGroupFilterQuery),t(document).on("change","#buddypress [data-bp-member-type-filter]",this,this.typeMemberFilterQuery),t("#buddypress [data-bp-search]").on("submit","form",this,this.searchQuery),t("#buddypress [data-bp-search] form").on("search","input[type=search]",this.resetSearch),t("#buddypress [data-bp-list], #buddypress #item-header, #buddypress.bp-shortcode-wrap .dir-list, #buddypress .bp-messages-content").on("click","[data-bp-btn-action]",this,this.buttonAction),t("#buddypress [data-bp-list], #buddypress #item-header, #buddypress.bp-shortcode-wrap .dir-list, #buddypress .messages-screen").on("blur","[data-bp-btn-action]",this,this.buttonRevert),t("#buddypress [data-bp-list], #buddypress #item-header, #buddypress.bp-shortcode-wrap .dir-list, #buddypress .messages-screen").on("mouseover","[data-bp-btn-action]",this,this.buttonHover),t("#buddypress [data-bp-list], #buddypress #item-header, #buddypress.bp-shortcode-wrap .dir-list, #buddypress .messages-screen").on("mouseout","[data-bp-btn-action]",this,this.buttonHoverout),t("#buddypress [data-bp-list], #buddypress #item-header, #buddypress.bp-shortcode-wrap .dir-list, #buddypress .messages-screen").on("mouseover",".awaiting_response_friend",this,this.awaitingButtonHover),t("#buddypress [data-bp-list], #buddypress #item-header, #buddypress.bp-shortcode-wrap .dir-list, #buddypress .messages-screen").on("mouseout",".awaiting_response_friend",this,this.awaitingButtonHoverout),t(document).on("click","#buddypress .bb-leave-group-popup .bb-confirm-leave-group",this.leaveGroupAction),t(document).on("click","#buddypress .bb-leave-group-popup .bb-close-leave-group",this.leaveGroupClose),t(document).on("click","#buddypress .bb-remove-connection .bb-confirm-remove-connection",this.removeConnectionAction),t(document).on("click","#buddypress .bb-remove-connection .bb-close-remove-connection",this.removeConnectionClose),t(document).on("click","#buddypress table.invite-settings .field-actions .field-actions-remove, #buddypress table.invite-settings .field-actions-add",this,this.addRemoveInvite),t(document).on("click",".show-action-popup",this.showActionPopup),t(document).on("click","#message-threads .block-member",this.threadListBlockPopup),t(document).on("click","#message-threads .report-content",this.threadListReportPopup),t(document).on("click",".bb-close-action-popup, .action-popup-overlay",this.closeActionPopup),t(document).on("keyup",'.search-form-has-reset input[type="search"], .search-form-has-reset input#bbp_search',_.throttle(this.directorySearchInput,900)),t(document).on("click",".search-form-has-reset .search-form_reset",this.resetDirectorySearch),t(document).on("keyup",this,this.keyUp),t("[data-bp-close]").on("click",this,this.closeNotice),t("#buddypress [data-bp-list]").on("click","[data-bp-pagination] a",this,this.paginateAction),t(document).on("click",this.closePickersOnClick),document.addEventListener("keydown",this.closePickersOnEsc),t(document).on("click","#item-header a.position-change-cover-image, .header-cover-reposition-wrap a.cover-image-save, .header-cover-reposition-wrap a.cover-image-cancel",this.coverPhotoCropper),t(document).on("click","#cover-photo-alert .bb-model-close-button",this.coverPhotoCropperAlert),t(document).on("click",this.toggleMoreOption.bind(this)),t(document).on("heartbeat-send",this.bbHeartbeatSend.bind(this)),t(document).on("heartbeat-tick",this.bbHeartbeatTick.bind(this)),bp.Nouveau.notificationRemovedAction(),bp.Nouveau.removeAllNotification(),bp.Nouveau.setTitle(),t(document).on("click",".more-following .count-more",this.bbWidgetMoreFollowing),t(".bb-accordion .bb-accordion_trigger").on("click",this.toggleAccordion),t(document).on("mouseover","a.button.fav, .button.unfav, a.button.has-like, a.button.has-emotion",bp.Nouveau,this.showReactions.bind(this)).on("mouseout","a.button.fav, .button.unfav, a.button.has-like, a.button.has-emotion",function(){clearTimeout(window.reactionHoverTimeout)}),t(document).on("mouseleave",".activity-meta .ac-emotions_list, .button.fav, .button.unfav, .button.has-like, .button.has-emotion",bp.Nouveau,this.hideReactions.bind(this)),t(document).on("click",".activity-state-popup_overlay",bp.Nouveau,this.closeActivityState.bind(this)),t(document).on("click",".ac-emotions_list .ac-emotion_btn",this.updateReaction),t(document).on("click",".activity-meta a.button.fav",this.updateReaction),t(document).on("click",".activity-meta .button.has-emotion",this.removeReaction),t(document).on("click",".activity-state-reactions",this.showActivityReactions),t(document).on("click",".activity-state-popup .activity-state-popup_tab_panel a",this.ReactionStatePopupTab)},updateReaction:function(e){e.preventDefault();var i,a=t(this),n=!0,o="activity",s=0,r=a.parents(".ac-emotion_item").data("reaction-id"),d=a.parents(".acomment-display").first();0<d.length&&(n=!1,o="activity_comment"),n?(i=a.parents(".activity-item"),s=i.data("bp-activity-id")):(i=a.parents(".activity-comment").first(),s=i.data("bp-activity-comment-id")),t.ajax({url:BP_Nouveau.ajaxurl,type:"post",data:{action:"bb_update_reaction",reaction_id:r,item_id:s,item_type:o,_wpnonce:BP_Nouveau.nonces.activity},success:function(e){void 0!==e.data.reaction_counts&&(n?0<i.find(".activity-content .activity-state-reactions").length?i.find(".activity-content  .activity-state-reactions").replaceWith(e.data.reaction_counts):i.find(".activity-content .activity-state").prepend(e.data.reaction_counts):0<i.find("#acomment-display-"+s+" .comment-reactions").length&&i.find("#acomment-display-"+s+" .comment-reactions").html(e.data.reaction_counts)),e.data.reaction_button&&(n?i.find(".bp-generic-meta a.bp-like-button:first").replaceWith(e.data.reaction_button):i.find("#acomment-display-"+s+" .bp-generic-meta a.bp-like-button").replaceWith(e.data.reaction_button)),void 0!==e.data.directory_tab&&""!==e.data.directory_tab&&t('.main-navs ul.component-navigation li[data-bp-scope="favorites"]').length<=0&&t('.main-navs ul.component-navigation li[data-bp-scope="all"]').after(e.data.directory_tab)}})},removeReaction:function(e){e.preventDefault();var i,a=t(this),n=!0,o=0,s="activity",r=a.closest("#activity-stream"),d=a.parents(".acomment-display").first();0<d.length&&(n=!1,s="activity_comment"),n?(i=a.parents(".activity-item"),o=i.data("bp-activity-id")):(i=a.parents(".activity-comment").first(),o=i.data("bp-activity-comment-id")),t.ajax({url:BP_Nouveau.ajaxurl,type:"post",data:{action:"bb_remove_reaction",item_id:o,item_type:s,_wpnonce:BP_Nouveau.nonces.activity},success:function(e){void 0!==e.data.reaction_counts&&(n?0<i.find(".activity-content .activity-state-reactions").length?i.find(".activity-content  .activity-state-reactions").replaceWith(e.data.reaction_counts):i.find(".activity-content .activity-state").prepend(e.data.reaction_counts):0<i.find("#acomment-display-"+o+" .comment-reactions").length&&i.find("#acomment-display-"+o+" .comment-reactions").html(e.data.reaction_counts)),e.data.reaction_button&&(n?i.find(".activity-meta a.bp-like-button.has-emotion:first").replaceWith(e.data.reaction_button):i.find("#acomment-display-"+o+" .activity-meta a.bp-like-button.has-emotion").replaceWith(e.data.reaction_button));var a=t('.main-navs ul.component-navigation li[data-bp-scope="favorites"]').hasClass("selected");a&&n&&i.remove(),void 0!==e.data.no_activity_found&&(a?r.append(e.data.no_activity_found):t('.main-navs ul.component-navigation [data-bp-scope="favorites"]').remove())}})},showActivityReactions:function(e){e.preventDefault();var i=t(this),a=i.parents(".activity-item"),n=a.data("bp-activity-id"),o="activity";if(a.find(".activity-content .activity-state-popup").length<=0){var s=wp.template("activity-reactions-popup"),r=s();a.find(".activity-content ").append(r),a.find(".activity-content .activity-state-popup").addClass("active"),a.find(".activity-content .activity-state-popup").hasClass("loaded")||t.ajax({url:BP_Nouveau.ajaxurl,type:"post",data:{action:"bb_get_reactions",item_id:n,item_type:o,_wpnonce:BP_Nouveau.nonces.activity},success:function(e){if(console.log(e.data.reactions),void 0!==e.data.reactions){var i=e.data,r=s(i);a.find(".activity-content .activity-state-popup").replaceWith(r),a.find(".activity-content .activity-state-popup").addClass("loaded active");var d=a.find(".activity-state-popup .activity-state-popup_tab_item ul");d.on("scroll",function(){bp.Nouveau.ReactionLoadMore(t(this),n,o)})}}})}else a.find(".activity-content .activity-state-popup").addClass("active")},ReactionLoadMore:function(e,i,a){if(!e.hasClass("loading")){var n=e[0].scrollHeight-e.scrollTop()-e.outerHeight(),o=10,s=e.parent().data("reaction-id"),r=e.parent().data("total-pages"),d=e.parent().attr("data-paged");(void 0===d||d<=0)&&(d=1),n<=o&&d<r&&!e.hasClass("loading")&&(e.append('<li class="reactions_loader"><i class="b-icon-l bb-icon-spinner animate-spin"></i></li>'),e.addClass("loading"),d=parseInt(d,10)+1,t.ajax({url:BP_Nouveau.ajaxurl,type:"post",data:{action:"bb_user_reactions",reaction_id:s,item_id:i,item_type:a,paged:d,_wpnonce:BP_Nouveau.nonces.activity},success:function(t){void 0!==t.data.user_list&&(e.parent().attr("data-paged",d),e.append(t.data.user_list),e.find(".reactions_loader").remove(),e.removeClass("loading"))}}))}},ReactionStatePopupTab:function(e){e.preventDefault(),t(this).closest(".activity-state-popup").find(".activity-state-popup_tab_panel li a").removeClass("active"),t(this).addClass("active"),t(this).closest(".activity-state-popup").find(".activity-state-popup_tab_content .activity-state-popup_tab_item").removeClass("active"),t(this).closest(".activity-state-popup").find("."+t(this).data("tab")).addClass("active")},closeActivityState:function(){t(".activity-state-popup").removeClass("active")},showReactions:function(e){var i=t(e.currentTarget);window.reactionHoverTimeout=setTimeout(function(){i.closest(".bp-generic-meta").find(".ac-emotions_list").addClass("active")},500)},hideReactions:function(e){t(e.currentTarget).closest(".bp-generic-meta").find(".ac-emotions_list").removeClass("active")},bbHeartbeatSend:function(e,i){i.onScreenNotifications=!0,t("#buddypress").trigger("bb_heartbeat_send",i)},bbHeartbeatTick:function(e,t){bp.Nouveau.bbInjectOnScreenNotifications(e,t)},bbInjectOnScreenNotifications:function(e,i){var a=t(".bb-onscreen-notification").data("enable");if("1"==a&&(void 0!==i.on_screen_notifications||""!==i.on_screen_notifications)){var n=t(".bb-onscreen-notification"),o=n.find(".notification-list"),s=o.data("removed-items"),r=o.data("animated-items"),d=[],l=t(t.parseHTML("<ul>"+i.on_screen_notifications+"</ul>"));t.each(s,function(e,t){var i=l.find("[data-notification-id="+t+"]");i.length&&i.closest(".read-item").remove()});var c=l.find(".read-item");c.each(function(e,i){var a=t(i).find(".actions .action-close").data("notification-id");"-1"==t.inArray(a,r)?(t(i).addClass("pull-animation"),r.push(a),d.push(a)):t(i).removeClass("pull-animation")}),d.length&&c.each(function(e,i){var a=t(i).find(".actions .action-close").data("notification-id");if("-1"==t.inArray(a,d)){t(i).removeClass("recent-item");var n=o.data("border-items");n.push(a),o.attr("data-border-items",JSON.stringify(n))}}),o.attr("data-animated-items",JSON.stringify(r)),c.length&&(n.removeClass("close-all-items"),c.eq(2).nextAll().addClass("bb-more-item"),c.length>3?o.addClass("bb-more-than-3"):o.removeClass("bb-more-than-3"),n.show(),o.empty().html(c),bp.Nouveau.visibilityOnScreenClearButton(),bp.Nouveau.notificationBorder(),bp.Nouveau.notificationAutoHide(),bp.Nouveau.browserTabFlashNotification(),bp.Nouveau.browserTabCountNotification())}},notificationBorder:function(){var e=t(".bb-onscreen-notification"),i=e.find(".notification-list"),a=i.data("border-items");i.find(".read-item").each(function(e,i){var n=t(i).find(".actions .action-close").data("notification-id");"-1"==t.inArray(n,a)&&t(i).addClass("recent-item")}),i.attr("data-border-items",JSON.stringify(a))},browserTabCountNotification:function(){var e=t(".bb-onscreen-notification"),i=e.find(".notification-list"),a=i.find(".read-item"),n=t("html").find("title"),o=e.data("title-tag");a.length>0?n.text("("+a.length+") "+o):n.text(o)},browserTabFlashNotification:function(){var e=t(".bb-onscreen-notification"),i=e.data("broser-tab");1==i&&(window.bbFlashNotification&&clearInterval(window.bbFlashNotification),document.hidden&&(window.bbFlashNotification=setInterval(bp.Nouveau.flashTitle,2e3)))},flashTitle:function(){var e=t(".bb-onscreen-notification"),i=e.find(".notification-list"),a=i.find(".read-item"),n=a.first().find(".notification-content .bb-full-link a").text(),o=t("html").find("title"),s=e.attr("data-title-tag"),r=e.attr("data-flash-status"),d=i.data("flash-items");if(document.hidden||(a.each(function(e,i){var a=t(i).find(".actions .action-close").attr("data-notification-id");"-1"==t.inArray(a,d)&&d.push(a)}),i.attr("data-flash-items",JSON.stringify(d))),!document.hidden&&window.bbFlashNotification||a.length<=0)return clearInterval(window.bbFlashNotification),e.attr("data-flash-status","default_title"),void o.text(s);if("default_title"===r){o.text("("+a.length+") "+s);var l=a.first().find(".actions .action-close").attr("data-notification-id");"-1"==t.inArray(l,d)&&e.attr("data-flash-status","notification")}else"notification"===r&&(o.text(n),e.attr("data-flash-status","default_title"))},notificationAutoHide:function(){var e=t(".bb-onscreen-notification"),i=e.find(".notification-list"),a=i.data("auto-removed-items"),n=e.data("visibility");if("never"!==n){var o=parseInt(n);o<=0||(i.find(".read-item").each(function(e,n){var s=t(n).find(".actions .action-close").data("notification-id");"-1"==t.inArray(s,a)&&(a.push(s),setTimeout(function(){i.find(".actions .action-close[data-notification-id="+s+"]").length&&i.find(".actions .action-close[data-notification-id="+s+"]").trigger("click")},1e3*o))}),i.attr("data-auto-removed-items",JSON.stringify(a)))}},notificationRemovedAction:function(){t(".bb-onscreen-notification .notification-list").on("click",".action-close",function(e){e.preventDefault(),bp.Nouveau.removeOnScreenNotification(this)})},removeOnScreenNotification:function(e){var i=t(e).closest(".notification-list"),a=t(e).closest(".read-item"),n=t(e).data("notification-id"),o=i.data("removed-items");a.addClass("close-item"),setTimeout(function(){o.push(n),i.attr("data-removed-items",JSON.stringify(o)),a.remove(),bp.Nouveau.browserTabCountNotification(),bp.Nouveau.visibilityOnScreenClearButton();var e=i.find(".read-item");e.length<4&&i.removeClass("bb-more-than-3"),e.slice(0,3).removeClass("bb-more-item")},500)},removeAllNotification:function(){t(".bb-onscreen-notification .bb-remove-all-notification").on("click",".action-close",function(e){e.preventDefault();var i=t(this).closest(".bb-onscreen-notification").find(".notification-list"),a=i.find(".read-item"),n=i.data("removed-items");a.each(function(e,i){var a=t(i).find(".actions .action-close").data("notification-id");a&&n.push(a)}),i.attr("data-removed-items",JSON.stringify(n)),a.remove(),bp.Nouveau.browserTabCountNotification(),bp.Nouveau.visibilityOnScreenClearButton(),i.closest(".bb-onscreen-notification").addClass("close-all-items"),t(".toast-messages-list > li").each(function(){t(this).removeClass("pull-animation").addClass("close-item").delay(500).remove()}),t(".toast-messages-list > li").each(function(){t(this).removeClass("pull-animation").addClass("close-item").delay(500).remove()}),i.removeClass("bb-more-than-3")})},setTitle:function(){var e=t("html head").find("title").text();t(".bb-onscreen-notification").attr("data-title-tag",e)},visibilityOnScreenClearButton:function(){var e=t(".bb-onscreen-notification"),i=e.find(".notification-list"),a=i.find(".read-item");a.length>1?(e.removeClass("single-notification"),e.addClass("active-button"),e.find(".bb-remove-all-notification .action-close").fadeIn(600)):(e.addClass("single-notification"),e.removeClass("active-button"),e.find(".bb-remove-all-notification .action-close").fadeOut(200))},switchGridList:function(){var e=this,i=!1,a=t(".grid-filters").data("object");"group_members"===a&&(i=!0),"friends"===a?a="members":"group_requests"===a?a="groups":"notifications"===a&&(a="members");var n=e.getStorage("bp-"+a),o={};void 0!==n.extras&&(o=n.extras,void 0!==o.layout&&(t(".grid-filters .layout-view").removeClass("active"),"list"===o.layout?t(".grid-filters .layout-list-view").addClass("active"):t(".grid-filters .layout-grid-view").addClass("active"))),t(document).on("click",".grid-filters .layout-view",function(n){n.preventDefault(),t(this).hasClass("layout-list-view")?(t(".layout-grid-view").removeClass("active"),t(this).addClass("active"),t(".bp-list").removeClass("grid"),o.layout="list"):(t(".layout-list-view").removeClass("active"),t(this).addClass("active"),t(".bp-list").addClass("grid"),o.layout="grid"),i?e.setStorage("bp-group_members","extras",o):e.setStorage("bp-"+a,"extras",o)})},sentInvitesFormValidate:function(){t("body.send-invites #send-invite-form #member-invites-table").length&&t("body.send-invites #send-invite-form").submit(function(){var e="",i="",a="",n=[],o=[],s="",r=0,d=0,l="",c="",p="",u="",b=/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/,m=t("body.send-invites #send-invite-form #error-message-empty-name-field").val(),f=t("body.send-invites #send-invite-form #error-message-invalid-email-address-field").val();if(s=t("body.send-invites #send-invite-form #error-message-required-field").val(),d=t("body.send-invites #send-invite-form #error-message-empty-subject-field").length,r=t("body.send-invites #send-invite-form #error-message-empty-body-field").length,1===d&&(l=t("body.send-invites #send-invite-form #bp-member-invites-custom-subject").val(),c=t("body.send-invites #send-invite-form #error-message-empty-subject-field").val()),1===r&&(p=tinyMCE.get("bp-member-invites-custom-content").getContent(),u=t("body.send-invites #send-invite-form #error-message-empty-body-field").val()),1===d&&1===r){var v=t("body.send-invites #send-invite-form #error-message-empty-subject-body-field").val();if(""===l&&""===p){if(!confirm(v))return!1}else if(""!==l&&""===p){if(!confirm(u))return!1}else if(""===l&&""!==p&&!confirm(c))return!1}else if(0===d&&1===r){if(""===p&&!confirm(u))return!1}else if(1===d&&0===r&&""===l&&!confirm(c))return!1;if(t("body.send-invites #send-invite-form #member-invites-table > tbody  > tr").each(function(){t(this).find('input[type="text"]').removeAttr("style"),t(this).find('input[type="email"]').removeAttr("style")}),t("body.send-invites #send-invite-form #member-invites-table > tbody  > tr").each(function(){e=t.trim(t(this).find('input[type="text"]').val()),i=t(this).find("input").attr("id"),a=t.trim(t(this).find('input[type="email"]').val()),""===e&&""===a?!1:""!==e&&""===a?(i=t(this).find('input[type="email"]').attr("id"),!0,n.push(i)):""===e&&""!==a?(i=t(this).find('input[type="text"]').attr("id"),!0,n.push(i)):b.test(a)?(!1,o.push(1)):(i=t(this).find('input[type="email"]').attr("id"),!0,n.push(i))}),t(".span_error").remove(),0!==n.length)return n.forEach(function(e){t("#"+e).attr("style","border:1px solid #ef3e46"),-1!==e.indexOf("email_")?t("#"+e).after('<span class="span_error" style="color:#ef3e46">'+f+"</span>"):t("#"+e).after('<span class="span_error" style="color:#ef3e46">'+m+"</span>")}),t("html, body").animate({scrollTop:t("#item-body").offset().top},2e3),alert(s),!1;if(t("#email_0_email_error").length&&t("#email_0_email_error").remove(),0===o.length){var h=t("#invitee_0_title").val(),g=t("#email_0_email").val();return""===h&&""===g?(t("#invitee_0_title").attr("style","border:1px solid #ef3e46"),t("#invitee_0_title").focus(),t("#email_0_email").attr("style","border:1px solid #ef3e46"),!1):""!==h&&""===g?(t("#email_0_email").attr("style","border:1px solid #ef3e46"),t("#email_0_email").focus(),!1):(b.test(g)||(t("#email_0_email").attr("style","border:1px solid #ef3e46"),t("#email_0_email").focus(),t("#email_0_email_error").remove(),
t("#email_0_email").after('<span id="email_0_email_error" style="color:#ef3e46">'+f+"</span>")),alert(s),!1)}})},sendInvitesRevokeAccess:function(){t("body.sent-invites #member-invites-table").length&&t("body.sent-invites #member-invites-table tr td span a.revoked-access").click(function(e){e.preventDefault();var i=t(this).attr("data-name"),a=t(this).attr("id"),n=t(this).attr("data-revoke-access");if(!confirm(i))return!1;t.ajax({url:n,type:"post",data:{item_id:a},success:function(){window.location.reload(!0)}})})},toggleDisabledInput:function(){var e=t(this).attr("data-bp-disable-input");t(e).prop("disabled",!0)&&!t(this).hasClass("enabled")?(t(this).addClass("enabled").removeClass("disabled"),t(e).prop("disabled",!1)):t(e).prop("disabled",!1)&&t(this).hasClass("enabled")&&(t(this).removeClass("enabled").addClass("disabled"),t(e).attr("disabled","disabled"))},keyUp:function(e){var t=e.data;27===e.keyCode&&t.buttonRevertAll()},scopeQuery:function(e){var i,a=e.data,n=t(e.currentTarget).parent(),o="all",s=null,r="",d=null,l={};if(n.hasClass("no-ajax")||t(e.currentTarget).hasClass("no-ajax")||!n.attr("data-bp-scope"))return e;if(o=n.data("bp-scope"),i=n.data("bp-object"),!o||!i)return e;e.preventDefault();var c=a.getStorage("bp-"+i);void 0!==c.extras&&"notifications"!==i&&(d=c.extras),s=t("#buddypress").find('[data-bp-filter="'+i+'"]').first().val(),t('#buddypress [data-bp-search="'+i+'"] input[type=search]').length&&(r=t('#buddypress [data-bp-search="'+i+'"] input[type=search]').val()),n.hasClass("dynamic")&&n.find("a span").html(""),l={object:i,scope:o,filter:s,search_terms:r,page:1,extras:d},t('#buddypress [data-bp-member-type-filter="'+i+'"]').length?l.member_type_id=t('#buddypress [data-bp-member-type-filter="'+i+'"]').val():t('#buddypress [data-bp-group-type-filter="'+i+'"]').length&&(l.group_type=t('#buddypress [data-bp-group-type-filter="'+i+'"]').val()),a.objectRequest(l)},filterQuery:function(e){var i=e.data,a=t(e.target).data("bp-filter"),n="all",o=t(e.target).val(),s="",r=null,d=!1;if(!a)return e;t(i.objectNavParent+" [data-bp-object].selected").length&&(n=t(i.objectNavParent+" [data-bp-object].selected").data("bp-scope")),t('#buddypress [data-bp-search="'+a+'"] input[type=search]').length&&(s=t('#buddypress [data-bp-search="'+a+'"] input[type=search]').val()),"friends"===a&&(a="members");var l=i.getStorage("bp-"+a);void 0!==l.extras&&"notifications"!==a&&(d=l.extras),"members"===a?i.objectRequest({object:a,scope:n,filter:o,search_terms:s,page:1,extras:d,template:r,member_type_id:t('#buddypress [data-bp-member-type-filter="'+a+'"]').val()}):"groups"===a?i.objectRequest({object:a,scope:n,filter:o,search_terms:s,page:1,extras:d,template:r,group_type:t('#buddypress [data-bp-group-type-filter="'+a+'"]').val()}):i.objectRequest({object:a,scope:n,filter:o,search_terms:s,page:1,extras:d,template:r})},typeGroupFilterQuery:function(e){var i=e.data,a=t(e.target).data("bp-group-type-filter"),n="all",o=null,s={},r=null,d="",l=null;if(!a)return e;s=i.getStorage("bp-"+a),void 0!==s.extras&&"notifications"!==a&&(r=s.extras),t('#buddypress [data-bp-filter="'+a+'"]').length&&(void 0!==s.filter?(o=s.filter,t('#buddypress [data-bp-filter="'+a+'"] option[value="'+o+'"]').prop("selected",!0)):"-1"!==t('#buddypress [data-bp-filter="'+a+'"]').val()&&"0"!==t('#buddypress [data-bp-filter="'+a+'"]').val()&&(o=t('#buddypress [data-bp-filter="'+a+'"]').val())),t(i.objectNavParent+" [data-bp-object].selected").length&&(n=t(i.objectNavParent+" [data-bp-object].selected").data("bp-scope")),t('#buddypress [data-bp-search="'+a+'"] input[type=search]').length&&(d=t('#buddypress [data-bp-search="'+a+'"] input[type=search]').val()),i.objectRequest({object:a,scope:n,filter:o,search_terms:d,page:1,template:l,extras:r,group_type:t('#buddypress [data-bp-group-type-filter="'+a+'"]').val()})},typeMemberFilterQuery:function(e){var i=e.data,a=t(e.target).data("bp-member-type-filter"),n="all",o=null,s={},r=null,d="",l=null;if(!a)return e;"friends"===a&&(a="members"),s=i.getStorage("bp-"+a),void 0!==s.extras&&"notifications"!==a&&(r=s.extras),t('#buddypress [data-bp-filter="'+a+'"]').length&&(void 0!==s.filter?(o=s.filter,t('#buddypress [data-bp-filter="'+a+'"] option[value="'+o+'"]').prop("selected",!0)):"-1"!==t('#buddypress [data-bp-filter="'+a+'"]').val()&&"0"!==t('#buddypress [data-bp-filter="'+a+'"]').val()&&(o=t('#buddypress [data-bp-filter="'+a+'"]').val())),t(i.objectNavParent+" [data-bp-object].selected").length&&(n=t(i.objectNavParent+" [data-bp-object].selected").data("bp-scope")),t('#buddypress [data-bp-search="'+a+'"] input[type=search]').length&&(d=t('#buddypress [data-bp-search="'+a+'"] input[type=search]').val()),i.objectRequest({object:a,scope:n,filter:o,search_terms:d,page:1,template:l,extras:r,member_type_id:t('#buddypress [data-bp-member-type-filter="'+a+'"]').val()})},searchQuery:function(e){var i,a=e.data,n="all",o=null,s=null,r="",d=!1;if(t(e.delegateTarget).hasClass("no-ajax")||void 0===t(e.delegateTarget).data("bp-search"))return e;e.preventDefault(),i=t(e.delegateTarget).data("bp-search"),o=t("#buddypress").find('[data-bp-filter="'+i+'"]').first().val(),r=t(e.delegateTarget).find("input[type=search]").first().val(),t(a.objectNavParent+" [data-bp-object]").length&&(n=t(a.objectNavParent+' [data-bp-object="'+i+'"].selected').data("bp-scope"));var l=a.getStorage("bp-"+i);void 0!==l.extras&&"notifications"!==i&&(d=l.extras),a.objectRequest({object:i,scope:n,filter:o,search_terms:r,page:1,extras:d,template:s})},showSearchSubmit:function(e){t(e.delegateTarget).find("[type=submit]").addClass("bp-show"),t("[type=submit]").hasClass("bp-hide")&&t("[type=submit]").removeClass("bp-hide")},resetSearch:function(e){t(e.target).val()?t(e.delegateTarget).find("[type=submit]").show():t(e.delegateTarget).submit()},buttonAction:function(e){var i=e.data,a=t(e.currentTarget),n=a.data("bp-btn-action"),o=a.data("bp-nonce"),s=a.closest("[data-bp-item-id]"),r=s.data("bp-item-id"),d=a.closest(".list-wrap"),l=s.data("bp-item-component"),c="",p=s.data("bp-used-to-component");if(!n||!r||!l)return e;if(e.preventDefault(),a.hasClass("bp-toggle-action-button"))return t(document.body).hasClass("buddyboss-theme")&&void 0!==a.data("balloon")?a.attr("data-balloon",a.data("title")):a.text(a.data("title")),a.removeClass("bp-toggle-action-button"),a.addClass("bp-toggle-action-button-clicked"),!1;if(void 0!==a.data("only-admin"))return void 0!==BP_Nouveau.only_admin_notice&&window.alert(BP_Nouveau.only_admin_notice),!1;if("is_friend"!==n&&(void 0!==BP_Nouveau[n+"_confirm"]&&!1===window.confirm(BP_Nouveau[n+"_confirm"])||a.hasClass("pending")))return!1;var u=t(".bb-leave-group-popup"),b=t(a).data("bb-group-name"),m=t(a).data("bb-group-link");if("leave_group"===n&&"true"!==t(a).attr("data-popup-shown")){if(u.length){var f=u.find(".bb-leave-group-content"),v=!!s.hasClass("has-child");return f.html(v?BP_Nouveau.parent_group_leave_confirm:BP_Nouveau.group_leave_confirm),v||f.find(".bb-group-name").html('<a href="'+m+'">'+b+"</a>"),t("body").find('[data-current-anchor="true"]').removeClass("bp-toggle-action-button bp-toggle-action-button-hover").addClass("bp-toggle-action-button-clicked"),u.show(),t(a).attr("data-current-anchor","true"),t(a).attr("data-popup-shown","true"),!1}}else t("body").find('[data-popup-shown="true"]').attr("data-popup-shown","false"),t("body").find('[data-current-anchor="true"]').attr("data-current-anchor","false"),u.find(".bb-leave-group-content .bb-group-name").html(""),u.hide();var h={};t(a).closest("#item-header").length?h=t("#item-header .bb-remove-connection"):t(a).closest('.members[data-bp-list="members"]').length?h=t('.members[data-bp-list="members"] .bb-remove-connection'):t(a).closest('.group_members[data-bp-list="group_members"]').length&&(h=t('.group_members[data-bp-list="group_members"] .bb-remove-connection'));var g=t(a).data("bb-user-name"),_=t(a).data("bb-user-link");if("is_friend"===n&&"opened"!==t(a).attr("data-popup-shown")){if(h.length)return h.find(".bb-remove-connection-content .bb-user-name").html('<a href="'+_+'">'+g+"</a>"),t("body").find('[data-current-anchor="true"]').removeClass("bp-toggle-action-button bp-toggle-action-button-hover").addClass("bp-toggle-action-button-clicked"),h.show(),t(a).attr("data-current-anchor","true"),t(a).attr("data-popup-shown","opened"),!1}else t("body").find('[data-popup-shown="opened"]').attr("data-popup-shown","closed"),t("body").find('[data-current-anchor="true"]').attr("data-current-anchor","false"),h.length&&(h.find(".bb-remove-connection-content .bb-user-name").html(""),h.hide());c=o?i.getLinkParams(o,"_wpnonce"):void 0===a.prop("href")?i.getLinkParams(a.attr("href"),"_wpnonce"):i.getLinkParams(a.prop("href"),"_wpnonce");var y={is_friend:"remove_friend",not_friends:"add_friend",pending:"withdraw_friendship",accept_friendship:"accept_friendship",reject_friendship:"reject_friendship"};"members"===l&&void 0!==y[n]&&(n=y[n],l="friends");var w={not_following:"follow",following:"unfollow"};"members"===l&&void 0!==w[n]&&(n=w[n],l="follow"),a.addClass("pending loading");var k="";t(document.body).hasClass("directory")&&t(document.body).hasClass("members")||t(document.body).hasClass("group-members")?k="directory":t(document.body).hasClass("bp-user")&&(k="single");var C="primary",P="single"===k?a.closest(".header-dropdown"):a.closest(".footer-button-wrap");void 0!==P.length&&P.length>0&&(C="secondary"),p=void 0===p?l:p,i.ajax({action:l+"_"+n,item_id:r,current_page:k,button_clicked:C,component:p,_wpnonce:c},l,!0).done(function(e){if(!1===e.success)d.prepend(e.data.feedback),a.removeClass("pending loading"),s.find(".bp-feedback").length?(s.find(".bp-feedback").show(),s.find(".bp-feedback").fadeOut(6e3)):"groups"===l&&"join_group"===n&&(s.append(e.data.feedback),s.find(".bp-feedback").fadeOut(6e3)),void 0!==e.data.is_group_subscription&&!0===e.data.is_group_subscription&&void 0!==e.data.feedback&&t(document).trigger("bb_trigger_toast_message",["","<div>"+e.data.feedback+"</div>","error",null,!0]);else{if("groups"===l){if(void 0!==e.data.is_group&&e.data.is_group)return void 0!==e.data.group_url&&e.data.group_url?window.location=e.data.group_url:window.location.reload();void 0!==e.data.is_group&&e.data.is_parent&&t("#buddypress .groups-nav li.selected a").trigger("click"),void 0!==e.data.is_group_subscription&&!0===e.data.is_group_subscription&&void 0!==e.data.feedback&&t(document).trigger("bb_trigger_toast_message",["","<div>"+e.data.feedback+"</div>","info",null,!0])}if(t("#friends-personal-li").length){var o=t("#friends-personal-li a span"),r=t("#friends-personal-li a");void 0!==e.data.is_user&&e.data.is_user&&void 0!==e.data.friend_count?"0"!==e.data.friend_count?o.length?t(o).html(e.data.friend_count):t(r).append('<span class="count">'+e.data.friend_count+"</span>"):t(o).hide():void 0!==e.data.friend_count&&("0"!==e.data.friend_count?o.length?t(o).html(e.data.friend_count):t(r).append('<span class="count">'+e.data.friend_count+"</span>"):t(o).hide())}if(void 0!==e.data.is_user&&e.data.is_user)return a.parent().html(e.data.feedback),void s.fadeOut(1500);if(void 0!==e.data.is_user&&!e.data.is_user&&void 0!==e.data.group_url&&e.data.group_url)return window.location=e.data.group_url;if(t(i.objectNavParent+' [data-bp-scope="personal"]').length){var c=Number(t(i.objectNavParent+' [data-bp-scope="personal"] span').html())||0;-1!==t.inArray(n,["leave_group","remove_friend"])?c-=1:-1!==t.inArray(n,["join_group"])&&(c+=1),c<0&&(c=0),t(i.objectNavParent+' [data-bp-scope="personal"] span').html(c)}"follow"===l&&s.find(".followers-wrap").length>0&&void 0!==e.data.count&&""!==e.data.count&&s.find(".followers-wrap").replaceWith(e.data.count),a.parent().replaceWith(e.data.contents)}}).fail(function(){if(["unsubscribe","subscribe"].includes(n)){var e=t(a).data("bb-group-name");25<e.length&&(e=e.substring(0,25)+"...");var i="<div>"+BP_Nouveau.subscriptions.error+"<strong>"+e+"</strong>.</div>";"subscribe"===n&&(i="<div>"+BP_Nouveau.subscriptions.subscribe_error+"<strong>"+e+"</strong></div>"),jQuery(document).trigger("bb_trigger_toast_message",["",i,"error",null,!0])}a.removeClass("pending loading")})},buttonRevert:function(e){var i=t(e.currentTarget);i.hasClass("bp-toggle-action-button-clicked")&&!i.hasClass("loading")&&(t(document.body).hasClass("buddyboss-theme")&&void 0!==i.data("balloon")?i.attr("data-balloon",i.data("title-displayed")):i.text(i.data("title-displayed")),i.removeClass("bp-toggle-action-button-clicked"),i.addClass("bp-toggle-action-button"))},buttonHover:function(e){var i=t(e.currentTarget),a=i.data("bp-btn-action"),n=i.closest("[data-bp-item-id]"),o=n.data("bp-item-id"),s=n.data("bp-item-component");return a&&o&&s?(e.preventDefault(),i.hasClass("bp-toggle-action-button")?i.hasClass("group-subscription")&&void 0!==i.data("title")&&void 0!==i.data("title-displayed")&&0===i.data("title").replace(/<(.|\n)*?>/g,"").length&&0===i.data("title-displayed").replace(/<(.|\n)*?>/g,"").length?(i.removeClass("bp-toggle-action-button"),i.addClass("bp-toggle-action-button-hover"),!1):(t(document.body).hasClass("buddyboss-theme")&&void 0!==i.data("balloon")?(i.hasClass("following")||i.attr("data-balloon",i.data("title").replace(/<(.|\n)*?>/g,"")),i.find("span").html(i.data("title")),i.html(i.data("title"))):i.html(i.data("title")),i.removeClass("bp-toggle-action-button"),i.addClass("bp-toggle-action-button-hover"),!1):void 0):e},buttonHoverout:function(e){var i=t(e.currentTarget);if(i.hasClass("bp-toggle-action-button-hover")&&!i.hasClass("loading")){if(i.hasClass("group-subscription")&&void 0!==i.data("title")&&void 0!==i.data("title-displayed")&&0===i.data("title").replace(/<(.|\n)*?>/g,"").length&&0===i.data("title-displayed").replace(/<(.|\n)*?>/g,"").length)return i.removeClass("bp-toggle-action-button-hover"),i.addClass("bp-toggle-action-button"),!1;t(document.body).hasClass("buddyboss-theme")&&void 0!==i.data("balloon")?(i.hasClass("following")||i.attr("data-balloon",i.data("title-displayed").replace(/<(.|\n)*?>/g,"")),i.find("span").html(i.data("title-displayed")),i.html(i.data("title-displayed"))):i.html(i.data("title-displayed")),i.removeClass("bp-toggle-action-button-hover"),i.addClass("bp-toggle-action-button")}},awaitingButtonHover:function(e){var i=t(e.currentTarget);if(e.preventDefault(),i.hasClass("bp-toggle-action-button"))return t(document.body).hasClass("buddyboss-theme")&&void 0!==i.data("balloon")?(i.hasClass("following")||i.attr("data-balloon",i.data("title").replace(/<(.|\n)*?>/g,"")),i.find("span").html(i.data("title")),i.html(i.data("title"))):i.html(i.data("title")),i.removeClass("bp-toggle-action-button"),i.addClass("bp-toggle-action-button-hover"),!1},awaitingButtonHoverout:function(e){var i=t(e.currentTarget);i.hasClass("bp-toggle-action-button-hover")&&!i.hasClass("loading")&&(t(document.body).hasClass("buddyboss-theme")&&void 0!==i.data("balloon")?(i.hasClass("following")||i.attr("data-balloon",i.data("title-displayed").replace(/<(.|\n)*?>/g,"")),i.find("span").html(i.data("title-displayed")),i.html(i.data("title-displayed"))):i.html(i.data("title-displayed")),i.removeClass("bp-toggle-action-button-hover"),i.addClass("bp-toggle-action-button"))},leaveGroupAction:function(e){e.preventDefault(),t("body").find('[data-current-anchor="true"]').removeClass("bp-toggle-action-button bp-toggle-action-button-hover").addClass("bp-toggle-action-button-clicked"),t("body").find('[data-current-anchor="true"]').trigger("click")},leaveGroupClose:function(e){e.preventDefault();var i=t(e.currentTarget),a=t(i).closest(".bb-leave-group-popup");t("body").find('[data-current-anchor="true"]').attr("data-current-anchor","false"),t("body").find('[data-popup-shown="true"]').attr("data-popup-shown","false"),a.find(".bb-leave-group-content .bb-group-name").html(""),a.hide()},removeConnectionAction:function(e){e.preventDefault(),t("body").find('[data-current-anchor="true"]').removeClass("bp-toggle-action-button bp-toggle-action-button-hover").addClass("bp-toggle-action-button-clicked"),t("body").find('[data-current-anchor="true"]').trigger("click")},removeConnectionClose:function(e){e.preventDefault();var i=t(e.currentTarget),a=t(i).closest(".bb-remove-connection");t("body").find('[data-current-anchor="true"]').attr("data-current-anchor","false"),t("body").find('[data-popup-shown="opened"]').attr("data-popup-shown","closed"),a.find(".bb-remove-connection-content .bb-user-name").html(""),a.hide()},buttonRevertAll:function(){t.each(t("#buddypress [data-bp-btn-action]"),function(){t(this).hasClass("bp-toggle-action-button-clicked")&&!t(this).hasClass("loading")&&(t(document.body).hasClass("buddyboss-theme")&&void 0!==t(this).data("balloon")?t(this).attr("data-balloon",t(this).data("title-displayed")):t(this).text(t(this).data("title-displayed")),t(this).removeClass("bp-toggle-action-button-clicked"),t(this).addClass("bp-toggle-action-button"),t(this).trigger("blur"))})},addRemoveInvite:function(e){var i=e.currentTarget,a=t(i).closest("tbody");if(t(i).hasClass("field-actions-remove")){if(!(t(this).closest("tr").siblings().length>1))return;t(this).closest("tr").remove(),a.find(".field-actions-add.disabled").removeClass("disabled")}else if(t(i).hasClass("field-actions-add")){if(t(i).hasClass("disabled"))return;var n=t(this).closest("tr").prev("tr").html();t("<tr>"+n+"</tr>").insertBefore(t(this).closest("tr")),a.find("tr").length>20&&t(i).addClass("disabled")}var o=a.find("tr:not(:last-child)");t.each(o,function(e){t(this).find(".field-name > input").attr("name","invitee["+e+"][]"),t(this).find(".field-name > input").attr("id","invitee_"+e+"_title"),t(this).find(".field-email > input").attr("name","email["+e+"][]"),t(this).find(".field-email > input").attr("id","email_"+e+"_email"),t(this).find(".field-member-type > select").attr("name","member-type["+e+"][]"),t(this).find(".field-member-type > select").attr("id","member_type_"+e+"_member_type")})},closeNotice:function(e){var i=t(e.currentTarget);e.preventDefault(),"clear"===i.data("bp-close")&&(void 0!==t.cookie("bp-message")&&t.removeCookie("bp-message"),void 0!==t.cookie("bp-message-type")&&t.removeCookie("bp-message-type")),i.closest(".bp-feedback").hasClass("bp-sitewide-notice")&&bp.Nouveau.ajax({action:"messages_dismiss_sitewide_notice"},"messages"),i.closest(".bp-feedback").remove()},paginateAction:function(e){var i,a,n,o=e.data,s=t(e.currentTarget),r=null,d=null,l=null,c=null;if(i=s.closest("[data-bp-pagination]").data("bp-pagination")||null,null===i)return e;e.preventDefault(),a=t(e.delegateTarget).data("bp-list")||null,null!==a&&(n=o.getStorage("bp-"+a),void 0!==n.scope&&(r=n.scope),void 0!==n.filter&&(d=n.filter),void 0!==n.extras&&(c=n.extras)),null!==a&&(n=o.getStorage("bp-"+a),void 0!==n.scope&&(r=n.scope),void 0!==n.filter&&(d=n.filter),void 0!==n.extras&&(c=n.extras)),t('#buddypress [data-bp-search="'+a+'"] input[type=search]').length&&(l=t('#buddypress [data-bp-search="'+a+'"] input[type=search]').val());var p={object:a,scope:r,filter:d,search_terms:l,extras:c,caller:s.closest("[data-bp-pagination]").hasClass("bottom")?"pag-bottom":"",page:o.getLinkParams(s.prop("href"),i)||1};t("#buddypress [data-bp-group-type-filter]").length&&(p.group_type=t("#buddypress [data-bp-group-type-filter]").val()),t("#buddypress [data-bp-member-type-filter]").length&&(p.member_type_id=t("#buddypress [data-bp-member-type-filter]").val()),o.objectRequest(p)},enableSubmitOnLegalAgreement:function(){t("body #buddypress #register-page #signup-form #legal_agreement").length&&(t("body #buddypress #register-page #signup-form .submit #signup_submit").prop("disabled",!0),t(document).on("change","body #buddypress #register-page #signup-form #legal_agreement",function(){t(this).prop("checked")?t("body #buddypress #register-page #signup-form .submit #signup_submit").prop("disabled",!1):t("body #buddypress #register-page #signup-form .submit #signup_submit").prop("disabled",!0)}))},registerPopUp:function(){t(".popup-modal-register").length&&t(".popup-modal-register").magnificPopup({type:"inline",preloader:!1,fixedBgPos:!0,fixedContentPos:!0}),t(".popup-modal-dismiss").length&&t(".popup-modal-dismiss").click(function(e){e.preventDefault(),t.magnificPopup.close()})},loginPopUp:function(){t(".popup-modal-login").length&&t(".popup-modal-login").magnificPopup({type:"inline",preloader:!1,fixedBgPos:!0,fixedContentPos:!0}),t(".popup-modal-dismiss").length&&t(".popup-modal-dismiss").click(function(e){e.preventDefault(),t.magnificPopup.close()})},threadListBlockPopup:function(e){e.preventDefault();var i=t(this).data("bp-content-id"),a=t(this).data("bp-content-type"),n=t(this).data("bp-nonce"),o=t(this).attr("href");if(void 0!==i&&void 0!==a&&void 0!==n){t(document).find(".bp-report-form-err").empty();var s=t(o);s.find(".bp-content-id").val(i),s.find(".bp-content-type").val(a),s.find(".bp-nonce").val(n)}t("#message-threads .block-member").length>0&&t("#message-threads .block-member").magnificPopup({items:{src:o,type:"inline"}}).magnificPopup("open")},threadListReportPopup:function(e){e.preventDefault();var i=t(this).data("bp-content-id"),a=t(this).data("bp-content-type"),n=t(this).data("bp-nonce"),o=t(this).attr("href"),s=t(this).attr("reported_type"),r=t(o);void 0!==i&&void 0!==a&&void 0!==n&&(t(document).find(".bp-report-form-err").empty(),r.find(".bp-content-id").val(i),r.find(".bp-content-type").val(a),r.find(".bp-nonce").val(n)),t("#message-threads .report-content").length>0&&(t("#bb-report-content .form-item-category").show(),"user_report"===a?t("#bb-report-content .form-item-category.content").hide():t("#bb-report-content .form-item-category.members").hide(),t('#bb-report-content .form-item-category:visible:first label input[type="radio"]').attr("checked",!0),t('#bb-report-content .form-item-category:visible label input[type="radio"]').length||(t("#report-category-other").attr("checked",!0),t("#report-category-other").trigger("click"),t('label[for="report-category-other"]').hide()),void 0!==s&&r.find(".bp-reported-type").text(s),t("#message-threads .report-content").magnificPopup({items:{src:o,type:"inline"}}).magnificPopup("open"))},reportPopUp:function(){t(".report-content, .block-member").length>0&&t(".report-content, .block-member").magnificPopup({type:"inline",midClick:!0,callbacks:{open:function(){console.log("called"),t("#notes-error").hide();var e=this.currItem.el.data("bp-content-id"),i=this.currItem.el.data("bp-content-type"),a=this.currItem.el.data("bp-nonce"),n=this.currItem.el.attr("reported_type");t("#bb-report-content .form-item-category").show(),"user_report"===i?t("#bb-report-content .form-item-category.content").hide():t("#bb-report-content .form-item-category.members").hide(),t('#bb-report-content .form-item-category:visible:first label input[type="radio"]').attr("checked",!0),t('#bb-report-content .form-item-category:visible label input[type="radio"]').length||(t("#report-category-other").attr("checked",!0),t("#report-category-other").trigger("click"),t('label[for="report-category-other"]').hide());var o=t("#content-report");if(o.find(".bp-reported-type").text(this.currItem.el.data("reported_type")),void 0!==n&&o.find(".bp-reported-type").text(n),void 0!==e&&void 0!==i&&void 0!==a){t(document).find(".bp-report-form-err").empty();var s=t(".mfp-content");s.find(".bp-content-id").val(e),s.find(".bp-content-type").val(i),s.find(".bp-nonce").val(a)}}}})},reportActions:function(){var e=this;t(document).on("click",".bb-cancel-report-content",function(e){e.preventDefault(),t("form#bb-report-content").trigger("reset"),t(this).closest(".moderation-popup").find(".bp-other-report-cat").closest(".form-item").addClass("bp-hide"),t(this).closest(".moderation-popup").find(".mfp-close").trigger("click")}),t(document).on("click","input[type=radio][name=report_category]",function(){"other"===this.value?t(this).closest(".moderation-popup").find(".bp-other-report-cat").closest(".form-item").removeClass("bp-hide"):t(this).closest(".moderation-popup").find(".bp-other-report-cat").closest(".form-item").addClass("bp-hide")}),t("#bb-report-content").submit(function(i){if(t("#report-category-other").is(":checked")&&""===t("#report-note").val())return t("#notes-error").show(),!1;t("#bb-report-content").find(".report-submit").addClass("loading"),t(".bp-report-form-err").empty();var a={action:"bp_moderation_content_report"};t.each(t(this).serializeArray(),function(e,t){a[t.name]=t.value}),t.post(BP_Nouveau.ajaxurl,a,function(a){a.success?(e.resetReportPopup(),e.changeReportButtonStatus(a.data),t("#bb-report-content").find(".report-submit").removeClass("loading"),t(".mfp-close").trigger("click"),jQuery(document).trigger("bb_trigger_toast_message",["",a.data.toast_message,"info",null,!0])):(t("#bb-report-content").find(".report-submit").removeClass("loading"),e.handleReportError(a.data.message.errors,i.currentTarget))})}),t("#bb-block-member").submit(function(i){t("#bb-block-member").find(".report-submit").addClass("loading"),t(".bp-report-form-err").empty();var a={action:"bp_moderation_block_member"};t.each(t(this).serializeArray(),function(e,t){a[t.name]=t.value}),t.post(BP_Nouveau.ajaxurl,a,function(a){a.success?(e.resetReportPopup(),e.changeReportButtonStatus(a.data),t("#bb-block-member").find(".report-submit").removeClass("loading"),t(".mfp-close").trigger("click"),a.data.redirect&&(location.href=a.data.redirect)):(t("#bb-block-member").find(".report-submit").removeClass("loading"),e.handleReportError(a.data.message.errors,i.currentTarget))})})},resetReportPopup:function(){t("form#bb-report-content").trigger("reset");var e=t(".mfp-content");e.find(".bp-content-id").val(""),e.find(".bp-content-type").val(""),e.find(".bp-nonce").val(""),e.find(".bp-report-form-err").empty()},changeReportButtonStatus:function(e){var i=this;t("[data-bp-content-id="+e.button.button_attr.item_id+"][data-bp-content-type="+e.button.button_attr.item_type+"]").each(function(){t(this).removeAttr("data-bp-content-id"),t(this).removeAttr("data-bp-content-type"),t(this).removeAttr("data-bp-nonce"),t(this).html(e.button.link_text),t(this).attr("class",e.button.button_attr.class),t(this).attr("reported_type",e.button.button_attr.reported_type),t(this).attr("href",e.button.button_attr.href),setTimeout(function(){i.reportedPopup()},1)})},reportedPopup:function(){t(".reported-content").length>0&&t(".reported-content").magnificPopup({type:"inline",midClick:!0,callbacks:{open:function(){var e=void 0!==this.currItem.el.attr("reported_type")?this.currItem.el.attr("reported_type"):this.currItem.el.data("reported_type");if(void 0!==e){var i=t("#reported-content");i.find(".bp-reported-type").text(e)}}}})},handleReportError:function(e,t){var i="";e.bp_moderation_missing_data?i=e.bp_moderation_missing_data:e.bp_moderation_already_reported?i=e.bp_moderation_already_reported:e.bp_moderation_missing_error?i=e.bp_moderation_missing_error:e.bp_moderation_invalid_access?i=e.bp_moderation_invalid_access:e.bp_moderation_invalid_item_id&&(i=e.bp_moderation_invalid_item_id),jQuery(t).closest(".bb-report-type-wrp").find(".bp-report-form-err").html(i)},togglePassword:function(){t(document).on("click",".bb-toggle-password, .bb-hide-pw",function(e){e.preventDefault();var i,a=t(this);i=a.hasClass("bb-hide-pw")?a.closest(".password-toggle").find("input"):a.next("input");var n=i.data("type")?i.data("type"):"text";a.toggleClass("bb-show-pass"),a.hasClass("bb-show-pass")?i.attr("type",n):i.attr("type","password")})},closePickersOnClick:function(e){var i=t(e.target);_.isUndefined(BP_Nouveau.media)||_.isUndefined(BP_Nouveau.media.emoji)||i.closest(".post-emoji").length||i.is(".emojioneemoji,.emojibtn")||t(".post-emoji.active, .emojionearea-button.active").removeClass("active")},closePickersOnEsc:function(e){"Escape"!==e.key&&27!==e.keyCode||_.isUndefined(BP_Nouveau.media)||_.isUndefined(BP_Nouveau.media.emoji)||t(".post-emoji.active, .emojionearea-button.active").removeClass("active")},lazyLoad:function(e){var i=t(e);if(i.length)for(var a=0;a<i.length;a++){var n=!1;try{t(i[a]).is(":in-viewport")&&(n=!0)}catch(e){console.log(e.message),!n&&i[a].getBoundingClientRect().top<=(window.innerHeight||document.documentElement.clientHeight)+window.scrollY&&(n=!0)}n&&i[a].getAttribute("data-src")&&(i[a].src=i[a].getAttribute("data-src"),i[a].removeAttribute("data-src"),t(i[a]).on("load",function(){t(this).removeClass("lazy")}),t(document).trigger("bp_nouveau_lazy_load",{element:i[a]}))}},coverPhotoCropper:function(e){var i,a,n,o,s;if(t(e.currentTarget).hasClass("position-change-cover-image")){var r=t(e.currentTarget).closest("#cover-image-container").find(".header-cover-img").height(),d=(r-t(e.currentTarget).closest("#header-cover-image").height())/2,l=t(e.currentTarget);if(r<=l.closest("#header-cover-image").height())return t("body").append('<div id="cover-photo-alert" style="display: block;" class="open-popup"><transition name="modal"><div class="modal-mask bb-white bbm-model-wrap"><div class="modal-wrapper"><div id="boss-media-create-album-popup" class="modal-container has-folderlocationUI"><header class="bb-model-header"><h4>'+BP_Nouveau.media.cover_photo_size_error_header+'</h4><a class="bb-model-close-button" id="bp-media-create-folder-close" href="#"><span class="dashicons dashicons-no-alt"></span></a></header><div class="bb-field-wrap"><p>'+BP_Nouveau.media.cover_photo_size_error_description+"</p></div></div></div></div></transition></div>"),void e.preventDefault();a=t(e.currentTarget).closest("#header-cover-image").height(),n=t(e.currentTarget).closest("#header-cover-image").width(),o=Number(t(e.currentTarget).closest("#cover-image-container").find(".header-cover-img").css("top").replace("px","")),s=t(e.currentTarget).closest("#header-cover-image").width()/t(e.currentTarget).closest("#header-cover-image").find(".header-cover-reposition-wrap img")[0].width,l.closest("#cover-image-container").find(".header-cover-reposition-wrap").show(),i=t(".header-cover-reposition-wrap img"),i.guillotine({width:n,height:a,eventOnChange:"guillotinechange",init:{scale:s,y:o&&t(e.currentTarget).closest("#header-cover-image").hasClass("has-position")?-o:d,w:n,h:a}}),i.on("guillotinechange",function(e,t){l.closest("#cover-image-container").find(".header-cover-img").attr("data-top",-t.y)})}else if(t(e.currentTarget).hasClass("cover-image-save")){var c=t(e.currentTarget),p=t(e.currentTarget).closest("#cover-image-container").find(".header-cover-img");c.addClass("loading"),t.post(BP_Nouveau.ajaxurl,{action:"save_cover_position",position:p.attr("data-top")}).done(function(e){e.success&&e.data&&""!==e.data.content?(c.removeClass("loading"),c.closest("#cover-image-container").find(".header-cover-reposition-wrap").hide(),c.closest("#header-cover-image:not(.has-position)").addClass("has-position"),p.css({top:e.data.content+"px"})):(c.removeClass("loading"),c.closest("#cover-image-container").find(".header-cover-reposition-wrap").hide())}).fail(function(){c.removeClass("loading"),c.closest("#cover-image-container").find(".header-cover-reposition-wrap").hide()})}else t(e.currentTarget).hasClass("cover-image-cancel")&&(i=t(".header-cover-reposition-wrap img"),i.guillotine({width:0,height:0,init:{scale:1,y:0,w:0,h:0}}),i.guillotine("remove"),t(e.currentTarget).closest("#cover-image-container").find(".header-cover-reposition-wrap").hide(),t(e.currentTarget).closest("#cover-image-container").find(".header-cover-img").attr("data-top",""));e.preventDefault()},coverPhotoCropperAlert:function(e){e.preventDefault(),t("#cover-photo-alert").remove()},toggleMoreOption:function(e){t(e.target).hasClass("bb_more_options_action")||t(e.target).parent().hasClass("bb_more_options_action")?(e.preventDefault(),t(e.target).closest(".bb_more_options").find(".bb_more_options_list").hasClass("is_visible")?t(".bb_more_options").find(".bb_more_options_list").removeClass("is_visible"):(t(".bb_more_options").find(".bb_more_options_list").removeClass("is_visible"),
t(e.target).closest(".bb_more_options").find(".bb_more_options_list").addClass("is_visible"))):(t(".bb_more_options").find(".bb_more_options_list").removeClass("is_visible"),t(".optionsOpen").removeClass("optionsOpen"))},getVideoThumb:function(e,i){var a=new FileReader;if(a.onload=function(){var n=new Blob([a.result],{type:e.type}),o=URL.createObjectURL(n),s=document.createElement("video"),r=null;s.src=o;var d=0,l=setInterval(function(){if(s.readyState>0){r=s.duration.toFixed(2);var a=function(){n()&&(s.removeEventListener("timeupdate",a),s.pause())},n=function(){var a=document.createElement("canvas");a.width=s.videoWidth,a.height=s.videoHeight,a.getContext("2d").drawImage(s,0,0,a.width,a.height);var n=a.toDataURL(),r=n.length>5e4;if(r){var c=document.createElement("img");c.src=n,e.previewElement?(t(e.previewElement).find(i).find("img").length?t(e.previewElement).find(i).find("img").attr("src",n):t(e.previewElement).find(i).append(c),t(e.previewElement).closest(".dz-preview").addClass("dz-has-thumbnail")):t(i).find("img").length?t(i).find("img").attr("src",n):t(i).append(c),URL.revokeObjectURL(o)}else d>=2&&(t(e.previewElement).closest(".dz-preview").addClass("dz-has-no-thumbnail"),clearInterval(l)),d++;return r};s.addEventListener("timeupdate",a),s.preload="metadata",s.src=o,s.muted=!0,s.playsInline=!0,null!=r&&(s.currentTime=Math.floor(r)),s.play(),clearInterval(l)}d>=2&&(t(e.previewElement).closest(".dz-preview").addClass("dz-has-no-thumbnail"),clearInterval(l)),d++},500)},e.dataURL){var n=new XMLHttpRequest;n.open("GET",e.dataURL,!0),n.responseType="blob",n.onload=function(){if(200==this.status){var e=this.response;a.readAsArrayBuffer(e)}},n.send()}else a.readAsArrayBuffer(e)},bbWidgetMoreFollowing:function(e){var i=t(e.currentTarget),a=i.attr("href"),n=a.split("#");if(n.length>1){var o=n.pop();if(o&&t('[data-bp-scope="'+o+'"]').length>0)return t('[data-bp-scope="'+o+'"] a').trigger("click"),!1}},toggleAccordion:function(){var e=t(this).closest(".bb-accordion");"true"==e.find(".bb-accordion_trigger").attr("aria-expanded")?(e.find(".bb-accordion_trigger").attr("aria-expanded","false"),e.find(".bb-icon-angle-up").removeClass("bb-icon-angle-up").addClass("bb-icon-angle-down")):(e.find(".bb-accordion_trigger").attr("aria-expanded","true"),e.find(".bb-icon-angle-down").removeClass("bb-icon-angle-down").addClass("bb-icon-angle-up")),e.toggleClass("is_closed"),e.find(".bb-accordion_panel").slideToggle()},mediumEditorButtonsWarp:function(e){if(!e.hasClass("wrappingInitialised")){e.addClass("wrappingInitialised");var i=0;e.find(".medium-editor-toolbar-actions > li").each(function(){i+=t(this).outerWidth()}),i>e.width()-10?(e.data("childerWith",i),i>e.width()&&(0===e.find(".medium-editor-toolbar-actions .medium-editor-action-more").length&&e.find(".medium-editor-toolbar-actions").append('<li class="medium-editor-action-more"><button class="medium-editor-action medium-editor-action-more-button"><b></b></button><ul></ul></li>'),e.find(".medium-editor-action-more").show(),i+=e.find(".medium-editor-toolbar-actions .medium-editor-action-more").outerWidth(),t(e.find(".medium-editor-action").get().reverse()).each(function(){t(this).hasClass("medium-editor-action-more-button")||i>e.width()&&(i-=t(this).outerWidth(),e.find(".medium-editor-action-more > ul").prepend(t(this).parent()))}))):e.find(".medium-editor-toolbar-actions .medium-editor-action-more").length&&(t(e.find(".medium-editor-action-more ul > li")).each(function(){i+35<e.width()&&(i+=t(this).outerWidth(),t(this).insertBefore(e.find(".medium-editor-action-more")))}),0===e.find(".medium-editor-action-more ul > li").length&&e.find(".medium-editor-action-more").hide()),t(e).find(".medium-editor-action-more-button").on("click",function(e){e.preventDefault(),t(this).parent(".medium-editor-action-more").toggleClass("active")}),t(e).find(".medium-editor-action-more ul .medium-editor-action").on("click",function(e){e.preventDefault(),t(this).closest(".medium-editor-action-more").toggleClass("active")}),t(window).one("resize",function(){e.removeClass("wrappingInitialised"),t(e).find(".medium-editor-action-more ul .medium-editor-action").unbind("click")})}},isURL:function(e){var i=/^(http:\/\/www\.|https:\/\/www\.|http:\/\/|https:\/\/)?[a-z0-9]+([\-\.]{1}[a-z0-9]+)*\.[a-z]{2,24}(:[0-9]{1,5})?(\/.*)?$/;return i.test(t.trim(e))},closeActionPopup:function(e){e.preventDefault(),t(this).closest(".bb-action-popup").hide()},directorySearchInput:function(){if(t(this).val()!==t(this).data("last-value")&&(""!==t(this).val()||void 0!==t(this).data("last-value"))){t(this).data("last-value",t(this).val());var e=t(this).closest(".search-form-has-reset"),i=e.find(".search-form_reset");t(this).val().length>0?i.show():(i.hide(),e.hasClass("bp-invites-search-form")&&(e.find('input[type="search"]').val(""),e.find('input[type="search"]').trigger(t.Event("search")))),t(this).hasClass("ui-autocomplete-input")||e.find(".search-form_submit").trigger("click")}},resetDirectorySearch:function(e){e.preventDefault();var i=t(this).closest("form");i.filter(".bp-messages-search-form, .bp-dir-search-form").length>0?(i.find('input[type="search"]').val(""),i.find(".search-form_submit").trigger("click")):i.find("#bbp_search").val(""),t(this).hide(),i.hasClass("bp-invites-search-form")&&(i.find('input[type="search"]').val(""),i.find('input[type="search"]').trigger(t.Event("search")))},showActionPopup:function(e){e.preventDefault(),t(t(e.currentTarget).attr("href")).show()},profileNotificationSetting:function(){var e=this;e.profileNotificationSettingInputs([".email",".web",".app"]),t(".notification_info .notification_learn_more").click(function(e){e.preventDefault(),t(this).find("a span").toggleClass(function(){return t(this).hasClass("bb-icon-chevron-down")?"bb-icon-chevron-up":"bb-icon-chevron-down"}),t(this).toggleClass("show").parent().find(".notification_type").toggleClass("show")}),t(".main-notification-settings").each(function(){e.NotificationMobileDropdown(t(this).find("tr:not( .notification_heading )"))}),t(document).on("click",".bb-mobile-setting ul li",function(i){i.preventDefault(),t(this).find("input").is(":checked")?(t(this).find("input").prop("checked",!1),t(t("input#"+t(this).find("label").attr("data-for"))).trigger("click")):(t(this).find("input").prop("checked",!0),t(t("input#"+t(this).find("label").attr("data-for"))).trigger("click")),e.NotificationMobileDropdown(t(this).closest("tr"))}),t(document).on("click",".bb-mobile-setting .bb-mobile-setting-anchor",function(){t(this).parent().toggleClass("active"),t(".bb-mobile-setting").not(t(this).parent()).removeClass("active")}),t(document).on("click",function(e){t(e.target).hasClass("bb-mobile-setting-anchor")||t(".bb-mobile-setting").removeClass("active")})},xProfileBlock:function(){t(".profile-fields .field_type_socialnetworks").each(function(){t(this).closest(".bp-widget").addClass("social")})},profileNotificationSettingInputs:function(e){for(var i=0;i<e.length;i++)(function(i){t(document).on("click",".main-notification-settings th"+e[i]+' input[type="checkbox"]',function(){t(this).is(":checked")?(t(".main-notification-settings").find("td"+e[i]).removeClass("disabled").find("input").prop("disabled",!1),t(".main-notification-settings").find(".bb-mobile-setting li"+e[i]).removeClass("disabled").find("input").prop("disabled",!1)):(t(".main-notification-settings").find("td"+e[i]).addClass("disabled").find("input").prop("disabled",!0),t(".main-notification-settings").find(".bb-mobile-setting li"+e[i]).addClass("disabled").find("input").prop("disabled",!0)),bp.Nouveau.NotificationMobileDropdown(t(this).closest("#settings-form").find("tr:not( .notification_heading )"))})})(i)},NotificationMobileDropdown:function(e){var i=t(".main-notification-settings").data("text-all"),a=t(".main-notification-settings").data("text-none");e.each(function(){var e="",n="",o=t(this).find("td").length?"td":"th",s=0;t(this).find(o+":not(:first-child)").each(function(){if(t(this).find('input[type="checkbox"]').length){var i=t(this).find("label").text(),a=t(this).find("input").is(":checked")?"checked":"",o=t(this).hasClass("disabled")?" disabled":"";n+='<li class="'+i.toLowerCase()+o+'"><input type="checkbox" class="bs-styled-checkbox" '+a+' /><label data-for="'+t(this).find('input[type="checkbox"]').attr("id")+'">'+i+"</label></li>"}t(this).hasClass("disabled")||t(this).find("input:checked").length&&(e+=""===e?t(this).find('input[type="checkbox"] + label').text().trim():", "+t(this).find('input[type="checkbox"] + label').text().trim(),s++)}),e=s===t(this).find(o+':not(:first-child) input[type="checkbox"]').length?1==t(this).find(o+':not(:first-child) input[type="checkbox"]').length?e:i:""===e?a:e,0===t(this).find(o+":first-child .bb-mobile-setting").length?t(this).find(o+":first-child").append('<div class="bb-mobile-setting"><span class="bb-mobile-setting-anchor">'+e+"</span><ul></ul></div>"):t(this).find(o+":first-child .bb-mobile-setting .bb-mobile-setting-anchor").text(e),t(this).find(o+":first-child .bb-mobile-setting ul").html(""),t(this).find(o+":first-child .bb-mobile-setting ul").append(n)})},dropZoneGlobalProgress:function(e){0==t(e.element).find(".dz-global-progress").length&&(t(e.element).append('<div class="dz-global-progress"><div class="dz-progress-bar-full"><span class="dz-progress"></span></div><p></p><span class="bb-icon-f bb-icon-times dz-remove-all"></span></div>'),t(e.element).addClass("dz-progress-view"),t(e.element).find(".dz-remove-all").click(function(){t.each(e.files,function(t,i){e.removeFile(i)})}));var i="",a=0,n=0;1==e.files.length?(t(e.element).addClass("dz-single-view"),i="Uploading <strong>"+e.files[0].name+"</strong>",a=e.files[0].upload.progress):(t(e.element).removeClass("dz-single-view"),n=0,t.each(e.files,function(e,t){n+=t.upload.progress}),a=n/e.files.length,i="Uploading <strong>"+e.files.length+" files</strong>"),t(e.element).find(".dz-global-progress .dz-progress").css("width",a+"%"),t(e.element).find(".dz-global-progress > p").html(i)},userPresenceStatus:function(){window.bb_is_user_active=!0;var e=1e3*parseInt(BB_Nouveau_Presence.idle_inactive_span);bp.Nouveau.userPresenceChecker(e),""!==BB_Nouveau_Presence.heartbeat_enabled&&parseInt(BB_Nouveau_Presence.presence_interval)<=60?(t(document).on("heartbeat-send",function(e,t){if(void 0!==window.bb_is_user_active&&!0===window.bb_is_user_active){var i=bp.Nouveau.getPageUserIDs();t.presence_users=i.join(",")}}),t(document).on("heartbeat-tick",function(e,t){t.users_presence&&bp.Nouveau.updateUsersPresence(t.users_presence)})):setInterval(function(){var e={};if(void 0!==window.bb_is_user_active&&!0===window.bb_is_user_active&&(e.ids=bp.Nouveau.getPageUserIDs()),void 0!==e.ids&&void 0!==e.ids.length&&0<e.ids.length){var i="1"===BB_Nouveau_Presence.native_presence?BB_Nouveau_Presence.native_presence_url:BB_Nouveau_Presence.presence_rest_url;t.ajax({type:"POST",url:i,data:e,beforeSend:function(e){e.setRequestHeader("X-WP-Nonce",BB_Nouveau_Presence.rest_nonce)},success:function(e){e&&bp.Nouveau.updateUsersPresence(e)}})}},1e3*parseInt(BB_Nouveau_Presence.presence_default_interval))},getPageUserIDs:function(){var e=[],i=t(document).find(".member-status[data-bb-user-id]");return i.length>0&&i.each(function(){var i=t(this).attr("data-bb-user-id");-1==t.inArray(parseInt(i),e)&&e.push(parseInt(i))}),e},updateUsersPresence:function(e){e&&e.length>0&&t.each(e,function(e,t){bp.Nouveau.updateUserPresence(t.id,t.status)})},updateUserPresence:function(e,i){t(document).find('.member-status[data-bb-user-id="'+e+'"]').removeClass("offline online").addClass(i).attr("data-bb-user-presence",i)},userPresenceChecker:function(e){var t=setTimeout(function(){window.bb_is_user_active=!1},e);document.onmousemove=document.mousedown=document.mouseup=document.onkeydown=document.onkeyup=document.focus=function(){clearTimeout(t),t=setTimeout(function(){window.bb_is_user_active=!1},e),window.bb_is_user_active=!0}},linkPreviews:{currentTarget:null,currentTargetForm:null,currentPreviewParent:null,controlsAdded:null,dataInput:null,loadedURLs:[],loadURLAjax:null,options:{},render:function(e){var i=this,a=t("#tmpl-bb-link-preview").html(),n=_.template(a),o=n(e);if(i.currentPreviewParent&&i.currentPreviewParent.html(o),!0!==i.options.link_loading&&1!==i.options.link_swap_image_button&&(null===i.controlsAdded&&i.registerControls(),!0!==i.options.link_error&&null!==i.dataInput&&i.dataInput.length>0)){var s=i.options.link_description;i.options.link_embed&&(s="");var r={link_url:i.options.link_url,link_title:i.options.link_title,link_description:s,link_embed:i.options.link_embed,link_image:void 0!==i.options.link_images?i.options.link_images[i.options.link_image_index_save]:"",link_image_index_save:i.options.link_image_index_save};i.dataInput.val(JSON.stringify(r)).trigger("change")}},registerControls:function(){var e=this;e.displayNextPrevButtonView=function(){t(".bb-url-scrapper-container #bb-url-prevPicButton").show(),t(".bb-url-scrapper-container #bb-url-nextPicButton").show(),t(".bb-url-scrapper-container #bb-link-preview-select-image").show(),t(".bb-url-scrapper-container #icon-exchange").hide(),t(".bb-url-scrapper-container #bb-link-preview-remove-image").hide()},t(e.currentPreviewParent).on("click","#bb-link-preview-remove-image",function(t){t.preventDefault(),e.options.link_images=[],e.options.link_image_index=0,e.options.link_image_index_save="-1",e.render(e.options)}),t(e.currentPreviewParent).on("click","#bb-close-link-suggestion",function(i){i.preventDefault(),t("#bb_link_url").val(""),Object.assign(e.options,{link_success:!1,link_error:!1,link_error_msg:"",link_scrapping:!1,link_images:[],link_image_index:0,link_title:"",link_description:"",link_url:"",link_embed:!1,link_swap_image_button:0,link_image_index_save:"0"}),e.render(e.options)}),t(e.currentPreviewParent).on("click","#icon-exchange",function(t){t.preventDefault(),e.options.link_swap_image_button=1,e.displayNextPrevButtonView()}),t(e.currentPreviewParent).on("click","#bb-url-prevPicButton",function(t){t.preventDefault();var i=e.options.link_image_index;i>0&&(Object.assign(e.options,{link_image_index:parseInt(i)-1,link_swap_image_button:1}),e.render(e.options),e.displayNextPrevButtonView())}),t(e.currentPreviewParent).on("click","#bb-url-nextPicButton",function(t){t.preventDefault();var i=e.options.link_image_index,a=e.options.link_images;i<a.length-1&&(Object.assign(e.options,{link_image_index:parseInt(i)+1,link_swap_image_button:1}),e.render(e.options),e.displayNextPrevButtonView())}),t(e.currentPreviewParent).on("click","#bb-link-preview-select-image",function(i){i.preventDefault();var a=e.options.link_image_index;e.options.link_image_index_save=a,e.options.link_swap_image_button=0,t(".bb-url-scrapper-container #icon-exchange").show(),t(".bb-url-scrapper-container #activity-link-preview-remove-image").show(),t(".bb-url-scrapper-container #activity-link-preview-select-image").hide(),t(".bb-url-scrapper-container #activity-url-prevPicButton").hide(),t(".bb-url-scrapper-container #activity-url-nextPicButton").hide(),e.render(e.options)}),e.controlsAdded=!0},scrapURL:function(e,t,i){var a=this,n="",o="";if(t){var s=t.closest("form");if(s.find("input#bb_link_url").length>0&&""!==s.find("input#bb_link_url").val()){var r=JSON.parse(s.find("input#bb_link_url").val());a.options.link_url=r.url?r.url:"",a.options.link_image_index_save=r.link_image_index_save,o=a.options.link_url}}if(null!==e&&""!==e||void 0!==a.options.link_url){t&&(0==t.children(".bb-url-scrapper-container").length&&t.prepend('<div class="bb-url-scrapper-container"><div>'),a.currentPreviewParent=t.find(".bb-url-scrapper-container")),i.length>0&&"input"===i.prop("tagName").toLowerCase()&&(a.dataInput=i);var d=jQuery("<div></div>").html(e);if(d.find("a.bp-suggestions-mention").remove(),d.find('[rel="nofollow"]').remove(),e=d.html(),e.indexOf("<img")>=0&&(e=e.replace(/<img .*?>/g,"")),e.indexOf("http://")>=0?n=this.getURL("http://",e):e.indexOf("https://")>=0?n=this.getURL("https://",e):e.indexOf("www.")>=0&&(n=this.getURL("www",e)),""!==n||""!==o){if(""!==n){var l=document.createElement("a");l.href=n;var c=l.hostname;void 0!==BP_Nouveau.forums.params.excluded_hosts&&-1!==BP_Nouveau.forums.params.excluded_hosts.indexOf(c)&&(n="")}""!==n?this.loadURLPreview(n):o&&this.loadURLPreview(o)}}},getURL:function(e,i){var a="";i=i.replace(/&nbsp;/g,"");var n=i.indexOf(e),o="";if(_.isUndefined(jQuery(t.parseHTML(i)).attr("href"))){for(var s=n;s<i.length&&!(" "===i[s]||"\n"===i[s]||'"'===i[s]&&">"===i[s+1]||"<"===i[s]&&"b"===i[s+1]&&"r"===i[s+2]);s++)a+=i[s];"www"===e&&(e="http://",a=e+a)}else a=jQuery(i).attr("href");var r=document.createElement("div");r.innerHTML=a;for(var d=r.getElementsByTagName("*");d[0];)d[0].parentNode.removeChild(d[0]);return r.innerHTML.length>0&&(o=r.innerHTML),o},loadURLPreview:function(e){var i=this;if(void 0!==i.dataInput&&""!==i.dataInput.val()){var a=JSON.parse(i.dataInput.val());if(void 0!==a.link_url&&""!==a.link_url&&e===a.link_url)return}var n=/^(http:\/\/www\.|https:\/\/www\.|http:\/\/|https:\/\/)?[a-z0-9]+([\-\.]{1}[a-z0-9]+)*\.[a-z]{2,24}(:[0-9]{1,5})?(\/.*)?$/;if(e=t.trim(e),n.test(e)){if(e.includes(window.location.hostname)&&(e.includes("download_document_file")||e.includes("download_media_file")||e.includes("download_video_file")))return!1;var o=!1;if(i.loadedURLs.length&&t.each(i.loadedURLs,function(t,i){if(i.url==e)return o=i.response,!1}),null!=i.loadURLAjax&&i.loadURLAjax.abort(),Object.assign(i.options,{link_scrapping:!0,link_loading:!0,link_error:!1,link_url:e,link_embed:!1,link_success:!1}),i.controlsAdded=null,void 0!==i.currentPreviewParent&&i.currentPreviewParent.length){var s=i.currentPreviewParent.closest("form");if(s.find("input#bb_link_url").length>0&&""!==s.find("input#bb_link_url").val()){var r=JSON.parse(s.find("input#bb_link_url").val());""!==r.url&&r.url!==e&&(i.options.link_image_index_save=0,s.find("input#bb_link_url").val(""))}}i.render(i.options),o?i.setURLResponse(o,e):i.loadURLAjax=t.post(ajaxurl,{action:"bb_forums_parse_url",url:e},function(t){i.setURLResponse(t,e)}).always(function(){})}},setURLResponse:function(e,i){var a=this;if(a.options.link_loading=!1,""!==e.title||""!==e.images)if(""===e.error){var n=e.images;a.options.link_image_index=0;var o="0";""===a.options.link_image_index_save||_.isUndefined(a.options.link_image_index_save)||(o=parseInt(a.options.link_image_index_save)),"-1"===a.options.link_image_index_save?(o="",n=[]):_.isUndefined(a.options.link_image_index_save)&&(a.options.link_image_index_save=0),Object.assign(a.options,{link_success:!0,link_url:i,link_title:_.isUndefined(e.title)?"":e.title,link_description:_.isUndefined(e.description)?"":e.description,link_images:n,link_image_index:o,link_embed:!_.isUndefined(e.wp_embed)&&e.wp_embed}),t("#whats-new-attachments").hasClass("bb-video-preview")&&t("#whats-new-attachments").removeClass("bb-video-preview"),t("#whats-new-attachments").hasClass("bb-link-preview")&&t("#whats-new-attachments").removeClass("bb-link-preview"),void 0!==e.description&&e.description.indexOf("iframe")>-1||!_.isUndefined(e.wp_embed)&&e.wp_embed?t("#whats-new-attachments").addClass("bb-video-preview"):t("#whats-new-attachments").addClass("bb-link-preview"),a.loadedURLs.push({url:i,response:e}),a.render(a.options)}else Object.assign(a.options,{link_success:!1,link_error:!0,link_error_msg:e.error,link_loading:!1,link_images:[]}),a.render(a.options);else a.options.link_scrapping=!1}}},bp.Nouveau.start())}(bp,jQuery);
window.wp=window.wp||{},window.bp=window.bp||{},function(h){"undefined"!=typeof BP_Nouveau&&(bp.Nouveau={start:function(){this.setupGlobals(),this.prepareDocument(),this.initObjects(),this.setHeartBeat(),this.addListeners(),this.switchGridList(),this.sendInvitesRevokeAccess(),this.sentInvitesFormValidate(),this.registerPopUp(),this.loginPopUp(),this.reportPopUp(),this.reportActions(),this.reportedPopup(),this.togglePassword(),this.enableSubmitOnLegalAgreement(),this.profileNotificationSetting(),this.xProfileBlock(),"undefined"!=typeof BB_Nouveau_Presence&&this.userPresenceStatus();var r=this;h(document).on("bb_trigger_toast_message",function(e,t,i,a,n,o,s){r.bbToastMessage(t,i,a,n,o,s)}),bp.Nouveau.lazyLoad(".lazy"),h(window).on("scroll resize",function(){bp.Nouveau.lazyLoad(".lazy")})},bbToastMessage:function(e,t,i,a,n,o){var s,r,d,l,c,p,u;function b(){h(r).removeClass("pull-animation").addClass("close-item").delay(500).remove()}t&&""!=t.trim()&&(s="unique-"+Math.floor(1e6*Math.random()),r="."+s,d="",o=o&&"number"==typeof o?1e3*o:5e3,null!==a&&(d="has-url"),p=c=l="",p+='<div class="toast-messages-icon"><i class="bb-icon bb-icon-'+(c=i?"success"===(l=i)?"check":"warning"===l?"exclamation-triangle":"info":c)+'"></i></div>',p+='<div class="toast-messages-content">',e&&(p+='<span class="toast-messages-title">'+e+"</span>"),t&&(p+='<span class="toast-messages-content">'+t+"</span>"),p+="</div>",p+='<div class="actions"><a class="action-close primary" data-bp-tooltip-pos="left" data-bp-tooltip="'+BP_Nouveau.close+'"><i class="bb-icon bb-icon-times" aria-hidden="true"></i></a></div>',p+=a?'<a class="toast-messages-url" href="'+a+'"></a>':"",h((h(".bb-toast-messages-enable").length||(h(".bb-onscreen-notification-enable ul.notification-list").length?(u=h(".bb-onscreen-notification").hasClass("bb-position-left")?"left":"right",u=h('<div class="bb-toast-messages-enable bb-toast-messages-enable-mobile-support"><div class="bb-toast-messages bb-position-'+u+' single-toast-messages"><ul class="toast-messages-list bb-toast-messages-list"></u></div></div>'),h(".bb-onscreen-notification").show(),h(u).insertBefore(".bb-onscreen-notification-enable ul.notification-list")):(u=h('<div class="bb-toast-messages-enable bb-toast-messages-enable-mobile-support"><div class="bb-toast-messages bb-position-right single-toast-messages"><ul class="toast-messages-list bb-toast-messages-list"></u></div></div>'),h("body").append(u))),".bb-toast-messages-enable .toast-messages-list")).append('<li class="item-list read-item pull-animation bp-message-'+l+" "+s+" "+d+'"> '+p+" </li>"),n&&setInterval(function(){b()},o),h(r+" .actions .action-close").on("click",function(){b()}))},setupGlobals:function(){this.ajax_request=null,this.objects=h.map(BP_Nouveau.objects,function(e){return e}),this.objectNavParent=BP_Nouveau.object_nav_parent,this.heartbeat=wp.heartbeat||!1,this.querystring=this.getLinkParams()},prepareDocument:function(){var i;h("body").hasClass("no-js")&&h("body").removeClass("no-js").addClass("js"),BP_Nouveau.warnings&&"undefined"!=typeof console&&console.warn&&h.each(BP_Nouveau.warnings,function(e,t){console.warn(t)}),h(".buddypress_object_nav .widget-title").length&&(i=h(".buddypress_object_nav .widget-title").html(),h("body").find('*:contains("'+i+'")').each(function(e,t){h(t).hasClass("widget-title")||i!==h(t).html()||h(t).is("a")||h(t).remove()}))},getStorage:function(e,t){e=(e=sessionStorage.getItem(e))?JSON.parse(e):{};return void 0!==t?e[t]||!1:e},setStorage:function(e,t,i){var a=this.getStorage(e);return void 0===i&&void 0!==a[t]?delete a[t]:a[t]=i,sessionStorage.setItem(e,JSON.stringify(a)),null!==sessionStorage.getItem(e)},getLinkParams:function(e,t){e=e?-1!==e.indexOf("?")?"?"+e.split("?")[1]:"":document.location.search;if(!e)return null;e=e.replace(/(^\?)/,"").split("&").map(function(e){return this[(e=e.split("="))[0]]=e[1],this}.bind({}))[0];return t?e[t]:e},urlDecode:function(e,t){var i=t||{amp:"&",lt:"<",gt:">",quot:'"',"#039":"'"};return decodeURIComponent(e.replace(/\+/g," ")).replace(/&([^;]+);/g,function(e,t){return i[t]||""})},ajax:function(e,t,i){this.ajax_request&&void 0===i&&this.ajax_request.abort();e=h.extend({},bp.Nouveau.getStorage("bp-"+t),{nonce:BP_Nouveau.nonces[t]},e);return void 0!==BP_Nouveau.customizer_settings&&(e.customized=BP_Nouveau.customizer_settings),void 0!==BP_Nouveau.modbypass&&(e.modbypass=BP_Nouveau.modbypass),this.ajax_request=h.post(BP_Nouveau.ajaxurl,e,"json"),this.ajax_request},inject:function(e,t,i){h(e).length&&t&&(("append"===(i=i||"reset")?h(e).append(t):"prepend"===i?h(e).prepend(t):"after"===i?h(e).after(t):h(e).html(t)).find("li.activity-item").each(this.hideSingleUrl),"undefined"==typeof bp_mentions&&void 0===bp.mentions||(h(".bp-suggestions").bp_mentions(bp.mentions.users),h("#whats-new").on("inserted.atwho",function(){var e;window.getSelection&&document.createRange?(e=window.getSelection&&window.getSelection())&&0<e.rangeCount&&(window.activityCaretPosition=e.getRangeAt(0)):window.activityCaretPosition=document.selection.createRange()})))},hideSingleUrl:function(){var e=h(this).find(".activity-inner > p").removeAttr("br").removeAttr("a").text(),t="",i="",a="",n=0;if(0<=e.indexOf("http://")?(a=e.indexOf("http://"),n=1):0<=e.indexOf("https://")?(a=e.indexOf("https://"),n=1):0<=e.indexOf("www.")&&(a=e.indexOf("www"),n=1),1===n){for(var o=a;o<e.length&&(" "!==e[o]&&"\n"!==e[o]);o++)t+=e[o];""!==t&&(i=h.trim(e.replace(t,""))),0===h.trim(i).length&&0!==h(this).find("iframe").length&&""!==t&&h(this).find(".activity-inner > p:first").hide()}},objectRequest:function(a){var e,n,o=this;if((a=h.extend({object:"",scope:null,filter:null,target:"#buddypress [data-bp-list]",search_terms:"",page:1,extras:null,caller:null,template:null,method:"reset"},a)).object&&a.target)return"activity"==a.object&&"#buddypress [data-bp-list] ul.bp-list"==a.target&&(a.target="#buddypress [data-bp-list] ul.bp-list:not(#bb-media-model-container ul.bp-list)"),["members","activity","media","document"].includes(a.object)&&!h(this.objectNavParent+' [data-bp-scope="'+a.scope+'"]').length&&(a.scope="all"),a.search_terms&&(a.search_terms=a.search_terms.replace(/</g,"&lt;").replace(/>/g,"&gt;")),null!==a.scope&&this.setStorage("bp-"+a.object,"scope",a.scope),null!==a.filter&&this.setStorage("bp-"+a.object,"filter",a.filter),null!==a.extras&&this.setStorage("bp-"+a.object,"extras",a.extras),h(this.objectNavParent+" [data-bp-object]").each(function(){h(this).removeClass("selected loading")}),(h(this.objectNavParent+' [data-bp-scope="'+a.scope+'"]').length?h(this.objectNavParent+' [data-bp-scope="'+a.scope+'"], #object-nav li.current'):h(this.objectNavParent+" [data-bp-scope]:eq(0), #object-nav li.current")).addClass("selected loading"),0===h(this.objectNavParent+' [data-bp-scope="'+a.scope+'"]').length&&(e=["group_members"===a.object&&h("body").hasClass("group-members"),"activity"===a.object&&h("body.groups").hasClass("activity"),"document"===a.object&&h("body").hasClass("documents"),"document"===a.object&&(h("body").hasClass("document")||h("body").hasClass("documents"))],n=[h(".groups .group-search.members-search"),h(".groups .group-search.activity-search"),h(".documents .bp-document-listing .bb-title"),h("#bp-media-single-folder .bb-title")],e.forEach(function(e,t){e&&n[t].addClass("loading")})),h('#buddypress [data-bp-filter="'+a.object+'"] option[value="'+a.filter+'"]').prop("selected",!0),"friends"===a.object||"group_members"===a.object?(a.template=a.object,a.object="members"):"group_requests"===a.object?(a.object="groups",a.template="group_requests"):"group_subgroups"===a.object?(a.object="groups",a.template="group_subgroups"):"notifications"===a.object&&(a.object="members",a.template="member_notifications"),e=h.extend({action:a.object+"_filter"},a),this.ajax(e,a.object).done(function(e){if(!1!==e.success&&!_.isUndefined(e.data)){if(!h("body.group-members.members.buddypress").length||_.isUndefined(e.data)||_.isUndefined(e.data.count)||h("body.group-members.members.buddypress ul li#members-groups-li").find("span").text(e.data.count),h(o.objectNavParent+' [data-bp-scope="'+a.scope+'"]').removeClass("loading"),h(o.objectNavParent+' [data-bp-scope="'+a.scope+'"]').find("span").text(""),0===h(o.objectNavParent+' [data-bp-scope="'+a.scope+'"]').length&&n.forEach(function(e){e.removeClass("loading")}),_.isUndefined(e.data)||_.isUndefined(e.data.count)||h(o.objectNavParent+' [data-bp-scope="'+a.scope+'"]').find("span").text(e.data.count),!_.isUndefined(e.data)&&!_.isUndefined(e.data.scopes))for(var t in e.data.scopes)h(o.objectNavParent+' [data-bp-scope="'+t+'"]').find("span").text(e.data.scopes[t]);var i;"reset"!==a.method?(o.inject(a.target,e.data.contents,a.method),h(a.target).trigger("bp_ajax_"+a.method,h.extend(a,{response:e.data}))):"pag-bottom"===a.caller?(i=null,i=h("#subnav").length?h("#subnav").parent():h(a.target),h("html,body").animate({scrollTop:i.offset().top},"slow",function(){h(a.target).fadeOut(100,function(){o.inject(this,e.data.contents,a.method),h(this).fadeIn(100),h(a.target).trigger("bp_ajax_request",h.extend(a,{response:e.data})),bp.Nouveau.lazyLoad&&setTimeout(function(){bp.Nouveau.lazyLoad(".lazy")},1e3)})})):h(a.target).fadeOut(100,function(){o.inject(this,e.data.contents,a.method),h(this).fadeIn(100),h(a.target).trigger("bp_ajax_request",h.extend(a,{response:e.data})),bp.Nouveau.lazyLoad&&setTimeout(function(){bp.Nouveau.lazyLoad(".lazy")},1e3)}),setTimeout(function(){o.reportPopUp(),o.reportedPopup()},1e3)}})},initObjects:function(){var a,n=this,o={},s="all",r="",d=null,l=null;h.each(this.objects,function(e,t){var i;h('#buddypress [data-bp-list="'+t+'"][data-ajax="false"]').length||(a=n.getStorage("bp-"+t),void 0!==(i=window.location.hash.substr(1))&&"following"==i?s=i:void 0!==a.scope&&(s=a.scope),void 0!==a.extras&&"notifications"!==t&&(d=a.extras),h('#buddypress [data-bp-filter="'+t+'"]').length&&(void 0!==a.filter?(l=a.filter,h('#buddypress [data-bp-filter="'+t+'"] option[value="'+l+'"]').prop("selected",!0)):"-1"!==h('#buddypress [data-bp-filter="'+t+'"]').val()&&"0"!==h('#buddypress [data-bp-filter="'+t+'"]').val()&&(l=h('#buddypress [data-bp-filter="'+t+'"]').val())),h(this.objectNavParent+' [data-bp-object="'+t+'"]').length&&(h(this.objectNavParent+' [data-bp-object="'+t+'"]').each(function(){h(this).removeClass("selected")}),h(this.objectNavParent+' [data-bp-scope="'+t+'"], #object-nav li.current').addClass("selected")),null!==n.querystring&&(void 0!==n.querystring[t+"_search"]?r=decodeURI(n.querystring[t+"_search"]):void 0!==n.querystring.s&&(r=decodeURI(n.querystring.s)),r&&h('#buddypress [data-bp-search="'+t+'"] input[type=search]').val(r)),h('#buddypress [data-bp-list="'+t+'"]').length&&(o={object:t,scope:s,filter:l,search_terms:r,extras:d},h('#buddypress [data-bp-member-type-filter="'+t+'"]').length?o.member_type_id=h('#buddypress [data-bp-member-type-filter="'+t+'"]').val():h('#buddypress [data-bp-group-type-filter="'+t+'"]').length&&(o.group_type=h('#buddypress [data-bp-group-type-filter="'+t+'"]').val()),n.objectRequest(o)))})},setHeartBeat:function(){void 0!==BP_Nouveau.pulse&&this.heartbeat&&(this.heartbeat.interval(Number(BP_Nouveau.pulse)),h.fn.extend({"heartbeat-send":function(){return this.bind("heartbeat-send")}}),h.fn.extend({"heartbeat-tick":function(){return this.bind("heartbeat-tick")}}))},addListeners:function(){h("[data-bp-disable-input]").on("change",this.toggleDisabledInput),h(this.objectNavParent+" .bp-navs").on("click","a",this,this.scopeQuery),h(document).on("change","#buddypress [data-bp-filter]",this,this.filterQuery),h(document).on("change","#buddypress [data-bp-group-type-filter]",this,this.typeGroupFilterQuery),h(document).on("change","#buddypress [data-bp-member-type-filter]",this,this.typeMemberFilterQuery),h("#buddypress [data-bp-search]").on("submit","form",this,this.searchQuery),h("#buddypress [data-bp-search] form").on("search","input[type=search]",this.resetSearch),h("#buddypress [data-bp-list], #buddypress #item-header, #buddypress.bp-shortcode-wrap .dir-list, #buddypress .bp-messages-content").on("click","[data-bp-btn-action]",this,this.buttonAction),h("#buddypress [data-bp-list], #buddypress #item-header, #buddypress.bp-shortcode-wrap .dir-list, #buddypress .messages-screen").on("blur","[data-bp-btn-action]",this,this.buttonRevert),h("#buddypress [data-bp-list], #buddypress #item-header, #buddypress.bp-shortcode-wrap .dir-list, #buddypress .messages-screen").on("mouseover","[data-bp-btn-action]",this,this.buttonHover),h("#buddypress [data-bp-list], #buddypress #item-header, #buddypress.bp-shortcode-wrap .dir-list, #buddypress .messages-screen").on("mouseout","[data-bp-btn-action]",this,this.buttonHoverout),h("#buddypress [data-bp-list], #buddypress #item-header, #buddypress.bp-shortcode-wrap .dir-list, #buddypress .messages-screen").on("mouseover",".awaiting_response_friend",this,this.awaitingButtonHover),h("#buddypress [data-bp-list], #buddypress #item-header, #buddypress.bp-shortcode-wrap .dir-list, #buddypress .messages-screen").on("mouseout",".awaiting_response_friend",this,this.awaitingButtonHoverout),h(document).on("click","#buddypress .bb-leave-group-popup .bb-confirm-leave-group",this.leaveGroupAction),h(document).on("click","#buddypress .bb-leave-group-popup .bb-close-leave-group",this.leaveGroupClose),h(document).on("click","#buddypress .bb-remove-connection .bb-confirm-remove-connection",this.removeConnectionAction),h(document).on("click","#buddypress .bb-remove-connection .bb-close-remove-connection",this.removeConnectionClose),h(document).on("click","#buddypress table.invite-settings .field-actions .field-actions-remove, #buddypress table.invite-settings .field-actions-add",this,this.addRemoveInvite),h(document).on("click",".show-action-popup",this.showActionPopup),h(document).on("click","#message-threads .block-member",this.threadListBlockPopup),h(document).on("click","#message-threads .report-content",this.threadListReportPopup),h(document).on("click",".bb-close-action-popup, .action-popup-overlay",this.closeActionPopup),h(document).on("keyup",'.search-form-has-reset input[type="search"], .search-form-has-reset input#bbp_search',_.throttle(this.directorySearchInput,900)),h(document).on("click",".search-form-has-reset .search-form_reset",this.resetDirectorySearch),h(document).on("keyup",this,this.keyUp),h("[data-bp-close]").on("click",this,this.closeNotice),h("#buddypress [data-bp-list]").on("click","[data-bp-pagination] a",this,this.paginateAction),h(document).on("click",this.closePickersOnClick),document.addEventListener("keydown",this.closePickersOnEsc),h(document).on("click","#item-header a.position-change-cover-image, .header-cover-reposition-wrap a.cover-image-save, .header-cover-reposition-wrap a.cover-image-cancel",this.coverPhotoCropper),h(document).on("click","#cover-photo-alert .bb-model-close-button",this.coverPhotoCropperAlert),h(document).on("click",this.toggleMoreOption.bind(this)),h(document).on("heartbeat-send",this.bbHeartbeatSend.bind(this)),h(document).on("heartbeat-tick",this.bbHeartbeatTick.bind(this)),bp.Nouveau.notificationRemovedAction(),bp.Nouveau.removeAllNotification(),bp.Nouveau.setTitle(),h(document).on("click",".more-following .count-more",this.bbWidgetMoreFollowing),h(".bb-accordion .bb-accordion_trigger").on("click",this.toggleAccordion)},bbHeartbeatSend:function(e,t){t.onScreenNotifications=!0,h("#buddypress").trigger("bb_heartbeat_send",t)},bbHeartbeatTick:function(e,t){bp.Nouveau.bbInjectOnScreenNotifications(e,t)},bbInjectOnScreenNotifications:function(e,t){var i,a,n,o,s,r;"1"==h(".bb-onscreen-notification").data("enable")&&(void 0===t.on_screen_notifications&&""===t.on_screen_notifications||(i=h(".bb-onscreen-notification"),r=(a=i.find(".notification-list")).data("removed-items"),n=a.data("animated-items"),o=[],s=h(h.parseHTML("<ul>"+t.on_screen_notifications+"</ul>")),h.each(r,function(e,t){t=s.find("[data-notification-id="+t+"]");t.length&&t.closest(".read-item").remove()}),(r=s.find(".read-item")).each(function(e,t){var i=h(t).find(".actions .action-close").data("notification-id");"-1"==h.inArray(i,n)?(h(t).addClass("pull-animation"),n.push(i),o.push(i)):h(t).removeClass("pull-animation")}),o.length&&r.each(function(e,t){var i=h(t).find(".actions .action-close").data("notification-id");"-1"==h.inArray(i,o)&&(h(t).removeClass("recent-item"),(t=a.data("border-items")).push(i),a.attr("data-border-items",JSON.stringify(t)))}),a.attr("data-animated-items",JSON.stringify(n)),r.length&&(i.removeClass("close-all-items"),r.eq(2).nextAll().addClass("bb-more-item"),3<r.length?a.addClass("bb-more-than-3"):a.removeClass("bb-more-than-3"),i.show(),a.empty().html(r),bp.Nouveau.visibilityOnScreenClearButton(),bp.Nouveau.notificationBorder(),bp.Nouveau.notificationAutoHide(),bp.Nouveau.browserTabFlashNotification(),bp.Nouveau.browserTabCountNotification())))},notificationBorder:function(){var e=h(".bb-onscreen-notification").find(".notification-list"),a=e.data("border-items");e.find(".read-item").each(function(e,t){var i=h(t).find(".actions .action-close").data("notification-id");"-1"==h.inArray(i,a)&&h(t).addClass("recent-item")}),e.attr("data-border-items",JSON.stringify(a))},browserTabCountNotification:function(){var e=h(".bb-onscreen-notification"),t=e.find(".notification-list").find(".read-item"),i=h("html").find("title"),e=e.data("title-tag");0<t.length?i.text("("+t.length+") "+e):i.text(e)},browserTabFlashNotification:function(){1==h(".bb-onscreen-notification").data("broser-tab")&&(window.bbFlashNotification&&clearInterval(window.bbFlashNotification),document.hidden&&(window.bbFlashNotification=setInterval(bp.Nouveau.flashTitle,2e3)))},flashTitle:function(){var e=h(".bb-onscreen-notification"),t=e.find(".notification-list"),i=t.find(".read-item"),a=i.first().find(".notification-content .bb-full-link a").text(),n=h("html").find("title"),o=e.attr("data-title-tag"),s=e.attr("data-flash-status"),r=t.data("flash-items");if(document.hidden||(i.each(function(e,t){t=h(t).find(".actions .action-close").attr("data-notification-id");"-1"==h.inArray(t,r)&&r.push(t)}),t.attr("data-flash-items",JSON.stringify(r))),!document.hidden&&window.bbFlashNotification||i.length<=0)return clearInterval(window.bbFlashNotification),e.attr("data-flash-status","default_title"),void n.text(o);"default_title"===s?(n.text("("+i.length+") "+o),i=i.first().find(".actions .action-close").attr("data-notification-id"),"-1"==h.inArray(i,r)&&e.attr("data-flash-status","notification")):"notification"===s&&(n.text(a),e.attr("data-flash-status","default_title"))},notificationAutoHide:function(){var a,e=h(".bb-onscreen-notification"),n=e.find(".notification-list"),o=n.data("auto-removed-items"),e=e.data("visibility");"never"!==e&&((a=parseInt(e))<=0||(n.find(".read-item").each(function(e,t){var i=h(t).find(".actions .action-close").data("notification-id");"-1"==h.inArray(i,o)&&(o.push(i),setTimeout(function(){n.find(".actions .action-close[data-notification-id="+i+"]").length&&n.find(".actions .action-close[data-notification-id="+i+"]").trigger("click")},1e3*a))}),n.attr("data-auto-removed-items",JSON.stringify(o))))},notificationRemovedAction:function(){h(".bb-onscreen-notification .notification-list").on("click",".action-close",function(e){e.preventDefault(),bp.Nouveau.removeOnScreenNotification(this)})},removeOnScreenNotification:function(e){var t=h(e).closest(".notification-list"),i=h(e).closest(".read-item"),a=h(e).data("notification-id"),n=t.data("removed-items");i.addClass("close-item"),setTimeout(function(){n.push(a),t.attr("data-removed-items",JSON.stringify(n)),i.remove(),bp.Nouveau.browserTabCountNotification(),bp.Nouveau.visibilityOnScreenClearButton();var e=t.find(".read-item");e.length<4&&t.removeClass("bb-more-than-3"),e.slice(0,3).removeClass("bb-more-item")},500)},removeAllNotification:function(){h(".bb-onscreen-notification .bb-remove-all-notification").on("click",".action-close",function(e){e.preventDefault();var t=h(this).closest(".bb-onscreen-notification").find(".notification-list"),e=t.find(".read-item"),i=t.data("removed-items");e.each(function(e,t){t=h(t).find(".actions .action-close").data("notification-id");t&&i.push(t)}),t.attr("data-removed-items",JSON.stringify(i)),e.remove(),bp.Nouveau.browserTabCountNotification(),bp.Nouveau.visibilityOnScreenClearButton(),t.closest(".bb-onscreen-notification").addClass("close-all-items"),h(".toast-messages-list > li").each(function(){h(this).removeClass("pull-animation").addClass("close-item").delay(500).remove()}),h(".toast-messages-list > li").each(function(){h(this).removeClass("pull-animation").addClass("close-item").delay(500).remove()}),t.removeClass("bb-more-than-3")})},setTitle:function(){var e=h("html head").find("title").text();h(".bb-onscreen-notification").attr("data-title-tag",e)},visibilityOnScreenClearButton:function(){var e=h(".bb-onscreen-notification");1<e.find(".notification-list").find(".read-item").length?(e.removeClass("single-notification"),e.addClass("active-button"),e.find(".bb-remove-all-notification .action-close").fadeIn(600)):(e.addClass("single-notification"),e.removeClass("active-button"),e.find(".bb-remove-all-notification .action-close").fadeOut(200))},switchGridList:function(){var t=this,i=!1,a=h(".grid-filters").data("object");"group_members"===a&&(i=!0),"friends"===a?a="members":"group_requests"===a?a="groups":"notifications"===a&&(a="members");var e=t.getStorage("bp-"+a),n={};void 0!==e.extras&&void 0!==(n=e.extras).layout&&(h(".grid-filters .layout-view").removeClass("active"),("list"===n.layout?h(".grid-filters .layout-list-view"):h(".grid-filters .layout-grid-view")).addClass("active")),h(document).on("click",".grid-filters .layout-view",function(e){e.preventDefault(),h(this).hasClass("layout-list-view")?(h(".layout-grid-view").removeClass("active"),h(this).addClass("active"),h(".bp-list").removeClass("grid"),n.layout="list"):(h(".layout-list-view").removeClass("active"),h(this).addClass("active"),h(".bp-list").addClass("grid"),n.layout="grid"),i?t.setStorage("bp-group_members","extras",n):t.setStorage("bp-"+a,"extras",n)})},sentInvitesFormValidate:function(){h("body.send-invites #send-invite-form #member-invites-table").length&&h("body.send-invites #send-invite-form").submit(function(){var e,t,i="",a=[],n=[],o="",s="",r="",d="",l=/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/,c=h("body.send-invites #send-invite-form #error-message-empty-name-field").val(),p=h("body.send-invites #send-invite-form #error-message-invalid-email-address-field").val(),u=h("body.send-invites #send-invite-form #error-message-required-field").val(),b=h("body.send-invites #send-invite-form #error-message-empty-subject-field").length,m=h("body.send-invites #send-invite-form #error-message-empty-body-field").length;if(1===b&&(o=h("body.send-invites #send-invite-form #bp-member-invites-custom-subject").val(),s=h("body.send-invites #send-invite-form #error-message-empty-subject-field").val()),1===m&&(r=tinyMCE.get("bp-member-invites-custom-content").getContent(),d=h("body.send-invites #send-invite-form #error-message-empty-body-field").val()),1===b&&1===m){var f=h("body.send-invites #send-invite-form #error-message-empty-subject-body-field").val();if(""===o&&""===r){if(!confirm(f))return!1}else if(""!==o&&""===r){if(!confirm(d))return!1}else if(""===o&&""!==r&&!confirm(s))return!1}else if(0===b&&1===m){if(""===r&&!confirm(d))return!1}else if(1===b&&0===m&&""===o&&!confirm(s))return!1;if(h("body.send-invites #send-invite-form #member-invites-table > tbody  > tr").each(function(){h(this).find('input[type="text"]').removeAttr("style"),h(this).find('input[type="email"]').removeAttr("style")}),h("body.send-invites #send-invite-form #member-invites-table > tbody  > tr").each(function(){e=h.trim(h(this).find('input[type="text"]').val()),i=h(this).find("input").attr("id"),t=h.trim(h(this).find('input[type="email"]').val()),""===e&&""===t?0:""!==e&&""===t?(i=h(this).find('input[type="email"]').attr("id"),a.push(i)):""===e&&""!==t?(i=h(this).find('input[type="text"]').attr("id"),a.push(i)):l.test(t)?n.push(1):(i=h(this).find('input[type="email"]').attr("id"),a.push(i))}),h(".span_error").remove(),0!==a.length)return a.forEach(function(e){h("#"+e).attr("style","border:1px solid #ef3e46"),-1!==e.indexOf("email_")?h("#"+e).after('<span class="span_error" style="color:#ef3e46">'+p+"</span>"):h("#"+e).after('<span class="span_error" style="color:#ef3e46">'+c+"</span>")}),h("html, body").animate({scrollTop:h("#item-body").offset().top},2e3),alert(u),!1;if(h("#email_0_email_error").length&&h("#email_0_email_error").remove(),0===n.length){o=h("#invitee_0_title").val(),s=h("#email_0_email").val();return""===o&&""===s?(h("#invitee_0_title").attr("style","border:1px solid #ef3e46"),h("#invitee_0_title").focus(),h("#email_0_email").attr("style","border:1px solid #ef3e46"),!1):(""!==o&&""===s?(h("#email_0_email").attr("style","border:1px solid #ef3e46"),h("#email_0_email").focus()):(l.test(s)||(h("#email_0_email").attr("style","border:1px solid #ef3e46"),h("#email_0_email").focus(),h("#email_0_email_error").remove(),h("#email_0_email").after('<span id="email_0_email_error" style="color:#ef3e46">'+p+"</span>")),alert(u)),!1)}})},sendInvitesRevokeAccess:function(){h("body.sent-invites #member-invites-table").length&&h("body.sent-invites #member-invites-table tr td span a.revoked-access").click(function(e){e.preventDefault();var t=h(this).attr("data-name"),i=h(this).attr("id"),e=h(this).attr("data-revoke-access");if(!confirm(t))return!1;h.ajax({url:e,type:"post",data:{item_id:i},success:function(){window.location.reload(!0)}})})},toggleDisabledInput:function(){var e=h(this).attr("data-bp-disable-input");h(e).prop("disabled",!0)&&!h(this).hasClass("enabled")?(h(this).addClass("enabled").removeClass("disabled"),h(e).prop("disabled",!1)):h(e).prop("disabled",!1)&&h(this).hasClass("enabled")&&(h(this).removeClass("enabled").addClass("disabled"),h(e).attr("disabled","disabled"))},keyUp:function(e){var t=e.data;27===e.keyCode&&t.buttonRevertAll()},scopeQuery:function(e){var t,i,a=e.data,n=h(e.currentTarget).parent(),o="",s=null,r={};if(n.hasClass("no-ajax")||h(e.currentTarget).hasClass("no-ajax")||!n.attr("data-bp-scope"))return e;if(t=n.data("bp-scope"),i=n.data("bp-object"),!t||!i)return e;e.preventDefault();var e=a.getStorage("bp-"+i);void 0!==e.extras&&"notifications"!==i&&(s=e.extras),e=h("#buddypress").find('[data-bp-filter="'+i+'"]').first().val(),h('#buddypress [data-bp-search="'+i+'"] input[type=search]').length&&(o=h('#buddypress [data-bp-search="'+i+'"] input[type=search]').val()),n.hasClass("dynamic")&&n.find("a span").html(""),r={object:i,scope:t,filter:e,search_terms:o,page:1,extras:s},h('#buddypress [data-bp-member-type-filter="'+i+'"]').length?r.member_type_id=h('#buddypress [data-bp-member-type-filter="'+i+'"]').val():h('#buddypress [data-bp-group-type-filter="'+i+'"]').length&&(r.group_type=h('#buddypress [data-bp-group-type-filter="'+i+'"]').val()),a.objectRequest(r)},filterQuery:function(e){var t=e.data,i=h(e.target).data("bp-filter"),a="all",n=h(e.target).val(),o="",s=!1;if(!i)return e;h(t.objectNavParent+" [data-bp-object].selected").length&&(a=h(t.objectNavParent+" [data-bp-object].selected").data("bp-scope")),h('#buddypress [data-bp-search="'+i+'"] input[type=search]').length&&(o=h('#buddypress [data-bp-search="'+i+'"] input[type=search]').val());e=t.getStorage("bp-"+(i="friends"===i?"members":i));void 0!==e.extras&&"notifications"!==i&&(s=e.extras),"members"===i?t.objectRequest({object:i,scope:a,filter:n,search_terms:o,page:1,extras:s,template:null,member_type_id:h('#buddypress [data-bp-member-type-filter="'+i+'"]').val()}):"groups"===i?t.objectRequest({object:i,scope:a,filter:n,search_terms:o,page:1,extras:s,template:null,group_type:h('#buddypress [data-bp-group-type-filter="'+i+'"]').val()}):t.objectRequest({object:i,scope:a,filter:n,search_terms:o,page:1,extras:s,template:null})},typeGroupFilterQuery:function(e){var t=e.data,i=h(e.target).data("bp-group-type-filter"),a="all",n=null,o=null,s="";if(!i)return e;void 0!==(e=t.getStorage("bp-"+i)).extras&&"notifications"!==i&&(o=e.extras),h('#buddypress [data-bp-filter="'+i+'"]').length&&(void 0!==e.filter?(n=e.filter,h('#buddypress [data-bp-filter="'+i+'"] option[value="'+n+'"]').prop("selected",!0)):"-1"!==h('#buddypress [data-bp-filter="'+i+'"]').val()&&"0"!==h('#buddypress [data-bp-filter="'+i+'"]').val()&&(n=h('#buddypress [data-bp-filter="'+i+'"]').val())),h(t.objectNavParent+" [data-bp-object].selected").length&&(a=h(t.objectNavParent+" [data-bp-object].selected").data("bp-scope")),h('#buddypress [data-bp-search="'+i+'"] input[type=search]').length&&(s=h('#buddypress [data-bp-search="'+i+'"] input[type=search]').val()),t.objectRequest({object:i,scope:a,filter:n,search_terms:s,page:1,template:null,extras:o,group_type:h('#buddypress [data-bp-group-type-filter="'+i+'"]').val()})},typeMemberFilterQuery:function(e){var t=e.data,i=h(e.target).data("bp-member-type-filter"),a="all",n=null,o=null,s="";if(!i)return e;void 0!==(e=t.getStorage("bp-"+(i="friends"===i?"members":i))).extras&&"notifications"!==i&&(o=e.extras),h('#buddypress [data-bp-filter="'+i+'"]').length&&(void 0!==e.filter?(n=e.filter,h('#buddypress [data-bp-filter="'+i+'"] option[value="'+n+'"]').prop("selected",!0)):"-1"!==h('#buddypress [data-bp-filter="'+i+'"]').val()&&"0"!==h('#buddypress [data-bp-filter="'+i+'"]').val()&&(n=h('#buddypress [data-bp-filter="'+i+'"]').val())),h(t.objectNavParent+" [data-bp-object].selected").length&&(a=h(t.objectNavParent+" [data-bp-object].selected").data("bp-scope")),h('#buddypress [data-bp-search="'+i+'"] input[type=search]').length&&(s=h('#buddypress [data-bp-search="'+i+'"] input[type=search]').val()),t.objectRequest({object:i,scope:a,filter:n,search_terms:s,page:1,template:null,extras:o,member_type_id:h('#buddypress [data-bp-member-type-filter="'+i+'"]').val()})},searchQuery:function(e){var t,i,a,n=e.data,o="all",s=!1;if(h(e.delegateTarget).hasClass("no-ajax")||void 0===h(e.delegateTarget).data("bp-search"))return e;e.preventDefault(),t=h(e.delegateTarget).data("bp-search"),i=h("#buddypress").find('[data-bp-filter="'+t+'"]').first().val(),a=h(e.delegateTarget).find("input[type=search]").first().val(),h(n.objectNavParent+" [data-bp-object]").length&&(o=h(n.objectNavParent+' [data-bp-object="'+t+'"].selected').data("bp-scope"));e=n.getStorage("bp-"+t);void 0!==e.extras&&"notifications"!==t&&(s=e.extras),n.objectRequest({object:t,scope:o,filter:i,search_terms:a,page:1,extras:s,template:null})},showSearchSubmit:function(e){h(e.delegateTarget).find("[type=submit]").addClass("bp-show"),h("[type=submit]").hasClass("bp-hide")&&h("[type=submit]").removeClass("bp-hide")},resetSearch:function(e){h(e.target).val()?h(e.delegateTarget).find("[type=submit]").show():h(e.delegateTarget).submit()},buttonAction:function(e){var a=e.data,n=h(e.currentTarget),o=n.data("bp-btn-action"),t=n.data("bp-nonce"),s=n.closest("[data-bp-item-id]"),i=s.data("bp-item-id"),r=n.closest(".list-wrap"),d=s.data("bp-item-component"),l="",c=s.data("bp-used-to-component");if(!o||!i||!d)return e;if(e.preventDefault(),n.hasClass("bp-toggle-action-button"))return h(document.body).hasClass("buddyboss-theme")&&void 0!==n.data("balloon")?n.attr("data-balloon",n.data("title")):n.text(n.data("title")),n.removeClass("bp-toggle-action-button"),n.addClass("bp-toggle-action-button-clicked"),!1;if(void 0!==n.data("only-admin"))return void 0!==BP_Nouveau.only_admin_notice&&window.alert(BP_Nouveau.only_admin_notice),!1;if("is_friend"!==o&&(void 0!==BP_Nouveau[o+"_confirm"]&&!1===window.confirm(BP_Nouveau[o+"_confirm"])||n.hasClass("pending")))return!1;var p=h(".bb-leave-group-popup"),u=h(n).data("bb-group-name"),b=h(n).data("bb-group-link");if("leave_group"===o&&"true"!==h(n).attr("data-popup-shown")){if(p.length){var m=p.find(".bb-leave-group-content"),e=!!s.hasClass("has-child");return m.html(e?BP_Nouveau.parent_group_leave_confirm:BP_Nouveau.group_leave_confirm),e||m.find(".bb-group-name").html('<a href="'+b+'">'+u+"</a>"),h("body").find('[data-current-anchor="true"]').removeClass("bp-toggle-action-button bp-toggle-action-button-hover").addClass("bp-toggle-action-button-clicked"),p.show(),h(n).attr("data-current-anchor","true"),h(n).attr("data-popup-shown","true"),!1}}else h("body").find('[data-popup-shown="true"]').attr("data-popup-shown","false"),h("body").find('[data-current-anchor="true"]').attr("data-current-anchor","false"),p.find(".bb-leave-group-content .bb-group-name").html(""),p.hide();b={};h(n).closest("#item-header").length?b=h("#item-header .bb-remove-connection"):h(n).closest('.members[data-bp-list="members"]').length?b=h('.members[data-bp-list="members"] .bb-remove-connection'):h(n).closest('.group_members[data-bp-list="group_members"]').length&&(b=h('.group_members[data-bp-list="group_members"] .bb-remove-connection'));u=h(n).data("bb-user-name"),p=h(n).data("bb-user-link");if("is_friend"===o&&"opened"!==h(n).attr("data-popup-shown")){if(b.length)return b.find(".bb-remove-connection-content .bb-user-name").html('<a href="'+p+'">'+u+"</a>"),h("body").find('[data-current-anchor="true"]').removeClass("bp-toggle-action-button bp-toggle-action-button-hover").addClass("bp-toggle-action-button-clicked"),b.show(),h(n).attr("data-current-anchor","true"),h(n).attr("data-popup-shown","opened"),!1}else h("body").find('[data-popup-shown="opened"]').attr("data-popup-shown","closed"),h("body").find('[data-current-anchor="true"]').attr("data-current-anchor","false"),b.length&&(b.find(".bb-remove-connection-content .bb-user-name").html(""),b.hide());l=t?a.getLinkParams(t,"_wpnonce"):void 0===n.prop("href")?a.getLinkParams(n.attr("href"),"_wpnonce"):a.getLinkParams(n.prop("href"),"_wpnonce"),u={is_friend:"remove_friend",not_friends:"add_friend",pending:"withdraw_friendship",accept_friendship:"accept_friendship",reject_friendship:"reject_friendship"};"members"===d&&void 0!==u[o]&&(o=u[o],d="friends");b={not_following:"follow",following:"unfollow"};"members"===d&&void 0!==b[o]&&(o=b[o],d="follow"),n.addClass("pending loading");t="";h(document.body).hasClass("directory")&&h(document.body).hasClass("members")||h(document.body).hasClass("group-members")?t="directory":h(document.body).hasClass("bp-user")&&(t="single");u="primary",b="single"===t?n.closest(".header-dropdown"):n.closest(".footer-button-wrap");void 0!==b.length&&0<b.length&&(u="secondary"),c=void 0===c?d:c,a.ajax({action:d+"_"+o,item_id:i,current_page:t,button_clicked:u,component:c,_wpnonce:l},d,!0).done(function(e){if(!1!==e.success){if("groups"===d){if(void 0!==e.data.is_group&&e.data.is_group)return void 0!==e.data.group_url&&e.data.group_url?window.location=e.data.group_url:window.location.reload();void 0!==e.data.is_group&&e.data.is_parent&&h("#buddypress .groups-nav li.selected a").trigger("click"),void 0!==e.data.is_group_subscription&&!0===e.data.is_group_subscription&&void 0!==e.data.feedback&&h(document).trigger("bb_trigger_toast_message",["","<div>"+e.data.feedback+"</div>","info",null,!0])}var t,i;return(h("#friends-personal-li").length&&(i=h("#friends-personal-li a span"),t=h("#friends-personal-li a"),(void 0!==e.data.is_user&&e.data.is_user&&void 0!==e.data.friend_count||void 0!==e.data.friend_count)&&("0"!==e.data.friend_count?i.length?h(i).html(e.data.friend_count):h(t).append('<span class="count">'+e.data.friend_count+"</span>"):h(i).hide())),void 0!==e.data.is_user&&e.data.is_user)?(n.parent().html(e.data.feedback),void s.fadeOut(1500)):void 0!==e.data.is_user&&!e.data.is_user&&void 0!==e.data.group_url&&e.data.group_url?window.location=e.data.group_url:(h(a.objectNavParent+' [data-bp-scope="personal"]').length&&(i=Number(h(a.objectNavParent+' [data-bp-scope="personal"] span').html())||0,-1!==h.inArray(o,["leave_group","remove_friend"])?--i:-1!==h.inArray(o,["join_group"])&&(i+=1),i<0&&(i=0),h(a.objectNavParent+' [data-bp-scope="personal"] span').html(i)),"follow"===d&&0<s.find(".followers-wrap").length&&void 0!==e.data.count&&""!==e.data.count&&s.find(".followers-wrap").replaceWith(e.data.count),void n.parent().replaceWith(e.data.contents))}r.prepend(e.data.feedback),n.removeClass("pending loading"),s.find(".bp-feedback").length?(s.find(".bp-feedback").show(),s.find(".bp-feedback").fadeOut(6e3)):"groups"===d&&"join_group"===o&&(s.append(e.data.feedback),s.find(".bp-feedback").fadeOut(6e3)),void 0!==e.data.is_group_subscription&&!0===e.data.is_group_subscription&&void 0!==e.data.feedback&&h(document).trigger("bb_trigger_toast_message",["","<div>"+e.data.feedback+"</div>","error",null,!0])}).fail(function(){var e,t;["unsubscribe","subscribe"].includes(o)&&(25<(e=h(n).data("bb-group-name")).length&&(e=e.substring(0,25)+"..."),t="<div>"+BP_Nouveau.subscriptions.error+"<strong>"+e+"</strong>.</div>","subscribe"===o&&(t="<div>"+BP_Nouveau.subscriptions.subscribe_error+"<strong>"+e+"</strong></div>"),jQuery(document).trigger("bb_trigger_toast_message",["",t,"error",null,!0])),n.removeClass("pending loading")})},buttonRevert:function(e){e=h(e.currentTarget);e.hasClass("bp-toggle-action-button-clicked")&&!e.hasClass("loading")&&(h(document.body).hasClass("buddyboss-theme")&&void 0!==e.data("balloon")?e.attr("data-balloon",e.data("title-displayed")):e.text(e.data("title-displayed")),e.removeClass("bp-toggle-action-button-clicked"),e.addClass("bp-toggle-action-button"))},buttonHover:function(e){var t=h(e.currentTarget),i=t.data("bp-btn-action"),a=t.closest("[data-bp-item-id]"),n=a.data("bp-item-id"),a=a.data("bp-item-component");return i&&n&&a?(e.preventDefault(),t.hasClass("bp-toggle-action-button")?(t.hasClass("group-subscription")&&void 0!==t.data("title")&&void 0!==t.data("title-displayed")&&0===t.data("title").replace(/<(.|\n)*?>/g,"").length&&0===t.data("title-displayed").replace(/<(.|\n)*?>/g,"").length||(h(document.body).hasClass("buddyboss-theme")&&void 0!==t.data("balloon")&&(t.hasClass("following")||t.attr("data-balloon",t.data("title").replace(/<(.|\n)*?>/g,"")),t.find("span").html(t.data("title"))),t.html(t.data("title"))),t.removeClass("bp-toggle-action-button"),t.addClass("bp-toggle-action-button-hover"),!1):void 0):e},buttonHoverout:function(e){e=h(e.currentTarget);if(e.hasClass("bp-toggle-action-button-hover")&&!e.hasClass("loading")){if(e.hasClass("group-subscription")&&void 0!==e.data("title")&&void 0!==e.data("title-displayed")&&0===e.data("title").replace(/<(.|\n)*?>/g,"").length&&0===e.data("title-displayed").replace(/<(.|\n)*?>/g,"").length)return e.removeClass("bp-toggle-action-button-hover"),e.addClass("bp-toggle-action-button"),!1;h(document.body).hasClass("buddyboss-theme")&&void 0!==e.data("balloon")&&(e.hasClass("following")||e.attr("data-balloon",e.data("title-displayed").replace(/<(.|\n)*?>/g,"")),e.find("span").html(e.data("title-displayed"))),e.html(e.data("title-displayed")),e.removeClass("bp-toggle-action-button-hover"),e.addClass("bp-toggle-action-button")}},awaitingButtonHover:function(e){var t=h(e.currentTarget);if(e.preventDefault(),t.hasClass("bp-toggle-action-button"))return h(document.body).hasClass("buddyboss-theme")&&void 0!==t.data("balloon")&&(t.hasClass("following")||t.attr("data-balloon",t.data("title").replace(/<(.|\n)*?>/g,"")),t.find("span").html(t.data("title"))),t.html(t.data("title")),t.removeClass("bp-toggle-action-button"),t.addClass("bp-toggle-action-button-hover"),!1},awaitingButtonHoverout:function(e){e=h(e.currentTarget);e.hasClass("bp-toggle-action-button-hover")&&!e.hasClass("loading")&&(h(document.body).hasClass("buddyboss-theme")&&void 0!==e.data("balloon")&&(e.hasClass("following")||e.attr("data-balloon",e.data("title-displayed").replace(/<(.|\n)*?>/g,"")),e.find("span").html(e.data("title-displayed"))),e.html(e.data("title-displayed")),e.removeClass("bp-toggle-action-button-hover"),e.addClass("bp-toggle-action-button"))},leaveGroupAction:function(e){e.preventDefault(),h("body").find('[data-current-anchor="true"]').removeClass("bp-toggle-action-button bp-toggle-action-button-hover").addClass("bp-toggle-action-button-clicked"),h("body").find('[data-current-anchor="true"]').trigger("click")},leaveGroupClose:function(e){e.preventDefault();e=h(e.currentTarget),e=h(e).closest(".bb-leave-group-popup");h("body").find('[data-current-anchor="true"]').attr("data-current-anchor","false"),h("body").find('[data-popup-shown="true"]').attr("data-popup-shown","false"),e.find(".bb-leave-group-content .bb-group-name").html(""),e.hide()},removeConnectionAction:function(e){e.preventDefault(),h("body").find('[data-current-anchor="true"]').removeClass("bp-toggle-action-button bp-toggle-action-button-hover").addClass("bp-toggle-action-button-clicked"),h("body").find('[data-current-anchor="true"]').trigger("click")},removeConnectionClose:function(e){e.preventDefault();e=h(e.currentTarget),e=h(e).closest(".bb-remove-connection");h("body").find('[data-current-anchor="true"]').attr("data-current-anchor","false"),h("body").find('[data-popup-shown="opened"]').attr("data-popup-shown","closed"),e.find(".bb-remove-connection-content .bb-user-name").html(""),e.hide()},buttonRevertAll:function(){h.each(h("#buddypress [data-bp-btn-action]"),function(){h(this).hasClass("bp-toggle-action-button-clicked")&&!h(this).hasClass("loading")&&(h(document.body).hasClass("buddyboss-theme")&&void 0!==h(this).data("balloon")?h(this).attr("data-balloon",h(this).data("title-displayed")):h(this).text(h(this).data("title-displayed")),h(this).removeClass("bp-toggle-action-button-clicked"),h(this).addClass("bp-toggle-action-button"),h(this).trigger("blur"))})},addRemoveInvite:function(e){var t=e.currentTarget,i=h(t).closest("tbody");if(h(t).hasClass("field-actions-remove")){if(!(1<h(this).closest("tr").siblings().length))return;h(this).closest("tr").remove(),i.find(".field-actions-add.disabled").removeClass("disabled")}else if(h(t).hasClass("field-actions-add")){if(h(t).hasClass("disabled"))return;e=h(this).closest("tr").prev("tr").html();h("<tr>"+e+"</tr>").insertBefore(h(this).closest("tr")),20<i.find("tr").length&&h(t).addClass("disabled")}i=i.find("tr:not(:last-child)");h.each(i,function(e){h(this).find(".field-name > input").attr("name","invitee["+e+"][]"),h(this).find(".field-name > input").attr("id","invitee_"+e+"_title"),h(this).find(".field-email > input").attr("name","email["+e+"][]"),h(this).find(".field-email > input").attr("id","email_"+e+"_email"),h(this).find(".field-member-type > select").attr("name","member-type["+e+"][]"),h(this).find(".field-member-type > select").attr("id","member_type_"+e+"_member_type")})},closeNotice:function(e){var t=h(e.currentTarget);e.preventDefault(),"clear"===t.data("bp-close")&&(void 0!==h.cookie("bp-message")&&h.removeCookie("bp-message"),void 0!==h.cookie("bp-message-type")&&h.removeCookie("bp-message-type")),t.closest(".bp-feedback").hasClass("bp-sitewide-notice")&&bp.Nouveau.ajax({action:"messages_dismiss_sitewide_notice"},"messages"),t.closest(".bp-feedback").remove()},paginateAction:function(e){var t,i=e.data,a=h(e.currentTarget),n=null,o=null,s=null,r=null,d=a.closest("[data-bp-pagination]").data("bp-pagination")||null;if(null===d)return e;e.preventDefault(),null!==(e=h(e.delegateTarget).data("bp-list")||null)&&(void 0!==(t=i.getStorage("bp-"+e)).scope&&(n=t.scope),void 0!==t.filter&&(o=t.filter),void 0!==t.extras&&(r=t.extras)),null!==e&&(void 0!==(t=i.getStorage("bp-"+e)).scope&&(n=t.scope),void 0!==t.filter&&(o=t.filter),void 0!==t.extras&&(r=t.extras));d={object:e,scope:n,filter:o,search_terms:s=h('#buddypress [data-bp-search="'+e+'"] input[type=search]').length?h('#buddypress [data-bp-search="'+e+'"] input[type=search]').val():s,extras:r,caller:a.closest("[data-bp-pagination]").hasClass("bottom")?"pag-bottom":"",page:i.getLinkParams(a.prop("href"),d)||1};h("#buddypress [data-bp-group-type-filter]").length&&(d.group_type=h("#buddypress [data-bp-group-type-filter]").val()),h("#buddypress [data-bp-member-type-filter]").length&&(d.member_type_id=h("#buddypress [data-bp-member-type-filter]").val()),i.objectRequest(d)},enableSubmitOnLegalAgreement:function(){h("body #buddypress #register-page #signup-form #legal_agreement").length&&(h("body #buddypress #register-page #signup-form .submit #signup_submit").prop("disabled",!0),h(document).on("change","body #buddypress #register-page #signup-form #legal_agreement",function(){h(this).prop("checked")?h("body #buddypress #register-page #signup-form .submit #signup_submit").prop("disabled",!1):h("body #buddypress #register-page #signup-form .submit #signup_submit").prop("disabled",!0)}))},registerPopUp:function(){h(".popup-modal-register").length&&h(".popup-modal-register").magnificPopup({type:"inline",preloader:!1,fixedBgPos:!0,fixedContentPos:!0}),h(".popup-modal-dismiss").length&&h(".popup-modal-dismiss").click(function(e){e.preventDefault(),h.magnificPopup.close()})},loginPopUp:function(){h(".popup-modal-login").length&&h(".popup-modal-login").magnificPopup({type:"inline",preloader:!1,fixedBgPos:!0,fixedContentPos:!0}),h(".popup-modal-dismiss").length&&h(".popup-modal-dismiss").click(function(e){e.preventDefault(),h.magnificPopup.close()})},threadListBlockPopup:function(e){e.preventDefault();var t=h(this).data("bp-content-id"),i=h(this).data("bp-content-type"),a=h(this).data("bp-nonce"),n=h(this).attr("href");void 0!==t&&void 0!==i&&void 0!==a&&(h(document).find(".bp-report-form-err").empty(),(e=h(n)).find(".bp-content-id").val(t),e.find(".bp-content-type").val(i),e.find(".bp-nonce").val(a)),0<h("#message-threads .block-member").length&&h("#message-threads .block-member").magnificPopup({items:{src:n,type:"inline"}}).magnificPopup("open")},threadListReportPopup:function(e){e.preventDefault();var t=h(this).data("bp-content-id"),i=h(this).data("bp-content-type"),a=h(this).data("bp-nonce"),n=h(this).attr("href"),o=h(this).attr("reported_type"),e=h(n);void 0!==t&&void 0!==i&&void 0!==a&&(h(document).find(".bp-report-form-err").empty(),e.find(".bp-content-id").val(t),e.find(".bp-content-type").val(i),e.find(".bp-nonce").val(a)),0<h("#message-threads .report-content").length&&(h("#bb-report-content .form-item-category").show(),h("user_report"===i?"#bb-report-content .form-item-category.content":"#bb-report-content .form-item-category.members").hide(),h('#bb-report-content .form-item-category:visible:first label input[type="radio"]').attr("checked",!0),h('#bb-report-content .form-item-category:visible label input[type="radio"]').length||(h("#report-category-other").attr("checked",!0),h("#report-category-other").trigger("click"),h('label[for="report-category-other"]').hide()),void 0!==o&&e.find(".bp-reported-type").text(o),h("#message-threads .report-content").magnificPopup({items:{src:n,type:"inline"}}).magnificPopup("open"))},reportPopUp:function(){0<h(".report-content, .block-member").length&&h(".report-content, .block-member").magnificPopup({type:"inline",midClick:!0,callbacks:{open:function(){console.log("called"),h("#notes-error").hide();var e=this.currItem.el.data("bp-content-id"),t=this.currItem.el.data("bp-content-type"),i=this.currItem.el.data("bp-nonce"),a=this.currItem.el.attr("reported_type");h("#bb-report-content .form-item-category").show(),h("user_report"===t?"#bb-report-content .form-item-category.content":"#bb-report-content .form-item-category.members").hide(),h('#bb-report-content .form-item-category:visible:first label input[type="radio"]').attr("checked",!0),h('#bb-report-content .form-item-category:visible label input[type="radio"]').length||(h("#report-category-other").attr("checked",!0),h("#report-category-other").trigger("click"),h('label[for="report-category-other"]').hide());var n=h("#content-report");n.find(".bp-reported-type").text(this.currItem.el.data("reported_type")),void 0!==a&&n.find(".bp-reported-type").text(a),void 0!==e&&void 0!==t&&void 0!==i&&(h(document).find(".bp-report-form-err").empty(),(a=h(".mfp-content")).find(".bp-content-id").val(e),a.find(".bp-content-type").val(t),a.find(".bp-nonce").val(i))}}})},reportActions:function(){var a=this;h(document).on("click",".bb-cancel-report-content",function(e){e.preventDefault(),h("form#bb-report-content").trigger("reset"),h(this).closest(".moderation-popup").find(".bp-other-report-cat").closest(".form-item").addClass("bp-hide"),h(this).closest(".moderation-popup").find(".mfp-close").trigger("click")}),h(document).on("click","input[type=radio][name=report_category]",function(){"other"===this.value?h(this).closest(".moderation-popup").find(".bp-other-report-cat").closest(".form-item").removeClass("bp-hide"):h(this).closest(".moderation-popup").find(".bp-other-report-cat").closest(".form-item").addClass("bp-hide")}),h("#bb-report-content").submit(function(t){if(h("#report-category-other").is(":checked")&&""===h("#report-note").val())return h("#notes-error").show(),!1;h("#bb-report-content").find(".report-submit").addClass("loading"),h(".bp-report-form-err").empty();var i={action:"bp_moderation_content_report"};h.each(h(this).serializeArray(),function(e,t){i[t.name]=t.value}),h.post(BP_Nouveau.ajaxurl,i,function(e){e.success?(a.resetReportPopup(),a.changeReportButtonStatus(e.data),h("#bb-report-content").find(".report-submit").removeClass("loading"),h(".mfp-close").trigger("click"),jQuery(document).trigger("bb_trigger_toast_message",["",e.data.toast_message,"info",null,!0])):(h("#bb-report-content").find(".report-submit").removeClass("loading"),a.handleReportError(e.data.message.errors,t.currentTarget))})}),h("#bb-block-member").submit(function(t){h("#bb-block-member").find(".report-submit").addClass("loading"),h(".bp-report-form-err").empty();var i={action:"bp_moderation_block_member"};h.each(h(this).serializeArray(),function(e,t){i[t.name]=t.value}),h.post(BP_Nouveau.ajaxurl,i,function(e){e.success?(a.resetReportPopup(),a.changeReportButtonStatus(e.data),h("#bb-block-member").find(".report-submit").removeClass("loading"),h(".mfp-close").trigger("click"),e.data.redirect&&(location.href=e.data.redirect)):(h("#bb-block-member").find(".report-submit").removeClass("loading"),a.handleReportError(e.data.message.errors,t.currentTarget))})})},resetReportPopup:function(){h("form#bb-report-content").trigger("reset");var e=h(".mfp-content");e.find(".bp-content-id").val(""),e.find(".bp-content-type").val(""),e.find(".bp-nonce").val(""),e.find(".bp-report-form-err").empty()},changeReportButtonStatus:function(e){var t=this;h("[data-bp-content-id="+e.button.button_attr.item_id+"][data-bp-content-type="+e.button.button_attr.item_type+"]").each(function(){h(this).removeAttr("data-bp-content-id"),h(this).removeAttr("data-bp-content-type"),h(this).removeAttr("data-bp-nonce"),h(this).html(e.button.link_text),h(this).attr("class",e.button.button_attr.class),h(this).attr("reported_type",e.button.button_attr.reported_type),h(this).attr("href",e.button.button_attr.href),setTimeout(function(){t.reportedPopup()},1)})},reportedPopup:function(){0<h(".reported-content").length&&h(".reported-content").magnificPopup({type:"inline",midClick:!0,callbacks:{open:function(){var e=void 0!==this.currItem.el.attr("reported_type")?this.currItem.el.attr("reported_type"):this.currItem.el.data("reported_type");void 0!==e&&h("#reported-content").find(".bp-reported-type").text(e)}}})},handleReportError:function(e,t){var i="";e.bp_moderation_missing_data?i=e.bp_moderation_missing_data:e.bp_moderation_already_reported?i=e.bp_moderation_already_reported:e.bp_moderation_missing_error?i=e.bp_moderation_missing_error:e.bp_moderation_invalid_access?i=e.bp_moderation_invalid_access:e.bp_moderation_invalid_item_id&&(i=e.bp_moderation_invalid_item_id),jQuery(t).closest(".bb-report-type-wrp").find(".bp-report-form-err").html(i)},togglePassword:function(){h(document).on("click",".bb-toggle-password, .bb-hide-pw",function(e){e.preventDefault();var t=h(this),i=t.hasClass("bb-hide-pw")?t.closest(".password-toggle").find("input"):t.next("input"),e=i.data("type")?i.data("type"):"text";t.toggleClass("bb-show-pass"),t.hasClass("bb-show-pass")?i.attr("type",e):i.attr("type","password")})},closePickersOnClick:function(e){e=h(e.target);_.isUndefined(BP_Nouveau.media)||_.isUndefined(BP_Nouveau.media.emoji)||e.closest(".post-emoji").length||e.is(".emojioneemoji,.emojibtn")||h(".post-emoji.active, .emojionearea-button.active").removeClass("active")},closePickersOnEsc:function(e){"Escape"!==e.key&&27!==e.keyCode||_.isUndefined(BP_Nouveau.media)||_.isUndefined(BP_Nouveau.media.emoji)||h(".post-emoji.active, .emojionearea-button.active").removeClass("active")},lazyLoad:function(e){var t=h(e);if(t.length)for(var i=0;i<t.length;i++){var a=!1;try{h(t[i]).is(":in-viewport")&&(a=!0)}catch(e){console.log(e.message),!a&&t[i].getBoundingClientRect().top<=(window.innerHeight||document.documentElement.clientHeight)+window.scrollY&&(a=!0)}a&&t[i].getAttribute("data-src")&&(t[i].src=t[i].getAttribute("data-src"),t[i].removeAttribute("data-src"),h(t[i]).on("load",function(){h(this).removeClass("lazy")}),h(document).trigger("bp_nouveau_lazy_load",{element:t[i]}))}},coverPhotoCropper:function(e){var t,i,a,n,o,s;if(h(e.currentTarget).hasClass("position-change-cover-image")){var r=h(e.currentTarget).closest("#cover-image-container").find(".header-cover-img").height(),d=(r-h(e.currentTarget).closest("#header-cover-image").height())/2,l=h(e.currentTarget);if(r<=l.closest("#header-cover-image").height())return h("body").append('<div id="cover-photo-alert" style="display: block;" class="open-popup"><transition name="modal"><div class="modal-mask bb-white bbm-model-wrap"><div class="modal-wrapper"><div id="boss-media-create-album-popup" class="modal-container has-folderlocationUI"><header class="bb-model-header"><h4>'+BP_Nouveau.media.cover_photo_size_error_header+'</h4><a class="bb-model-close-button" id="bp-media-create-folder-close" href="#"><span class="dashicons dashicons-no-alt"></span></a></header><div class="bb-field-wrap"><p>'+BP_Nouveau.media.cover_photo_size_error_description+"</p></div></div></div></div></transition></div>"),void e.preventDefault();t=h(e.currentTarget).closest("#header-cover-image").height(),i=h(e.currentTarget).closest("#header-cover-image").width(),a=Number(h(e.currentTarget).closest("#cover-image-container").find(".header-cover-img").css("top").replace("px","")),n=h(e.currentTarget).closest("#header-cover-image").width()/h(e.currentTarget).closest("#header-cover-image").find(".header-cover-reposition-wrap img")[0].width,l.closest("#cover-image-container").find(".header-cover-reposition-wrap").show(),(r=h(".header-cover-reposition-wrap img")).guillotine({width:i,height:t,eventOnChange:"guillotinechange",init:{scale:n,y:a&&h(e.currentTarget).closest("#header-cover-image").hasClass("has-position")?-a:d,w:i,h:t}}),r.on("guillotinechange",function(e,t){l.closest("#cover-image-container").find(".header-cover-img").attr("data-top",-t.y)})}else h(e.currentTarget).hasClass("cover-image-save")?(o=h(e.currentTarget),s=h(e.currentTarget).closest("#cover-image-container").find(".header-cover-img"),o.addClass("loading"),h.post(BP_Nouveau.ajaxurl,{action:"save_cover_position",position:s.attr("data-top")}).done(function(e){e.success&&e.data&&""!==e.data.content?(o.removeClass("loading"),o.closest("#cover-image-container").find(".header-cover-reposition-wrap").hide(),o.closest("#header-cover-image:not(.has-position)").addClass("has-position"),s.css({top:e.data.content+"px"})):(o.removeClass("loading"),o.closest("#cover-image-container").find(".header-cover-reposition-wrap").hide())}).fail(function(){o.removeClass("loading"),o.closest("#cover-image-container").find(".header-cover-reposition-wrap").hide()})):h(e.currentTarget).hasClass("cover-image-cancel")&&((r=h(".header-cover-reposition-wrap img")).guillotine({width:0,height:0,init:{scale:1,y:0,w:0,h:0}}),r.guillotine("remove"),h(e.currentTarget).closest("#cover-image-container").find(".header-cover-reposition-wrap").hide(),h(e.currentTarget).closest("#cover-image-container").find(".header-cover-img").attr("data-top",""));e.preventDefault()},coverPhotoCropperAlert:function(e){e.preventDefault(),h("#cover-photo-alert").remove()},toggleMoreOption:function(e){h(e.target).hasClass("bb_more_options_action")||h(e.target).parent().hasClass("bb_more_options_action")?(e.preventDefault(),h(e.target).closest(".bb_more_options").find(".bb_more_options_list").hasClass("is_visible")?h(".bb_more_options").find(".bb_more_options_list").removeClass("is_visible"):(h(".bb_more_options").find(".bb_more_options_list").removeClass("is_visible"),h(e.target).closest(".bb_more_options").find(".bb_more_options_list").addClass("is_visible"))):(h(".bb_more_options").find(".bb_more_options_list").removeClass("is_visible"),h(".optionsOpen").removeClass("optionsOpen"))},getVideoThumb:function(d,l){var e,i=new FileReader;i.onload=function(){var t,e=new Blob([i.result],{type:d.type}),n=URL.createObjectURL(e),o=document.createElement("video");o.src=n;var s=0,r=setInterval(function(){var e;0<o.readyState&&(t=o.duration.toFixed(2),o.addEventListener("timeupdate",e=function(){!function(){var e=document.createElement("canvas");e.width=o.videoWidth,e.height=o.videoHeight,e.getContext("2d").drawImage(o,0,0,e.width,e.height);var t=e.toDataURL(),i=t.length>5e4;if(i){var a=document.createElement("img");a.src=t;if(d.previewElement){if(h(d.previewElement).find(l).find("img").length)h(d.previewElement).find(l).find("img").attr("src",t);else h(d.previewElement).find(l).append(a);h(d.previewElement).closest(".dz-preview").addClass("dz-has-thumbnail")}else if(h(l).find("img").length)h(l).find("img").attr("src",t);else h(l).append(a);URL.revokeObjectURL(n)}else{if(s>=2){h(d.previewElement).closest(".dz-preview").addClass("dz-has-no-thumbnail");clearInterval(r)}s++}return i}()||(o.removeEventListener("timeupdate",e),o.pause())}),o.preload="metadata",o.src=n,o.muted=!0,o.playsInline=!0,null!=t&&(o.currentTime=Math.floor(t)),o.play(),clearInterval(r)),2<=s&&(h(d.previewElement).closest(".dz-preview").addClass("dz-has-no-thumbnail"),clearInterval(r)),s++},500)},d.dataURL?((e=new XMLHttpRequest).open("GET",d.dataURL,!0),e.responseType="blob",e.onload=function(){var e;200==this.status&&(e=this.response,i.readAsArrayBuffer(e))},e.send()):i.readAsArrayBuffer(d)},bbWidgetMoreFollowing:function(e){e=h(e.currentTarget).attr("href").split("#");if(1<e.length){e=e.pop();if(e&&0<h('[data-bp-scope="'+e+'"]').length)return h('[data-bp-scope="'+e+'"] a').trigger("click"),!1}},toggleAccordion:function(){var e=h(this).closest(".bb-accordion");"true"==e.find(".bb-accordion_trigger").attr("aria-expanded")?(e.find(".bb-accordion_trigger").attr("aria-expanded","false"),e.find(".bb-icon-angle-up").removeClass("bb-icon-angle-up").addClass("bb-icon-angle-down")):(e.find(".bb-accordion_trigger").attr("aria-expanded","true"),e.find(".bb-icon-angle-down").removeClass("bb-icon-angle-down").addClass("bb-icon-angle-up")),e.toggleClass("is_closed"),e.find(".bb-accordion_panel").slideToggle()},mediumEditorButtonsWarp:function(e){var t;e.hasClass("wrappingInitialised")||(e.addClass("wrappingInitialised"),t=0,e.find(".medium-editor-toolbar-actions > li").each(function(){t+=h(this).outerWidth()}),t>e.width()-10?(e.data("childerWith",t),t>e.width()&&(0===e.find(".medium-editor-toolbar-actions .medium-editor-action-more").length&&e.find(".medium-editor-toolbar-actions").append('<li class="medium-editor-action-more"><button class="medium-editor-action medium-editor-action-more-button"><b></b></button><ul></ul></li>'),e.find(".medium-editor-action-more").show(),t+=e.find(".medium-editor-toolbar-actions .medium-editor-action-more").outerWidth(),h(e.find(".medium-editor-action").get().reverse()).each(function(){h(this).hasClass("medium-editor-action-more-button")||t>e.width()&&(t-=h(this).outerWidth(),e.find(".medium-editor-action-more > ul").prepend(h(this).parent()))}))):e.find(".medium-editor-toolbar-actions .medium-editor-action-more").length&&(h(e.find(".medium-editor-action-more ul > li")).each(function(){t+35<e.width()&&(t+=h(this).outerWidth(),h(this).insertBefore(e.find(".medium-editor-action-more")))}),0===e.find(".medium-editor-action-more ul > li").length&&e.find(".medium-editor-action-more").hide()),h(e).find(".medium-editor-action-more-button").on("click",function(e){e.preventDefault(),h(this).parent(".medium-editor-action-more").toggleClass("active")}),h(e).find(".medium-editor-action-more ul .medium-editor-action").on("click",function(e){e.preventDefault(),h(this).closest(".medium-editor-action-more").toggleClass("active")}),h(window).one("resize",function(){e.removeClass("wrappingInitialised"),h(e).find(".medium-editor-action-more ul .medium-editor-action").unbind("click")}))},isURL:function(e){return/^(http:\/\/www\.|https:\/\/www\.|http:\/\/|https:\/\/)?[a-z0-9]+([\-\.]{1}[a-z0-9]+)*\.[a-z]{2,24}(:[0-9]{1,5})?(\/.*)?$/.test(h.trim(e))},closeActionPopup:function(e){e.preventDefault(),h(this).closest(".bb-action-popup").hide()},directorySearchInput:function(){var e,t;h(this).val()===h(this).data("last-value")||""===h(this).val()&&void 0===h(this).data("last-value")||(h(this).data("last-value",h(this).val()),t=(e=h(this).closest(".search-form-has-reset")).find(".search-form_reset"),0<h(this).val().length?t.show():(t.hide(),e.hasClass("bp-invites-search-form")&&(e.find('input[type="search"]').val(""),e.find('input[type="search"]').trigger(h.Event("search")))),h(this).hasClass("ui-autocomplete-input")||e.find(".search-form_submit").trigger("click"))},resetDirectorySearch:function(e){e.preventDefault();e=h(this).closest("form");0<e.filter(".bp-messages-search-form, .bp-dir-search-form").length?(e.find('input[type="search"]').val(""),e.find(".search-form_submit").trigger("click")):e.find("#bbp_search").val(""),h(this).hide(),e.hasClass("bp-invites-search-form")&&(e.find('input[type="search"]').val(""),e.find('input[type="search"]').trigger(h.Event("search")))},showActionPopup:function(e){e.preventDefault(),h(h(e.currentTarget).attr("href")).show()},profileNotificationSetting:function(){var t=this;t.profileNotificationSettingInputs([".email",".web",".app"]),h(".notification_info .notification_learn_more").click(function(e){e.preventDefault(),h(this).find("a span").toggleClass(function(){return h(this).hasClass("bb-icon-chevron-down")?"bb-icon-chevron-up":"bb-icon-chevron-down"}),h(this).toggleClass("show").parent().find(".notification_type").toggleClass("show")}),h(".main-notification-settings").each(function(){t.NotificationMobileDropdown(h(this).find("tr:not( .notification_heading )"))}),h(document).on("click",".bb-mobile-setting ul li",function(e){e.preventDefault(),h(this).find("input").is(":checked")?h(this).find("input").prop("checked",!1):h(this).find("input").prop("checked",!0),h(h("input#"+h(this).find("label").attr("data-for"))).trigger("click"),t.NotificationMobileDropdown(h(this).closest("tr"))}),h(document).on("click",".bb-mobile-setting .bb-mobile-setting-anchor",function(){h(this).parent().toggleClass("active"),h(".bb-mobile-setting").not(h(this).parent()).removeClass("active")}),h(document).on("click",function(e){h(e.target).hasClass("bb-mobile-setting-anchor")||h(".bb-mobile-setting").removeClass("active")})},xProfileBlock:function(){h(".profile-fields .field_type_socialnetworks").each(function(){h(this).closest(".bp-widget").addClass("social")})},profileNotificationSettingInputs:function(t){for(var e=0;e<t.length;e++)!function(e){h(document).on("click",".main-notification-settings th"+t[e]+' input[type="checkbox"]',function(){h(this).is(":checked")?(h(".main-notification-settings").find("td"+t[e]).removeClass("disabled").find("input").prop("disabled",!1),h(".main-notification-settings").find(".bb-mobile-setting li"+t[e]).removeClass("disabled").find("input").prop("disabled",!1)):(h(".main-notification-settings").find("td"+t[e]).addClass("disabled").find("input").prop("disabled",!0),h(".main-notification-settings").find(".bb-mobile-setting li"+t[e]).addClass("disabled").find("input").prop("disabled",!0)),bp.Nouveau.NotificationMobileDropdown(h(this).closest("#settings-form").find("tr:not( .notification_heading )"))})}(e)},NotificationMobileDropdown:function(e){var t=h(".main-notification-settings").data("text-all"),i=h(".main-notification-settings").data("text-none");e.each(function(){var a="",n="",e=h(this).find("td").length?"td":"th",o=0;h(this).find(e+":not(:first-child)").each(function(){var e,t,i;h(this).find('input[type="checkbox"]').length&&(e=h(this).find("label").text(),t=h(this).find("input").is(":checked")?"checked":"",i=h(this).hasClass("disabled")?" disabled":"",n+='<li class="'+e.toLowerCase()+i+'"><input type="checkbox" class="bs-styled-checkbox" '+t+' /><label data-for="'+h(this).find('input[type="checkbox"]').attr("id")+'">'+e+"</label></li>"),h(this).hasClass("disabled")||h(this).find("input:checked").length&&(a+=""===a?h(this).find('input[type="checkbox"] + label').text().trim():", "+h(this).find('input[type="checkbox"] + label').text().trim(),o++)}),o===h(this).find(e+':not(:first-child) input[type="checkbox"]').length?1==h(this).find(e+':not(:first-child) input[type="checkbox"]').length||(a=t):a=""===a?i:a,0===h(this).find(e+":first-child .bb-mobile-setting").length?h(this).find(e+":first-child").append('<div class="bb-mobile-setting"><span class="bb-mobile-setting-anchor">'+a+"</span><ul></ul></div>"):h(this).find(e+":first-child .bb-mobile-setting .bb-mobile-setting-anchor").text(a),h(this).find(e+":first-child .bb-mobile-setting ul").html(""),h(this).find(e+":first-child .bb-mobile-setting ul").append(n)})},dropZoneGlobalProgress:function(i){0==h(i.element).find(".dz-global-progress").length&&(h(i.element).append('<div class="dz-global-progress"><div class="dz-progress-bar-full"><span class="dz-progress"></span></div><p></p><span class="bb-icon-f bb-icon-times dz-remove-all"></span></div>'),h(i.element).addClass("dz-progress-view"),h(i.element).find(".dz-remove-all").click(function(){h.each(i.files,function(e,t){i.removeFile(t)})}));var e="",t=0,a=0;1==i.files.length?(h(i.element).addClass("dz-single-view"),e="Uploading <strong>"+i.files[0].name+"</strong>",t=i.files[0].upload.progress):(h(i.element).removeClass("dz-single-view"),a=0,h.each(i.files,function(e,t){a+=t.upload.progress}),t=a/i.files.length,e="Uploading <strong>"+i.files.length+" files</strong>"),h(i.element).find(".dz-global-progress .dz-progress").css("width",t+"%"),h(i.element).find(".dz-global-progress > p").html(e)},userPresenceStatus:function(){window.bb_is_user_active=!0;var e=1e3*parseInt(BB_Nouveau_Presence.idle_inactive_span);bp.Nouveau.userPresenceChecker(e),""!==BB_Nouveau_Presence.heartbeat_enabled&&parseInt(BB_Nouveau_Presence.presence_interval)<=60?(h(document).on("heartbeat-send",function(e,t){var i;void 0!==window.bb_is_user_active&&!0===window.bb_is_user_active&&(i=bp.Nouveau.getPageUserIDs(),t.presence_users=i.join(","))}),h(document).on("heartbeat-tick",function(e,t){t.users_presence&&bp.Nouveau.updateUsersPresence(t.users_presence)})):setInterval(function(){var e,t={};void 0!==window.bb_is_user_active&&!0===window.bb_is_user_active&&(t.ids=bp.Nouveau.getPageUserIDs()),void 0!==t.ids&&void 0!==t.ids.length&&0<t.ids.length&&(e="1"===BB_Nouveau_Presence.native_presence?BB_Nouveau_Presence.native_presence_url:BB_Nouveau_Presence.presence_rest_url,h.ajax({type:"POST",url:e,data:t,beforeSend:function(e){e.setRequestHeader("X-WP-Nonce",BB_Nouveau_Presence.rest_nonce)},success:function(e){e&&bp.Nouveau.updateUsersPresence(e)}}))},1e3*parseInt(BB_Nouveau_Presence.presence_default_interval))},getPageUserIDs:function(){var t=[],e=h(document).find(".member-status[data-bb-user-id]");return 0<e.length&&e.each(function(){var e=h(this).attr("data-bb-user-id");-1==h.inArray(parseInt(e),t)&&t.push(parseInt(e))}),t},updateUsersPresence:function(e){e&&0<e.length&&h.each(e,function(e,t){bp.Nouveau.updateUserPresence(t.id,t.status)})},updateUserPresence:function(e,t){h(document).find('.member-status[data-bb-user-id="'+e+'"]').removeClass("offline online").addClass(t).attr("data-bb-user-presence",t)},userPresenceChecker:function(e){var t=setTimeout(function(){window.bb_is_user_active=!1},e);document.onmousemove=document.mousedown=document.mouseup=document.onkeydown=document.onkeyup=document.focus=function(){clearTimeout(t),t=setTimeout(function(){window.bb_is_user_active=!1},e),window.bb_is_user_active=!0}},linkPreviews:{currentTarget:null,currentTargetForm:null,currentPreviewParent:null,controlsAdded:null,dataInput:null,loadedURLs:[],loadURLAjax:null,options:{},render:function(e){var t=this,i=h("#tmpl-bb-link-preview").html(),e=_.template(i)(e);t.currentPreviewParent&&t.currentPreviewParent.html(e),!0!==t.options.link_loading&&1!==t.options.link_swap_image_button&&(null===t.controlsAdded&&t.registerControls(),!0!==t.options.link_error&&null!==t.dataInput&&0<t.dataInput.length&&(e=t.options.link_description,t.options.link_embed&&(e=""),e={link_url:t.options.link_url,link_title:t.options.link_title,link_description:e,link_embed:t.options.link_embed,link_image:void 0!==t.options.link_images?t.options.link_images[t.options.link_image_index_save]:"",link_image_index_save:t.options.link_image_index_save},t.dataInput.val(JSON.stringify(e)).trigger("change")))},registerControls:function(){var t=this;t.displayNextPrevButtonView=function(){h(".bb-url-scrapper-container #bb-url-prevPicButton").show(),h(".bb-url-scrapper-container #bb-url-nextPicButton").show(),h(".bb-url-scrapper-container #bb-link-preview-select-image").show(),h(".bb-url-scrapper-container #icon-exchange").hide(),h(".bb-url-scrapper-container #bb-link-preview-remove-image").hide()},h(t.currentPreviewParent).on("click","#bb-link-preview-remove-image",function(e){e.preventDefault(),t.options.link_images=[],t.options.link_image_index=0,t.options.link_image_index_save="-1",t.render(t.options)}),h(t.currentPreviewParent).on("click","#bb-close-link-suggestion",function(e){e.preventDefault(),h("#bb_link_url").val(""),Object.assign(t.options,{link_success:!1,link_error:!1,link_error_msg:"",link_scrapping:!1,link_images:[],link_image_index:0,link_title:"",link_description:"",link_url:"",link_embed:!1,link_swap_image_button:0,link_image_index_save:"0"}),t.render(t.options)}),h(t.currentPreviewParent).on("click","#icon-exchange",function(e){e.preventDefault(),t.options.link_swap_image_button=1,t.displayNextPrevButtonView()}),h(t.currentPreviewParent).on("click","#bb-url-prevPicButton",function(e){e.preventDefault();e=t.options.link_image_index;0<e&&(Object.assign(t.options,{link_image_index:parseInt(e)-1,link_swap_image_button:1}),t.render(t.options),t.displayNextPrevButtonView())}),h(t.currentPreviewParent).on("click","#bb-url-nextPicButton",function(e){e.preventDefault();e=t.options.link_image_index;e<t.options.link_images.length-1&&(Object.assign(t.options,{link_image_index:parseInt(e)+1,link_swap_image_button:1}),t.render(t.options),t.displayNextPrevButtonView())}),h(t.currentPreviewParent).on("click","#bb-link-preview-select-image",function(e){e.preventDefault();e=t.options.link_image_index;t.options.link_image_index_save=e,t.options.link_swap_image_button=0,h(".bb-url-scrapper-container #icon-exchange").show(),h(".bb-url-scrapper-container #activity-link-preview-remove-image").show(),h(".bb-url-scrapper-container #activity-link-preview-select-image").hide(),h(".bb-url-scrapper-container #activity-url-prevPicButton").hide(),h(".bb-url-scrapper-container #activity-url-nextPicButton").hide(),t.render(t.options)}),t.controlsAdded=!0},scrapURL:function(e,t,i){var a,n=this,o="",s="";!t||0<(a=t.closest("form")).find("input#bb_link_url").length&&""!==a.find("input#bb_link_url").val()&&(a=JSON.parse(a.find("input#bb_link_url").val()),n.options.link_url=a.url||"",n.options.link_image_index_save=a.link_image_index_save,s=n.options.link_url),(null!==e&&""!==e||void 0!==n.options.link_url)&&(t&&(0==t.children(".bb-url-scrapper-container").length&&t.prepend('<div class="bb-url-scrapper-container"><div>'),n.currentPreviewParent=t.find(".bb-url-scrapper-container")),0<i.length&&"input"===i.prop("tagName").toLowerCase()&&(n.dataInput=i),(i=jQuery("<div></div>").html(e)).find("a.bp-suggestions-mention").remove(),i.find('[rel="nofollow"]').remove(),0<=(e=0<=(e=i.html()).indexOf("<img")?e.replace(/<img .*?>/g,""):e).indexOf("http://")?o=this.getURL("http://",e):0<=e.indexOf("https://")?o=this.getURL("https://",e):0<=e.indexOf("www.")&&(o=this.getURL("www",e)),""===o&&""===s||(""!==o&&((e=document.createElement("a")).href=o,e=e.hostname,void 0!==BP_Nouveau.forums.params.excluded_hosts&&-1!==BP_Nouveau.forums.params.excluded_hosts.indexOf(e)&&(o="")),""!==o?this.loadURLPreview(o):s&&this.loadURLPreview(s)))},getURL:function(e,t){var i="",a=(t=t.replace(/&nbsp;/g,"")).indexOf(e),n="";if(_.isUndefined(jQuery(h.parseHTML(t)).attr("href"))){for(var o=a;o<t.length&&!(" "===t[o]||"\n"===t[o]||'"'===t[o]&&">"===t[o+1]||"<"===t[o]&&"b"===t[o+1]&&"r"===t[o+2]);o++)i+=t[o];"www"===e&&(i=(e="http://")+i)}else i=jQuery(t).attr("href");e=document.createElement("div");e.innerHTML=i;for(var s=e.getElementsByTagName("*");s[0];)s[0].parentNode.removeChild(s[0]);return n=0<e.innerHTML.length?e.innerHTML:n},loadURLPreview:function(i){var t=this;if(void 0!==t.dataInput&&""!==t.dataInput.val()){var e=JSON.parse(t.dataInput.val());if(void 0!==e.link_url&&""!==e.link_url&&i===e.link_url)return}if(i=h.trim(i),/^(http:\/\/www\.|https:\/\/www\.|http:\/\/|https:\/\/)?[a-z0-9]+([\-\.]{1}[a-z0-9]+)*\.[a-z]{2,24}(:[0-9]{1,5})?(\/.*)?$/.test(i)){if(i.includes(window.location.hostname)&&(i.includes("download_document_file")||i.includes("download_media_file")||i.includes("download_video_file")))return!1;var a,n=!1;t.loadedURLs.length&&h.each(t.loadedURLs,function(e,t){if(t.url==i)return n=t.response,!1}),null!=t.loadURLAjax&&t.loadURLAjax.abort(),Object.assign(t.options,{link_scrapping:!0,link_loading:!0,link_error:!1,link_url:i,link_embed:!1,link_success:!1}),t.controlsAdded=null,void 0===t.currentPreviewParent||!t.currentPreviewParent.length||0<(a=t.currentPreviewParent.closest("form")).find("input#bb_link_url").length&&""!==a.find("input#bb_link_url").val()&&(""!==(e=JSON.parse(a.find("input#bb_link_url").val())).url&&e.url!==i&&(t.options.link_image_index_save=0,a.find("input#bb_link_url").val(""))),t.render(t.options),n?t.setURLResponse(n,i):t.loadURLAjax=h.post(ajaxurl,{action:"bb_forums_parse_url",url:i},function(e){t.setURLResponse(e,i)}).always(function(){})}},setURLResponse:function(e,t){var i,a,n=this;n.options.link_loading=!1,""!==e.title||""!==e.images?(""===e.error?(i=e.images,n.options.link_image_index=0,a="0",""===n.options.link_image_index_save||_.isUndefined(n.options.link_image_index_save)||(a=parseInt(n.options.link_image_index_save)),"-1"===n.options.link_image_index_save?(a="",i=[]):_.isUndefined(n.options.link_image_index_save)&&(n.options.link_image_index_save=0),Object.assign(n.options,{link_success:!0,link_url:t,link_title:_.isUndefined(e.title)?"":e.title,link_description:_.isUndefined(e.description)?"":e.description,link_images:i,link_image_index:a,link_embed:!_.isUndefined(e.wp_embed)&&e.wp_embed}),h("#whats-new-attachments").hasClass("bb-video-preview")&&h("#whats-new-attachments").removeClass("bb-video-preview"),h("#whats-new-attachments").hasClass("bb-link-preview")&&h("#whats-new-attachments").removeClass("bb-link-preview"),void 0!==e.description&&-1<e.description.indexOf("iframe")||!_.isUndefined(e.wp_embed)&&e.wp_embed?h("#whats-new-attachments").addClass("bb-video-preview"):h("#whats-new-attachments").addClass("bb-link-preview"),n.loadedURLs.push({url:t,response:e})):Object.assign(n.options,{link_success:!1,link_error:!0,link_error_msg:e.error,link_loading:!1,link_images:[]}),n.render(n.options)):n.options.link_scrapping=!1}}},bp.Nouveau.start())}((bp,jQuery));
